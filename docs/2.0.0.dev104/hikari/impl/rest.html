<!doctype html>
<html lang="en" class="sidebar-hidden">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 8.0.1" />
    <title>hikari.impl.rest API documentation | v2.0.0.dev104</title>
    <link rel="icon" href="https://www.hikari-py.dev/logo.png"/>

    
<style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>

<style>:root{--pdoc-background:#212529;}.pdoc{--text:#f7f7f7;--muted:#9d9d9d;--link:#d264d0;--link-hover:#3989ff;--code:#333;--active:#555;--accent:#343434;--accent2:#555;--nav-hover:rgba(0, 0, 0, 0.1);--def:#ff79c6;--name:#61aeee;--annotation:#F471E6;font-family:SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;}body{background-color:var(--pdoc-background);}html, body{width:100%;height:100%;word-break:break-word;}@media (max-width:1079px){:root{--sidebar-width:30rem;}html{font-size:3vw;}main, header{padding:2rem 3vw 0 1.5rem;}html:not(.sidebar-hidden) body{overflow:hidden !important;}.sidebar-hidden nav.pdoc{transform:translateX(calc(0px - var(--sidebar-width)));}nav.pdoc{transition:transform 0.2s;}.pdoc .sidebar-toggle{position:fixed;top:0;bottom:calc(100% - 6rem);left:var(--sidebar-width);border-left:5px solid grey;border-top:5px solid rgba(0, 0, 0, 0);border-bottom:5px solid rgba(0, 0, 0, 0);}}@media (min-width:1080px){:root{--sidebar-width:clamp(12.5rem, 28vw, 26rem);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);}}nav.pdoc{position:fixed;left:0;top:0;bottom:0;height:100vh;width:var(--sidebar-width);z-index:1;}.pdoc .sidebar{height:100vh;overflow:auto;padding:1rem 1rem;background-color:var(--accent);border-right:1px solid var(--accent2);scrollbar-color:var(--accent2) transparent }.pdoc .sidebar::-webkit-scrollbar-thumb{background-color:var(--accent2); }.pdoc .sidebar input[type=search]{display:block;outline-offset:0;width:102%;}.pdoc .sidebar ul{list-style:none;padding-left:1rem;}.pdoc .sidebar li{display:block;margin:0;padding:.2rem 0 .2rem .5rem;transition:all 100ms;}.pdoc .sidebar > ul > li{padding-left:0;}.pdoc .sidebar li:hover{background-color:var(--nav-hover);}.pdoc .sidebar a:hover{color:var(--text);}.pdoc .sidebar a{display:block;}.pdoc .sidebar a.function, .pdoc .sidebar a.variable{color:#bd93f9;}.pdoc .sidebar > h2:first-of-type{margin-top:1rem;}.pdoc .sidebar .class:before{content:"class ";color:var(--muted);}.pdoc .sidebar .function:after{content:"()";color:var(--muted);}.pdoc .sidebar .sidebar-buttons{display:flex;width:100%;margin-bottom:.5rem;align-items:end;}.pdoc .sidebar .sidebar-buttons .push{margin-left:auto;}.pdoc .svg-button > svg{width:1.5rem;margin:0 .2rem 0 .2rem;cursor:pointer;}.pdoc .version-selector{background-color:var(--accent);color:var(--text);border:hidden;}.pdoc .version-selector:disabled{-webkit-appearance:none;}html, main{scroll-behavior:smooth;}.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc p{font-weight:300;margin-top:0;margin-bottom:.5rem;}.pdoc pre{background-color:var(--code);border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--code);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc .modulename{color:#de4f91;font-weight:bold;margin:0.3em 0;padding:0.2em 0;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .modulename a:hover{filter:brightness(80%);}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.pdoc details{--shift:-2.4rem;text-align:right;margin-top:var(--shift);margin-bottom:calc(0px - var(--shift));clear:both;filter:opacity(1);}.pdoc details:not([open]){height:0;overflow:visible;}.pdoc details > summary{font-size:.75rem;cursor:pointer;color:var(--muted);border-width:0;padding:0 .7em;display:inline-block;display:inline list-item;user-select:none;}.pdoc details > summary:focus{outline:0;}.pdoc details > div{margin-top:calc(0px - var(--shift) / 2);text-align:left;}.pdoc .docstring{margin:0 0 2rem 2rem;}.pdoc .docstring pre{margin-left:1em;margin-right:1em;}.pdoc .docstring li{margin-bottom:15px;}.pdoc .docstring li:last-child{margin-bottom:0;}.pdoc span.name{color:#61aeee;}.pdoc span.base{color:#8be9fd;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc li strong{color:#DB61D9;}b, strong{font-weight:bold;}.pdoc em{color:orange;}.pdoc h6{padding-top:1rem;font-size:2rem;color:white;}.pdoc h6#notes{color:orange;}.pdoc h6#raises{color:#ff6666;}.pdoc div.decorator{color:#61aeee;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc .inherited dt,.pdoc .inherited dt::before{color:#61aeee;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc .headerlink{position:absolute;width:0;margin-left:-1.5rem;line-height:1.4rem;font-weight:normal;transition:all 100ms ease-in-out;opacity:0;}.pdoc .attr > .headerlink{margin-left:-2.5rem;}.pdoc *:hover > .headerlink,.pdoc *:target > .attr > .headerlink{opacity:1;}.pdoc .attr{display:block;color:var(--text);margin:1rem 0 .5rem;padding:.4rem 5rem .4rem 1rem;background-color:var(--accent);}.pdoc .classattr{margin-left:3rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{white-space:pre-wrap;}.pdoc .annotation{color:var(--annotation);}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited div{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;color:white;}.pdoc .c{color:#6a7aaa;}.pdoc .err{color:#ff5555;background-color:#1e0010;}.pdoc .k{color:#ff79c6;}.pdoc .l{color:#ae81ff;}.pdoc .n{color:#f8f8f2;}.pdoc .o{color:#ff79c6;}.pdoc .p{color:#f8f8f2;}.pdoc .ch{color:#6a7aaa;}.pdoc .cm{color:#6a7aaa;}.pdoc .cp{color:#6a7aaa;}.pdoc .cpf{color:#6a7aaa;}.pdoc .c1{color:#6a7aaa;}.pdoc .cs{color:#6a7aaa;}.pdoc .gd{color:#6a7aaa;}.pdoc .ge{font-style:italic;}.pdoc .gi{color:#a6e22e;}.pdoc .go{color:#ff79c6;}.pdoc .gp{color:#f92672;font-weight:bold;}.pdoc .gs{font-weight:bold;}.pdoc .gu{color:#75715e;}.pdoc .kc{color:#ff79c6;}.pdoc .kd{color:#bd93f9;}.pdoc .kn{color:#ff79c6;}.pdoc .kp{color:#bd93f9;}.pdoc .kr{color:#ff79c6;}.pdoc .kt{color:#ff79c6;}.pdoc .ld{color:#e6db74;}.pdoc .m{color:#ae81ff;}.pdoc .s{color:#e6db74;}.pdoc .na{color:#a6e22e;}.pdoc .nb{color:#8be9fd;}.pdoc .nc{color:#e6c07b;}.pdoc .no{color:#ff79c6;}.pdoc .ni{color:#ff79c6;}.pdoc .ne{color:#8be9fd;}.pdoc .nf{color:#61aeee;}.pdoc .nl{color:#f8f8f2;}.pdoc .nn{color:#f8f8f2;}.pdoc .nx{color:#a6e22e;}.pdoc .py{color:#f8f8f2;}.pdoc .nt{color:#f92672;}.pdoc .nv{color:#f8f8f2;}.pdoc .ow{color:#ff79c6;}.pdoc .w{color:#f8f8f2;}.pdoc .mb{color:#ae81ff;}.pdoc .mf{color:#ae81ff;}.pdoc .mh{color:#ae81ff;}.pdoc .mi{color:#ae81ff;}.pdoc .mo{color:#ae81ff;}.pdoc .sa{color:#ff79c6;}.pdoc .sb{color:#e6db74;}.pdoc .sc{color:#e6db74;}.pdoc .dl{color:#e6db74;}.pdoc .sd{color:#6272a4;}.pdoc .s2{color:#e6db74;}.pdoc .se{color:#ae81ff;}.pdoc .sh{color:#e6db74;}.pdoc .si{color:#bd93f9;}.pdoc .sx{color:#e6db74;}.pdoc .sr{color:#e6db74;}.pdoc .s1{color:#e6db74;}.pdoc .ss{color:#e6db74;}.pdoc .bp{color:#bd93f9;}.pdoc .fm{color:#bd93f9;}.pdoc .vc{color:#bd93f9;}.pdoc .vg{color:#f8f8f2;}.pdoc .vi{color:#ffffff;}.pdoc .vm{color:#bd93f9;}.pdoc .il{color:#ae81ff;}.pdoc .nd{color:#61aeee;}.pdoc .kc{color:#bd93f9;}</style>
</head>
<body>    <nav class="pdoc">
        <div id="sidebar" class="sidebar">
            <div class="sidebar-buttons">
                <label>
                    Hikari <select class="version-selector" id="version-selector" disabled><option>2.0.0.dev104</option></select>
                </label>
                <div class="push"></div>
                <a href="../../index.html" class="svg-button"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 576 512" >
    <path d="M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z" fill="#ffffff"/>
</svg></a>
                <a href="https://discord.gg/Jx4cNGG" class="svg-button"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 71 55">
    <path d="M60.1045 4.8978C55.5792 2.8214 50.7265 1.2916 45.6527 0.41542C45.5603 0.39851 45.468 0.440769 45.4204 0.525289C44.7963 1.6353 44.105 3.0834 43.6209 4.2216C38.1637 3.4046 32.7345 3.4046 27.3892 4.2216C26.905 3.0581 26.1886 1.6353 25.5617 0.525289C25.5141 0.443589 25.4218 0.40133 25.3294 0.41542C20.2584 1.2888 15.4057 2.8186 10.8776 4.8978C10.8384 4.9147 10.8048 4.9429 10.7825 4.9795C1.57795 18.7309 -0.943561 32.1443 0.293408 45.3914C0.299005 45.4562 0.335386 45.5182 0.385761 45.5576C6.45866 50.0174 12.3413 52.7249 18.1147 54.5195C18.2071 54.5477 18.305 54.5139 18.3638 54.4378C19.7295 52.5728 20.9469 50.6063 21.9907 48.5383C22.0523 48.4172 21.9935 48.2735 21.8676 48.2256C19.9366 47.4931 18.0979 46.6 16.3292 45.5858C16.1893 45.5041 16.1781 45.304 16.3068 45.2082C16.679 44.9293 17.0513 44.6391 17.4067 44.3461C17.471 44.2926 17.5606 44.2813 17.6362 44.3151C29.2558 49.6202 41.8354 49.6202 53.3179 44.3151C53.3935 44.2785 53.4831 44.2898 53.5502 44.3433C53.9057 44.6363 54.2779 44.9293 54.6529 45.2082C54.7816 45.304 54.7732 45.5041 54.6333 45.5858C52.8646 46.6197 51.0259 47.4931 49.0921 48.2228C48.9662 48.2707 48.9102 48.4172 48.9718 48.5383C50.038 50.6034 51.2554 52.5699 52.5959 54.435C52.6519 54.5139 52.7526 54.5477 52.845 54.5195C58.6464 52.7249 64.529 50.0174 70.6019 45.5576C70.6551 45.5182 70.6887 45.459 70.6943 45.3942C72.1747 30.0791 68.2147 16.7757 60.1968 4.9823C60.1772 4.9429 60.1437 4.9147 60.1045 4.8978ZM23.7259 37.3253C20.2276 37.3253 17.3451 34.1136 17.3451 30.1693C17.3451 26.225 20.1717 23.0133 23.7259 23.0133C27.308 23.0133 30.1626 26.2532 30.1066 30.1693C30.1066 34.1136 27.28 37.3253 23.7259 37.3253ZM47.3178 37.3253C43.8196 37.3253 40.9371 34.1136 40.9371 30.1693C40.9371 26.225 43.7636 23.0133 47.3178 23.0133C50.9 23.0133 53.7545 26.2532 53.6986 30.1693C53.6986 34.1136 50.9 37.3253 47.3178 37.3253Z" fill="#ffffff"/>
</svg></a>
                <a href="https://pypi.org/project/hikari" class="svg-button"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 512 512">
    <path d="M488.6 250.2L392 214V105.5c0-15-9.3-28.4-23.4-33.7l-100-37.5c-8.1-3.1-17.1-3.1-25.3 0l-100 37.5c-14.1 5.3-23.4 18.7-23.4 33.7V214l-96.6 36.2C9.3 255.5 0 268.9 0 283.9V394c0 13.6 7.7 26.1 19.9 32.2l100 50c10.1 5.1 22.1 5.1 32.2 0l103.9-52 103.9 52c10.1 5.1 22.1 5.1 32.2 0l100-50c12.2-6.1 19.9-18.6 19.9-32.2V283.9c0-15-9.3-28.4-23.4-33.7zM358 214.8l-85 31.9v-68.2l85-37v73.3zM154 104.1l102-38.2 102 38.2v.6l-102 41.4-102-41.4v-.6zm84 291.1l-85 42.5v-79.1l85-38.8v75.4zm0-112l-102 41.4-102-41.4v-.6l102-38.2 102 38.2v.6zm240 112l-85 42.5v-79.1l85-38.8v75.4zm0-112l-102 41.4-102-41.4v-.6l102-38.2 102 38.2v.6z" fill="#ffffff"/>
</svg></a>
            </div>

                <input type="search" placeholder="Search..." role="searchbox" title="Search the documentation" pattern=".+">



                <h2>API Documentation</h2>
                    <ul class="memberlist">
            <li>
                    <a class="class" href="#ClientCredentialsStrategy">ClientCredentialsStrategy</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#ClientCredentialsStrategy.__init__">ClientCredentialsStrategy</a>
                        </li>
                        <li>
                                <a class="variable" href="#ClientCredentialsStrategy.client_id">client_id</a>
                        </li>
                        <li>
                                <a class="variable" href="#ClientCredentialsStrategy.scopes">scopes</a>
                        </li>
                        <li>
                                <a class="variable" href="#ClientCredentialsStrategy.token_type">token_type</a>
                        </li>
                        <li>
                                <a class="function" href="#ClientCredentialsStrategy.acquire">acquire</a>
                        </li>
                        <li>
                                <a class="function" href="#ClientCredentialsStrategy.invalidate">invalidate</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#RESTApp">RESTApp</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#RESTApp.__init__">RESTApp</a>
                        </li>
                        <li>
                                <a class="variable" href="#RESTApp.executor">executor</a>
                        </li>
                        <li>
                                <a class="variable" href="#RESTApp.http_settings">http_settings</a>
                        </li>
                        <li>
                                <a class="variable" href="#RESTApp.proxy_settings">proxy_settings</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTApp.acquire">acquire</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#RESTClientImpl">RESTClientImpl</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#RESTClientImpl.__init__">RESTClientImpl</a>
                        </li>
                        <li>
                                <a class="variable" href="#RESTClientImpl.is_alive">is_alive</a>
                        </li>
                        <li>
                                <a class="variable" href="#RESTClientImpl.http_settings">http_settings</a>
                        </li>
                        <li>
                                <a class="variable" href="#RESTClientImpl.proxy_settings">proxy_settings</a>
                        </li>
                        <li>
                                <a class="variable" href="#RESTClientImpl.entity_factory">entity_factory</a>
                        </li>
                        <li>
                                <a class="variable" href="#RESTClientImpl.token_type">token_type</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.close">close</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.start">start</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_channel">fetch_channel</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.edit_channel">edit_channel</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.follow_channel">follow_channel</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.delete_channel">delete_channel</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.edit_my_voice_state">edit_my_voice_state</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.edit_voice_state">edit_voice_state</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.edit_permission_overwrites">edit_permission_overwrites</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.delete_permission_overwrite">delete_permission_overwrite</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_channel_invites">fetch_channel_invites</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.create_invite">create_invite</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.trigger_typing">trigger_typing</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_pins">fetch_pins</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.pin_message">pin_message</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.unpin_message">unpin_message</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_messages">fetch_messages</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_message">fetch_message</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.create_message">create_message</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.crosspost_message">crosspost_message</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.edit_message">edit_message</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.delete_message">delete_message</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.delete_messages">delete_messages</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.add_reaction">add_reaction</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.delete_my_reaction">delete_my_reaction</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.delete_all_reactions_for_emoji">delete_all_reactions_for_emoji</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.delete_reaction">delete_reaction</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.delete_all_reactions">delete_all_reactions</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_reactions_for_emoji">fetch_reactions_for_emoji</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.create_webhook">create_webhook</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_webhook">fetch_webhook</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_channel_webhooks">fetch_channel_webhooks</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_guild_webhooks">fetch_guild_webhooks</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.edit_webhook">edit_webhook</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.delete_webhook">delete_webhook</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.execute_webhook">execute_webhook</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_webhook_message">fetch_webhook_message</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.edit_webhook_message">edit_webhook_message</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.delete_webhook_message">delete_webhook_message</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_gateway_url">fetch_gateway_url</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_gateway_bot_info">fetch_gateway_bot_info</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_invite">fetch_invite</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.delete_invite">delete_invite</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_my_user">fetch_my_user</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.edit_my_user">edit_my_user</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_my_connections">fetch_my_connections</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_my_guilds">fetch_my_guilds</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.leave_guild">leave_guild</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.create_dm_channel">create_dm_channel</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_application">fetch_application</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_authorization">fetch_authorization</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.authorize_client_credentials_token">authorize_client_credentials_token</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.authorize_access_token">authorize_access_token</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.refresh_access_token">refresh_access_token</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.revoke_access_token">revoke_access_token</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.add_user_to_guild">add_user_to_guild</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_voice_regions">fetch_voice_regions</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_user">fetch_user</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_audit_log">fetch_audit_log</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_emoji">fetch_emoji</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_guild_emojis">fetch_guild_emojis</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.create_emoji">create_emoji</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.edit_emoji">edit_emoji</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.delete_emoji">delete_emoji</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_available_sticker_packs">fetch_available_sticker_packs</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_sticker">fetch_sticker</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_guild_stickers">fetch_guild_stickers</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_guild_sticker">fetch_guild_sticker</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.create_sticker">create_sticker</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.edit_sticker">edit_sticker</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.delete_sticker">delete_sticker</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.guild_builder">guild_builder</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_guild">fetch_guild</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_guild_preview">fetch_guild_preview</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.edit_guild">edit_guild</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.delete_guild">delete_guild</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_guild_channels">fetch_guild_channels</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.create_guild_text_channel">create_guild_text_channel</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.create_guild_news_channel">create_guild_news_channel</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.create_guild_voice_channel">create_guild_voice_channel</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.create_guild_stage_channel">create_guild_stage_channel</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.create_guild_category">create_guild_category</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.reposition_channels">reposition_channels</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_member">fetch_member</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_members">fetch_members</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.search_members">search_members</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.edit_member">edit_member</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.edit_my_member">edit_my_member</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.edit_my_nick">edit_my_nick</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.add_role_to_member">add_role_to_member</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.remove_role_from_member">remove_role_from_member</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.kick_user">kick_user</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.kick_member">kick_member</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.ban_user">ban_user</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.ban_member">ban_member</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.unban_user">unban_user</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.unban_member">unban_member</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_ban">fetch_ban</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_bans">fetch_bans</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_roles">fetch_roles</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.create_role">create_role</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.reposition_roles">reposition_roles</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.edit_role">edit_role</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.delete_role">delete_role</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.estimate_guild_prune_count">estimate_guild_prune_count</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.begin_guild_prune">begin_guild_prune</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_guild_voice_regions">fetch_guild_voice_regions</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_guild_invites">fetch_guild_invites</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_integrations">fetch_integrations</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_widget">fetch_widget</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.edit_widget">edit_widget</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_welcome_screen">fetch_welcome_screen</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.edit_welcome_screen">edit_welcome_screen</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_vanity_url">fetch_vanity_url</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_template">fetch_template</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_guild_templates">fetch_guild_templates</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.sync_guild_template">sync_guild_template</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.create_guild_from_template">create_guild_from_template</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.create_template">create_template</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.edit_template">edit_template</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.delete_template">delete_template</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.command_builder">command_builder</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_application_command">fetch_application_command</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_application_commands">fetch_application_commands</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.create_application_command">create_application_command</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.set_application_commands">set_application_commands</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.edit_application_command">edit_application_command</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.delete_application_command">delete_application_command</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_application_guild_commands_permissions">fetch_application_guild_commands_permissions</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_application_command_permissions">fetch_application_command_permissions</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.set_application_guild_commands_permissions">set_application_guild_commands_permissions</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.set_application_command_permissions">set_application_command_permissions</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.interaction_deferred_builder">interaction_deferred_builder</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.interaction_message_builder">interaction_message_builder</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.fetch_interaction_response">fetch_interaction_response</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.create_interaction_response">create_interaction_response</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.edit_interaction_response">edit_interaction_response</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.delete_interaction_response">delete_interaction_response</a>
                        </li>
                        <li>
                                <a class="function" href="#RESTClientImpl.build_action_row">build_action_row</a>
                        </li>
                </ul>

            </li>
    </ul>


            <a class="attribution" href="https://pdoc.dev">built with pdoc v8.0.1</a>
        </div>

        <div class="sidebar-toggle" id="sidebar-toggle"></div>
    </nav>

    <main class="pdoc">
        
        <section>
                <h1 class="modulename">
<a href="./../../index.html">hikari</a><wbr>.<a href="./../impl.html">impl</a><wbr>.rest    </h1>

                    <div class="docstring"><p>Implementation of a V8 compatible REST API for Discord.</p>

<p>This also includes implementations designed towards providing
RESTful functionality.</p>
</div>

                    <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="c1"># cython: language_level=3</span>
<span class="c1"># Copyright (c) 2020 Nekokatt</span>
<span class="c1"># Copyright (c) 2021 davfsa</span>
<span class="c1">#</span>
<span class="c1"># Permission is hereby granted, free of charge, to any person obtaining a copy</span>
<span class="c1"># of this software and associated documentation files (the &quot;Software&quot;), to deal</span>
<span class="c1"># in the Software without restriction, including without limitation the rights</span>
<span class="c1"># to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span>
<span class="c1"># copies of the Software, and to permit persons to whom the Software is</span>
<span class="c1"># furnished to do so, subject to the following conditions:</span>
<span class="c1">#</span>
<span class="c1"># The above copyright notice and this permission notice shall be included in all</span>
<span class="c1"># copies or substantial portions of the Software.</span>
<span class="c1">#</span>
<span class="c1"># THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span>
<span class="c1"># IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span>
<span class="c1"># FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span>
<span class="c1"># AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span>
<span class="c1"># LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span>
<span class="c1"># OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE</span>
<span class="c1"># SOFTWARE.</span>
<span class="sd">&quot;&quot;&quot;Implementation of a V8 compatible REST API for Discord.</span>

<span class="sd">This also includes implementations designed towards providing</span>
<span class="sd">RESTful functionality.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">annotations</span>

<span class="n">__all__</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;ClientCredentialsStrategy&quot;</span><span class="p">,</span> <span class="s2">&quot;RESTApp&quot;</span><span class="p">,</span> <span class="s2">&quot;RESTClientImpl&quot;</span><span class="p">]</span>

<span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">base64</span>
<span class="kn">import</span> <span class="nn">contextlib</span>
<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">http</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">platform</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">typing</span>

<span class="kn">import</span> <span class="nn">aiohttp</span>
<span class="kn">import</span> <span class="nn">attr</span>

<span class="kn">from</span> <span class="nn">hikari</span> <span class="kn">import</span> <span class="n">_about</span> <span class="k">as</span> <span class="n">about</span>
<span class="kn">from</span> <span class="nn">hikari</span> <span class="kn">import</span> <span class="n">applications</span>
<span class="kn">from</span> <span class="nn">hikari</span> <span class="kn">import</span> <span class="n">channels</span> <span class="k">as</span> <span class="n">channels_</span>
<span class="kn">from</span> <span class="nn">hikari</span> <span class="kn">import</span> <span class="n">colors</span>
<span class="kn">from</span> <span class="nn">hikari</span> <span class="kn">import</span> <span class="n">config</span>
<span class="kn">from</span> <span class="nn">hikari</span> <span class="kn">import</span> <span class="n">embeds</span> <span class="k">as</span> <span class="n">embeds_</span>
<span class="kn">from</span> <span class="nn">hikari</span> <span class="kn">import</span> <span class="n">emojis</span>
<span class="kn">from</span> <span class="nn">hikari</span> <span class="kn">import</span> <span class="n">errors</span>
<span class="kn">from</span> <span class="nn">hikari</span> <span class="kn">import</span> <span class="n">files</span>
<span class="kn">from</span> <span class="nn">hikari</span> <span class="kn">import</span> <span class="n">guilds</span>
<span class="kn">from</span> <span class="nn">hikari</span> <span class="kn">import</span> <span class="n">iterators</span>
<span class="kn">from</span> <span class="nn">hikari</span> <span class="kn">import</span> <span class="n">permissions</span> <span class="k">as</span> <span class="n">permissions_</span>
<span class="kn">from</span> <span class="nn">hikari</span> <span class="kn">import</span> <span class="n">snowflakes</span>
<span class="kn">from</span> <span class="nn">hikari</span> <span class="kn">import</span> <span class="n">traits</span>
<span class="kn">from</span> <span class="nn">hikari</span> <span class="kn">import</span> <span class="n">undefined</span>
<span class="kn">from</span> <span class="nn">hikari</span> <span class="kn">import</span> <span class="n">urls</span>
<span class="kn">from</span> <span class="nn">hikari</span> <span class="kn">import</span> <span class="n">users</span>
<span class="kn">from</span> <span class="nn">hikari.api</span> <span class="kn">import</span> <span class="n">rest</span> <span class="k">as</span> <span class="n">rest_api</span>
<span class="kn">from</span> <span class="nn">hikari.impl</span> <span class="kn">import</span> <span class="n">buckets</span> <span class="k">as</span> <span class="n">buckets_</span>
<span class="kn">from</span> <span class="nn">hikari.impl</span> <span class="kn">import</span> <span class="n">entity_factory</span> <span class="k">as</span> <span class="n">entity_factory_impl</span>
<span class="kn">from</span> <span class="nn">hikari.impl</span> <span class="kn">import</span> <span class="n">rate_limits</span>
<span class="kn">from</span> <span class="nn">hikari.impl</span> <span class="kn">import</span> <span class="n">special_endpoints</span> <span class="k">as</span> <span class="n">special_endpoints_impl</span>
<span class="kn">from</span> <span class="nn">hikari.internal</span> <span class="kn">import</span> <span class="n">data_binding</span>
<span class="kn">from</span> <span class="nn">hikari.internal</span> <span class="kn">import</span> <span class="n">deprecation</span>
<span class="kn">from</span> <span class="nn">hikari.internal</span> <span class="kn">import</span> <span class="n">mentions</span>
<span class="kn">from</span> <span class="nn">hikari.internal</span> <span class="kn">import</span> <span class="n">net</span>
<span class="kn">from</span> <span class="nn">hikari.internal</span> <span class="kn">import</span> <span class="n">routes</span>
<span class="kn">from</span> <span class="nn">hikari.internal</span> <span class="kn">import</span> <span class="n">time</span>
<span class="kn">from</span> <span class="nn">hikari.internal</span> <span class="kn">import</span> <span class="n">ux</span>

<span class="k">if</span> <span class="n">typing</span><span class="o">.</span><span class="n">TYPE_CHECKING</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">concurrent.futures</span>
    <span class="kn">import</span> <span class="nn">types</span>

    <span class="kn">from</span> <span class="nn">hikari</span> <span class="kn">import</span> <span class="n">audit_logs</span>
    <span class="kn">from</span> <span class="nn">hikari</span> <span class="kn">import</span> <span class="n">commands</span>
    <span class="kn">from</span> <span class="nn">hikari</span> <span class="kn">import</span> <span class="n">invites</span>
    <span class="kn">from</span> <span class="nn">hikari</span> <span class="kn">import</span> <span class="n">messages</span> <span class="k">as</span> <span class="n">messages_</span>
    <span class="kn">from</span> <span class="nn">hikari</span> <span class="kn">import</span> <span class="n">sessions</span>
    <span class="kn">from</span> <span class="nn">hikari</span> <span class="kn">import</span> <span class="n">stickers</span>
    <span class="kn">from</span> <span class="nn">hikari</span> <span class="kn">import</span> <span class="n">templates</span>
    <span class="kn">from</span> <span class="nn">hikari</span> <span class="kn">import</span> <span class="n">voices</span>
    <span class="kn">from</span> <span class="nn">hikari</span> <span class="kn">import</span> <span class="n">webhooks</span>
    <span class="kn">from</span> <span class="nn">hikari.api</span> <span class="kn">import</span> <span class="n">cache</span> <span class="k">as</span> <span class="n">cache_api</span>
    <span class="kn">from</span> <span class="nn">hikari.api</span> <span class="kn">import</span> <span class="n">entity_factory</span> <span class="k">as</span> <span class="n">entity_factory_</span>
    <span class="kn">from</span> <span class="nn">hikari.api</span> <span class="kn">import</span> <span class="n">special_endpoints</span>
    <span class="kn">from</span> <span class="nn">hikari.interactions</span> <span class="kn">import</span> <span class="n">base_interactions</span>

<span class="n">_LOGGER</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Final</span><span class="p">[</span><span class="n">logging</span><span class="o">.</span><span class="n">Logger</span><span class="p">]</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;hikari.rest&quot;</span><span class="p">)</span>

<span class="n">_APPLICATION_JSON</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Final</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;application/json&quot;</span>
<span class="n">_AUTHORIZATION_HEADER</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Final</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">intern</span><span class="p">(</span><span class="s2">&quot;Authorization&quot;</span><span class="p">)</span>
<span class="n">_HTTP_USER_AGENT</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Final</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
    <span class="sa">f</span><span class="s2">&quot;DiscordBot (</span><span class="si">{</span><span class="n">about</span><span class="o">.</span><span class="n">__url__</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">about</span><span class="o">.</span><span class="n">__version__</span><span class="si">}</span><span class="s2">) </span><span class="si">{</span><span class="n">about</span><span class="o">.</span><span class="n">__author__</span><span class="si">}</span><span class="s2"> &quot;</span>
    <span class="sa">f</span><span class="s2">&quot;AIOHTTP/</span><span class="si">{</span><span class="n">aiohttp</span><span class="o">.</span><span class="n">__version__</span><span class="si">}</span><span class="s2"> &quot;</span>
    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">platform</span><span class="o">.</span><span class="n">python_implementation</span><span class="p">()</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">platform</span><span class="o">.</span><span class="n">python_version</span><span class="p">()</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">platform</span><span class="o">.</span><span class="n">system</span><span class="p">()</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">platform</span><span class="o">.</span><span class="n">architecture</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="p">)</span>
<span class="n">_USER_AGENT_HEADER</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Final</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">intern</span><span class="p">(</span><span class="s2">&quot;User-Agent&quot;</span><span class="p">)</span>
<span class="n">_X_AUDIT_LOG_REASON_HEADER</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Final</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">intern</span><span class="p">(</span><span class="s2">&quot;X-Audit-Log-Reason&quot;</span><span class="p">)</span>
<span class="n">_X_RATELIMIT_BUCKET_HEADER</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Final</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">intern</span><span class="p">(</span><span class="s2">&quot;X-RateLimit-Bucket&quot;</span><span class="p">)</span>
<span class="n">_X_RATELIMIT_LIMIT_HEADER</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Final</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">intern</span><span class="p">(</span><span class="s2">&quot;X-RateLimit-Limit&quot;</span><span class="p">)</span>
<span class="n">_X_RATELIMIT_REMAINING_HEADER</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Final</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">intern</span><span class="p">(</span><span class="s2">&quot;X-RateLimit-Remaining&quot;</span><span class="p">)</span>
<span class="n">_X_RATELIMIT_RESET_AFTER_HEADER</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Final</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">intern</span><span class="p">(</span><span class="s2">&quot;X-RateLimit-Reset-After&quot;</span><span class="p">)</span>
<span class="n">_RETRY_ERROR_CODES</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Final</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Set</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">500</span><span class="p">,</span> <span class="mi">502</span><span class="p">,</span> <span class="mi">503</span><span class="p">,</span> <span class="mi">504</span><span class="p">}</span>
<span class="n">_MAX_BACKOFF_DURATION</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Final</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">16</span>


<span class="k">class</span> <span class="nc">ClientCredentialsStrategy</span><span class="p">(</span><span class="n">rest_api</span><span class="o">.</span><span class="n">TokenStrategy</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Strategy class for handling client credential OAuth2 authorization.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    client: typing.Optional[snowflakes.SnowflakeishOr[guilds.PartialApplication]]</span>
<span class="sd">        Object or ID of the application this client credentials strategy should</span>
<span class="sd">        authorize as.</span>
<span class="sd">    client_secret : typing.Optional[str]</span>
<span class="sd">        Client secret to use when authorizing.</span>

<span class="sd">    Other Parameters</span>
<span class="sd">    ----------------</span>
<span class="sd">    scopes : typing.Sequence[str]</span>
<span class="sd">        The scopes to authorize for.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="vm">__slots__</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;_client_id&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_client_secret&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_exception&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_expire_at&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_lock&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_scopes&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_token&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">client</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">client_secret</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">scopes</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">applications</span><span class="o">.</span><span class="n">OAuth2Scope</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">applications</span><span class="o">.</span><span class="n">OAuth2Scope</span><span class="o">.</span><span class="n">APPLICATIONS_COMMANDS_UPDATE</span><span class="p">,</span>
            <span class="n">applications</span><span class="o">.</span><span class="n">OAuth2Scope</span><span class="o">.</span><span class="n">IDENTIFY</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client_id</span> <span class="o">=</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client_secret</span> <span class="o">=</span> <span class="n">client_secret</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_exception</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">ClientHTTPResponseError</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_expire_at</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_scopes</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">scopes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">client_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;ID of the application this token strategy authenticates with.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client_id</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_is_expired</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">time</span><span class="o">.</span><span class="n">monotonic</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_expire_at</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">scopes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">applications</span><span class="o">.</span><span class="n">OAuth2Scope</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot;Sequence of scopes this token strategy authenticates for.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scopes</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">token_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">applications</span><span class="o">.</span><span class="n">TokenType</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">applications</span><span class="o">.</span><span class="n">TokenType</span><span class="o">.</span><span class="n">BEARER</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">acquire</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="p">:</span> <span class="n">rest_api</span><span class="o">.</span><span class="n">RESTClient</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_expired</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span>

        <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_expired</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_exception</span><span class="p">:</span>
                <span class="c1"># If we don&#39;t copy the exception then python keeps adding onto the stack each time it&#39;s raised.</span>
                <span class="k">raise</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_exception</span><span class="p">)</span> <span class="kn">from</span> <span class="bp">None</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authorize_client_credentials_token</span><span class="p">(</span>
                    <span class="n">client</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_client_id</span><span class="p">,</span> <span class="n">client_secret</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_client_secret</span><span class="p">,</span> <span class="n">scopes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_scopes</span>
                <span class="p">)</span>

            <span class="k">except</span> <span class="n">errors</span><span class="o">.</span><span class="n">ClientHTTPResponseError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="n">errors</span><span class="o">.</span><span class="n">RateLimitedError</span><span class="p">):</span>
                    <span class="c1"># If we don&#39;t copy the exception then python keeps adding onto the stack each time it&#39;s raised.</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_exception</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">exc</span><span class="p">)</span>

                <span class="k">raise</span>

            <span class="c1"># Expires in is lowered a bit in-order to lower the chance of a dead token being used.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_expire_at</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">monotonic</span><span class="p">()</span> <span class="o">+</span> <span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">expires_in</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">*</span> <span class="mf">0.99</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">token_type</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">access_token</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span>

    <span class="k">def</span> <span class="nf">invalidate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">token</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">token</span> <span class="ow">or</span> <span class="n">token</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_expire_at</span> <span class="o">=</span> <span class="mf">0.0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="o">=</span> <span class="kc">None</span>


<span class="k">class</span> <span class="nc">_RESTProvider</span><span class="p">(</span><span class="n">traits</span><span class="o">.</span><span class="n">RESTAware</span><span class="p">):</span>
    <span class="vm">__slots__</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;_entity_factory&quot;</span><span class="p">,</span> <span class="s2">&quot;_executor&quot;</span><span class="p">,</span> <span class="s2">&quot;_rest&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">entity_factory</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Callable</span><span class="p">[[],</span> <span class="n">entity_factory_</span><span class="o">.</span><span class="n">EntityFactory</span><span class="p">],</span>
        <span class="n">executor</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">concurrent</span><span class="o">.</span><span class="n">futures</span><span class="o">.</span><span class="n">Executor</span><span class="p">],</span>
        <span class="n">rest</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Callable</span><span class="p">[[],</span> <span class="n">rest_api</span><span class="o">.</span><span class="n">RESTClient</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span> <span class="o">=</span> <span class="n">entity_factory</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_executor</span> <span class="o">=</span> <span class="n">executor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rest</span> <span class="o">=</span> <span class="n">rest</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">entity_factory</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">entity_factory_</span><span class="o">.</span><span class="n">EntityFactory</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">executor</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">concurrent</span><span class="o">.</span><span class="n">futures</span><span class="o">.</span><span class="n">Executor</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_executor</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">rest</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">rest_api</span><span class="o">.</span><span class="n">RESTClient</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rest</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">http_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">config</span><span class="o">.</span><span class="n">HTTPSettings</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rest</span><span class="p">()</span><span class="o">.</span><span class="n">http_settings</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">proxy_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">config</span><span class="o">.</span><span class="n">ProxySettings</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rest</span><span class="p">()</span><span class="o">.</span><span class="n">proxy_settings</span>


<span class="n">_NONE_OR_UNDEFINED</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Final</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedType</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">RESTApp</span><span class="p">(</span><span class="n">traits</span><span class="o">.</span><span class="n">ExecutorAware</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The base for a HTTP-only Discord application.</span>

<span class="sd">    This comprises of a shared TCP connector connection pool, and can have</span>
<span class="sd">    `RESTClientImpl` instances for specific credentials acquired</span>
<span class="sd">    from it.</span>

<span class="sd">    .. note::</span>
<span class="sd">        This event loop will be bound to a connector when the first call</span>
<span class="sd">        to `acquire` is made.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    executor : typing.Optional[concurrent.futures.Executor]</span>
<span class="sd">        The executor to use for blocking file IO operations. If `None`</span>
<span class="sd">        is passed, then the default `concurrent.futures.ThreadPoolExecutor` for</span>
<span class="sd">        the `asyncio.AbstractEventLoop` will be used instead.</span>
<span class="sd">    http_settings : typing.Optional[hikari.config.HTTPSettings]</span>
<span class="sd">        HTTP settings to use. Sane defaults are used if this is</span>
<span class="sd">        `None`.</span>
<span class="sd">    max_rate_limit : float</span>
<span class="sd">        Maximum number of seconds to sleep for when rate limited. If a rate</span>
<span class="sd">        limit occurs that is longer than this value, then a</span>
<span class="sd">        `hikari.errors.RateLimitedError` will be raised instead of waiting.</span>

<span class="sd">        This is provided since some endpoints may respond with non-sensible</span>
<span class="sd">        rate limits.</span>

<span class="sd">        Defaults to five minutes if unspecified.</span>
<span class="sd">    max_retries : typing.Optional[int]</span>
<span class="sd">        Maximum number of times a request will be retried if</span>
<span class="sd">        it fails with a `5xx` status. Defaults to 3 if set to `None`.</span>
<span class="sd">    proxy_settings : typing.Optional[hikari.config.ProxySettings]</span>
<span class="sd">        Proxy settings to use. If `None` then no proxy configuration</span>
<span class="sd">        will be used.</span>
<span class="sd">    url : typing.Optional[str]</span>
<span class="sd">        The base URL for the API. You can generally leave this as being</span>
<span class="sd">        `None` and the correct default API base URL will be generated.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="vm">__slots__</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;_executor&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_http_settings&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_max_rate_limit&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_max_retries&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_proxy_settings&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_url&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">executor</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">concurrent</span><span class="o">.</span><span class="n">futures</span><span class="o">.</span><span class="n">Executor</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">http_settings</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">config</span><span class="o">.</span><span class="n">HTTPSettings</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">max_rate_limit</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">300</span><span class="p">,</span>
        <span class="n">max_retries</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
        <span class="n">proxy_settings</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">config</span><span class="o">.</span><span class="n">ProxySettings</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">url</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_http_settings</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">HTTPSettings</span><span class="p">()</span> <span class="k">if</span> <span class="n">http_settings</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">http_settings</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_proxy_settings</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">ProxySettings</span><span class="p">()</span> <span class="k">if</span> <span class="n">proxy_settings</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">proxy_settings</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_executor</span> <span class="o">=</span> <span class="n">executor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_max_rate_limit</span> <span class="o">=</span> <span class="n">max_rate_limit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_max_retries</span> <span class="o">=</span> <span class="n">max_retries</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">=</span> <span class="n">url</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">executor</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">concurrent</span><span class="o">.</span><span class="n">futures</span><span class="o">.</span><span class="n">Executor</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_executor</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">http_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">config</span><span class="o">.</span><span class="n">HTTPSettings</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_http_settings</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">proxy_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">config</span><span class="o">.</span><span class="n">ProxySettings</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_proxy_settings</span>

    <span class="nd">@typing</span><span class="o">.</span><span class="n">overload</span>
    <span class="k">def</span> <span class="nf">acquire</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">token</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">rest_api</span><span class="o">.</span><span class="n">TokenStrategy</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RESTClientImpl</span><span class="p">:</span>
        <span class="o">...</span>

    <span class="nd">@typing</span><span class="o">.</span><span class="n">overload</span>
    <span class="k">def</span> <span class="nf">acquire</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">token</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">token_type</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">applications</span><span class="o">.</span><span class="n">TokenType</span><span class="p">]</span> <span class="o">=</span> <span class="n">applications</span><span class="o">.</span><span class="n">TokenType</span><span class="o">.</span><span class="n">BEARER</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RESTClientImpl</span><span class="p">:</span>
        <span class="o">...</span>

    <span class="k">def</span> <span class="nf">acquire</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">token</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">rest_api</span><span class="o">.</span><span class="n">TokenStrategy</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">token_type</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">applications</span><span class="o">.</span><span class="n">TokenType</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RESTClientImpl</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Acquire an instance of this REST client.</span>

<span class="sd">        .. note::</span>
<span class="sd">            The returned REST client should be started before it can be used,</span>
<span class="sd">            either by calling `RESTClientImpl.start` or by using it as an</span>
<span class="sd">            asynchronous context manager.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        ```py</span>
<span class="sd">        rest_app = RESTApp()</span>

<span class="sd">        # Using the returned client as a context manager to implicitly start</span>
<span class="sd">        # and stop it.</span>
<span class="sd">        async with rest_app.acquire(&quot;A token&quot;, &quot;Bot&quot;) as client:</span>
<span class="sd">            user = await client.fetch_my_user()</span>
<span class="sd">        ```</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        token : typing.Union[str, None, hikari.api.rest.TokenStrategy]</span>
<span class="sd">            The bot or bearer token. If no token is to be used,</span>
<span class="sd">            this can be undefined.</span>
<span class="sd">        token_type : typing.Union[str, hikari.applications.TokenType, None]</span>
<span class="sd">            The type of token in use. This should only be passed when `str`</span>
<span class="sd">            is passed for `token`, can be `&quot;Bot&quot;` or `&quot;Bearer&quot;` and will be</span>
<span class="sd">            defaulted to `&quot;Bearer&quot;` in this situation.</span>

<span class="sd">            This should be left as `None` when either</span>
<span class="sd">            `hikari.api.rest.TokenStrategy` or `None` is passed for</span>
<span class="sd">            `token`.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        RESTClientImpl</span>
<span class="sd">            An instance of the REST client.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        ValueError</span>
<span class="sd">            If `token_type` is provided when a token strategy is passed for `token`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Since we essentially mimic a fake App instance, we need to make a circular provider.</span>
        <span class="c1"># We can achieve this using a lambda. This allows the entity factory to build models that</span>
        <span class="c1"># are also REST-aware</span>
        <span class="n">provider</span> <span class="o">=</span> <span class="n">_RESTProvider</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">entity_factory</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">rest_client</span><span class="p">)</span>
        <span class="n">entity_factory</span> <span class="o">=</span> <span class="n">entity_factory_impl</span><span class="o">.</span><span class="n">EntityFactoryImpl</span><span class="p">(</span><span class="n">provider</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">token_type</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">token_type</span> <span class="o">=</span> <span class="n">applications</span><span class="o">.</span><span class="n">TokenType</span><span class="o">.</span><span class="n">BEARER</span>

        <span class="n">rest_client</span> <span class="o">=</span> <span class="n">RESTClientImpl</span><span class="p">(</span>
            <span class="n">cache</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">entity_factory</span><span class="o">=</span><span class="n">entity_factory</span><span class="p">,</span>
            <span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">,</span>
            <span class="n">http_settings</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_http_settings</span><span class="p">,</span>
            <span class="n">max_rate_limit</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_max_rate_limit</span><span class="p">,</span>
            <span class="n">max_retries</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_max_retries</span><span class="p">,</span>
            <span class="n">proxy_settings</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_settings</span><span class="p">,</span>
            <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">,</span>
            <span class="n">token_type</span><span class="o">=</span><span class="n">token_type</span><span class="p">,</span>
            <span class="n">rest_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_url</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">rest_client</span>


<span class="nd">@attr</span><span class="o">.</span><span class="n">define</span><span class="p">()</span>
<span class="k">class</span> <span class="nc">_LiveAttributes</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Fields which are only present within `RESTClientImpl` while it&#39;s &quot;alive&quot;.</span>

<span class="sd">    .. note::</span>
<span class="sd">        This must be started within an active asyncio event loop.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">buckets</span><span class="p">:</span> <span class="n">buckets_</span><span class="o">.</span><span class="n">RESTBucketManager</span> <span class="o">=</span> <span class="n">attr</span><span class="o">.</span><span class="n">field</span><span class="p">()</span>
    <span class="n">client_session</span><span class="p">:</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientSession</span> <span class="o">=</span> <span class="n">attr</span><span class="o">.</span><span class="n">field</span><span class="p">()</span>
    <span class="n">closed_event</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Event</span> <span class="o">=</span> <span class="n">attr</span><span class="o">.</span><span class="n">field</span><span class="p">()</span>
    <span class="c1"># We&#39;ve been told in DAPI that this is per token.</span>
    <span class="n">global_rate_limit</span><span class="p">:</span> <span class="n">rate_limits</span><span class="o">.</span><span class="n">ManualRateLimiter</span> <span class="o">=</span> <span class="n">attr</span><span class="o">.</span><span class="n">field</span><span class="p">()</span>
    <span class="n">tcp_connector</span><span class="p">:</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">TCPConnector</span> <span class="o">=</span> <span class="n">attr</span><span class="o">.</span><span class="n">field</span><span class="p">()</span>
    <span class="n">is_closing</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">attr</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">max_rate_limit</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">http_settings</span><span class="p">:</span> <span class="n">config</span><span class="o">.</span><span class="n">HTTPSettings</span><span class="p">,</span> <span class="n">proxy_settings</span><span class="p">:</span> <span class="n">config</span><span class="o">.</span><span class="n">ProxySettings</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">_LiveAttributes</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Build a live attributes object.</span>

<span class="sd">        .. warning::</span>
<span class="sd">            This can only be called when the current thread has an active</span>
<span class="sd">            asyncio loop.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># This asserts that this is called within an active event loop.</span>
        <span class="n">asyncio</span><span class="o">.</span><span class="n">get_running_loop</span><span class="p">()</span>
        <span class="n">tcp_connector</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">create_tcp_connector</span><span class="p">(</span><span class="n">http_settings</span><span class="p">)</span>
        <span class="n">_LOGGER</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">ux</span><span class="o">.</span><span class="n">TRACE</span><span class="p">,</span> <span class="s2">&quot;acquired new tcp connector&quot;</span><span class="p">)</span>
        <span class="n">client_session</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">create_client_session</span><span class="p">(</span>
            <span class="n">connector</span><span class="o">=</span><span class="n">tcp_connector</span><span class="p">,</span>
            <span class="c1"># No, this is correct. We manage closing the connector ourselves in this class.</span>
            <span class="c1"># This works around some other lifespan issues.</span>
            <span class="n">connector_owner</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">http_settings</span><span class="o">=</span><span class="n">http_settings</span><span class="p">,</span>
            <span class="n">raise_for_status</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">trust_env</span><span class="o">=</span><span class="n">proxy_settings</span><span class="o">.</span><span class="n">trust_env</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">_LOGGER</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">ux</span><span class="o">.</span><span class="n">TRACE</span><span class="p">,</span> <span class="s2">&quot;acquired new aiohttp client session&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">_LiveAttributes</span><span class="p">(</span>
            <span class="n">buckets</span><span class="o">=</span><span class="n">buckets_</span><span class="o">.</span><span class="n">RESTBucketManager</span><span class="p">(</span><span class="n">max_rate_limit</span><span class="p">),</span>
            <span class="n">client_session</span><span class="o">=</span><span class="n">client_session</span><span class="p">,</span>
            <span class="n">closed_event</span><span class="o">=</span><span class="n">asyncio</span><span class="o">.</span><span class="n">Event</span><span class="p">(),</span>
            <span class="n">global_rate_limit</span><span class="o">=</span><span class="n">rate_limits</span><span class="o">.</span><span class="n">ManualRateLimiter</span><span class="p">(),</span>
            <span class="n">tcp_connector</span><span class="o">=</span><span class="n">tcp_connector</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_closing</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">closed_event</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buckets</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">global_rate_limit</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client_session</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcp_connector</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">still_alive</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">_LiveAttributes</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Chained method used to Check if `close` has been called before using this object&#39;s resources.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_closing</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">errors</span><span class="o">.</span><span class="n">ComponentStateConflictError</span><span class="p">(</span><span class="s2">&quot;The REST client was closed mid-request&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span>


<span class="nd">@attr</span><span class="o">.</span><span class="n">define</span><span class="p">(</span><span class="n">auto_exc</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="nb">repr</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">weakref_slot</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">_RetryRequest</span><span class="p">(</span><span class="ne">RuntimeError</span><span class="p">):</span>
    <span class="o">...</span>


<span class="k">class</span> <span class="nc">RESTClientImpl</span><span class="p">(</span><span class="n">rest_api</span><span class="o">.</span><span class="n">RESTClient</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Implementation of the V8-compatible Discord HTTP API.</span>

<span class="sd">    This manages making HTTP/1.1 requests to the API and using the entity</span>
<span class="sd">    factory within the passed application instance to deserialize JSON responses</span>
<span class="sd">    to Pythonic data classes that are used throughout this library.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    entity_factory : hikari.api.entity_factory.EntityFactory</span>
<span class="sd">        The entity factory to use.</span>
<span class="sd">    executor : typing.Optional[concurrent.futures.Executor]</span>
<span class="sd">        The executor to use for blocking IO. Defaults to the `asyncio` thread</span>
<span class="sd">        pool if set to `None`.</span>
<span class="sd">    max_rate_limit : float</span>
<span class="sd">        Maximum number of seconds to sleep for when rate limited. If a rate</span>
<span class="sd">        limit occurs that is longer than this value, then a</span>
<span class="sd">        `hikari.errors.RateLimitedError` will be raised instead of waiting.</span>

<span class="sd">        This is provided since some endpoints may respond with non-sensible</span>
<span class="sd">        rate limits.</span>
<span class="sd">    max_retries : typing.Optional[int]</span>
<span class="sd">        Maximum number of times a request will be retried if</span>
<span class="sd">        it fails with a `5xx` status. Defaults to 3 if set to `None`.</span>
<span class="sd">    token : typing.Union[str, None, hikari.api.rest.TokenStrategy]</span>
<span class="sd">        The bot or bearer token. If no token is to be used,</span>
<span class="sd">        this can be undefined.</span>
<span class="sd">    token_type : typing.Union[str, hikari.applications.TokenType, None]</span>
<span class="sd">        The type of token in use. This must be passed when a `str` is</span>
<span class="sd">        passed for `token` but and can be `&quot;Bot&quot;` or `&quot;Bearer&quot;`.</span>

<span class="sd">        This should be left as `None` when either</span>
<span class="sd">        `hikari.api.rest.TokenStrategy` or `None` is passed for</span>
<span class="sd">        `token`.</span>
<span class="sd">    rest_url : str</span>
<span class="sd">        The HTTP API base URL. This can contain format-string specifiers to</span>
<span class="sd">        interpolate information such as API version in use.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ValueError</span>
<span class="sd">        * If `token_type` is provided when a token strategy is passed for `token`.</span>
<span class="sd">        * if `token_type` is left as `None` when a string is passed for `token`.</span>
<span class="sd">        * If the a value more than 5 is provided for `max_retries`</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="vm">__slots__</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;_cache&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_entity_factory&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_executor&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_http_settings&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_live_attributes&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_max_rate_limit&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_max_retries&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_proxy_settings&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_rest_url&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_token&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_token_type&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">cache</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">cache_api</span><span class="o">.</span><span class="n">MutableCache</span><span class="p">],</span>
        <span class="n">entity_factory</span><span class="p">:</span> <span class="n">entity_factory_</span><span class="o">.</span><span class="n">EntityFactory</span><span class="p">,</span>
        <span class="n">executor</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">concurrent</span><span class="o">.</span><span class="n">futures</span><span class="o">.</span><span class="n">Executor</span><span class="p">],</span>
        <span class="n">http_settings</span><span class="p">:</span> <span class="n">config</span><span class="o">.</span><span class="n">HTTPSettings</span><span class="p">,</span>
        <span class="n">max_rate_limit</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">max_retries</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
        <span class="n">proxy_settings</span><span class="p">:</span> <span class="n">config</span><span class="o">.</span><span class="n">ProxySettings</span><span class="p">,</span>
        <span class="n">token</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">rest_api</span><span class="o">.</span><span class="n">TokenStrategy</span><span class="p">],</span>
        <span class="n">token_type</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">applications</span><span class="o">.</span><span class="n">TokenType</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span>
        <span class="n">rest_url</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">max_retries</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;max_retries&#39; must be below or equal to 5&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_cache</span> <span class="o">=</span> <span class="n">cache</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span> <span class="o">=</span> <span class="n">entity_factory</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_executor</span> <span class="o">=</span> <span class="n">executor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_http_settings</span> <span class="o">=</span> <span class="n">http_settings</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_live_attributes</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">_LiveAttributes</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_max_rate_limit</span> <span class="o">=</span> <span class="n">max_rate_limit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_max_retries</span> <span class="o">=</span> <span class="n">max_retries</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_proxy_settings</span> <span class="o">=</span> <span class="n">proxy_settings</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">rest_api</span><span class="o">.</span><span class="n">TokenStrategy</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_token_type</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">token_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Token type required when a str is passed for `token`&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">token_type</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">token</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_token_type</span> <span class="o">=</span> <span class="n">applications</span><span class="o">.</span><span class="n">TokenType</span><span class="p">(</span><span class="n">token_type</span><span class="o">.</span><span class="n">title</span><span class="p">())</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">rest_api</span><span class="o">.</span><span class="n">TokenStrategy</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">token_type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Token type should be handled by the token strategy&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="o">=</span> <span class="n">token</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_token_type</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">token_type</span>

        <span class="c1"># While passing files.URL for rest_url is not officially supported, this is still</span>
        <span class="c1"># casted to string here to avoid confusing issues passing a URL here could lead to.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rest_url</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">rest_url</span><span class="p">)</span> <span class="k">if</span> <span class="n">rest_url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">urls</span><span class="o">.</span><span class="n">REST_API_URL</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_alive</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_live_attributes</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">http_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">config</span><span class="o">.</span><span class="n">HTTPSettings</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_http_settings</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">proxy_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">config</span><span class="o">.</span><span class="n">ProxySettings</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_proxy_settings</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">entity_factory</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">entity_factory_</span><span class="o">.</span><span class="n">EntityFactory</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">token_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">applications</span><span class="o">.</span><span class="n">TokenType</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token_type</span>

    <span class="nd">@typing</span><span class="o">.</span><span class="n">final</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Close the HTTP client and any open HTTP connections.&quot;&quot;&quot;</span>
        <span class="n">live_attributes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_live_attributes</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_live_attributes</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">await</span> <span class="n">live_attributes</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="nd">@typing</span><span class="o">.</span><span class="n">final</span>
    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Start the HTTP client.</span>

<span class="sd">        .. note::</span>
<span class="sd">            This must be called within an active event loop.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        RuntimeError</span>
<span class="sd">            If this is called in an environment without an active event loop.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_live_attributes</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">errors</span><span class="o">.</span><span class="n">ComponentStateConflictError</span><span class="p">(</span><span class="s2">&quot;Cannot start a REST Client which is already alive&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_live_attributes</span> <span class="o">=</span> <span class="n">_LiveAttributes</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_max_rate_limit</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_http_settings</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_proxy_settings</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_live_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">_LiveAttributes</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_live_attributes</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_live_attributes</span>

        <span class="k">raise</span> <span class="n">errors</span><span class="o">.</span><span class="n">ComponentStateConflictError</span><span class="p">(</span><span class="s2">&quot;Cannot use an inactive REST client&quot;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="fm">__aenter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RESTClientImpl</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">async</span> <span class="k">def</span> <span class="fm">__aexit__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">exc_type</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]],</span>
        <span class="n">exc_val</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">],</span>
        <span class="n">exc_tb</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">types</span><span class="o">.</span><span class="n">TracebackType</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="c1"># These are only included at runtime in-order to avoid the model being typed as a synchronous context manager.</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">typing</span><span class="o">.</span><span class="n">TYPE_CHECKING</span><span class="p">:</span>

        <span class="k">def</span> <span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">NoReturn</span><span class="p">:</span>
            <span class="c1"># This is async only.</span>
            <span class="bp">cls</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__module__</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__qualname__</span><span class="si">}</span><span class="s2"> is async-only, did you mean &#39;async with&#39;?&quot;</span><span class="p">)</span> <span class="kn">from</span> <span class="bp">None</span>

        <span class="k">def</span> <span class="fm">__exit__</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">exc_type</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]],</span>
            <span class="n">exc_val</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">],</span>
            <span class="n">exc_tb</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">types</span><span class="o">.</span><span class="n">TracebackType</span><span class="p">],</span>
        <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@typing</span><span class="o">.</span><span class="n">final</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">_request</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">compiled_route</span><span class="p">:</span> <span class="n">routes</span><span class="o">.</span><span class="n">CompiledRoute</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">query</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">data_binding</span><span class="o">.</span><span class="n">StringMapBuilder</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">form_builder</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">data_binding</span><span class="o">.</span><span class="n">URLEncodedFormBuilder</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">json</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">,</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONArray</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">no_auth</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">auth</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObject</span><span class="p">,</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONArray</span><span class="p">]:</span>
        <span class="c1"># Make a ratelimit-protected HTTP request to a JSON endpoint and expect some form</span>
        <span class="c1"># of JSON response.</span>
        <span class="n">live_attributes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_live_attributes</span><span class="p">()</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">StringMapBuilder</span><span class="p">()</span>
        <span class="n">headers</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">_USER_AGENT_HEADER</span><span class="p">,</span> <span class="n">_HTTP_USER_AGENT</span><span class="p">)</span>

        <span class="n">re_authed</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">token</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">auth</span><span class="p">:</span>
            <span class="n">headers</span><span class="p">[</span><span class="n">_AUTHORIZATION_HEADER</span><span class="p">]</span> <span class="o">=</span> <span class="n">auth</span>

        <span class="k">elif</span> <span class="ow">not</span> <span class="n">no_auth</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">headers</span><span class="p">[</span><span class="n">_AUTHORIZATION_HEADER</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span>

            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">token</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="o">.</span><span class="n">acquire</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                <span class="n">headers</span><span class="p">[</span><span class="n">_AUTHORIZATION_HEADER</span><span class="p">]</span> <span class="o">=</span> <span class="n">token</span>

        <span class="n">headers</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">_X_AUDIT_LOG_REASON_HEADER</span><span class="p">,</span> <span class="n">reason</span><span class="p">)</span>

        <span class="n">url</span> <span class="o">=</span> <span class="n">compiled_route</span><span class="o">.</span><span class="n">create_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rest_url</span><span class="p">)</span>

        <span class="c1"># This is initiated the first time we hit a 5xx error to save a little memory when nothing goes wrong</span>
        <span class="n">backoff</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">rate_limits</span><span class="o">.</span><span class="n">ExponentialBackOff</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">retry_count</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="n">stack</span> <span class="o">=</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">AsyncExitStack</span><span class="p">()</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">uuid</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">uuid</span><span class="p">()</span>
                <span class="k">async</span> <span class="k">with</span> <span class="n">stack</span><span class="p">:</span>
                    <span class="n">form</span> <span class="o">=</span> <span class="k">await</span> <span class="n">form_builder</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">stack</span><span class="p">)</span> <span class="k">if</span> <span class="n">form_builder</span> <span class="k">else</span> <span class="kc">None</span>

                    <span class="k">await</span> <span class="n">stack</span><span class="o">.</span><span class="n">enter_async_context</span><span class="p">(</span><span class="n">live_attributes</span><span class="o">.</span><span class="n">still_alive</span><span class="p">()</span><span class="o">.</span><span class="n">buckets</span><span class="o">.</span><span class="n">acquire</span><span class="p">(</span><span class="n">compiled_route</span><span class="p">))</span>
                    <span class="c1"># Buckets not using authentication still have a global</span>
                    <span class="c1"># rate limit, but it is different from the token one.</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">no_auth</span><span class="p">:</span>
                        <span class="k">await</span> <span class="n">live_attributes</span><span class="o">.</span><span class="n">still_alive</span><span class="p">()</span><span class="o">.</span><span class="n">global_rate_limit</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>

                    <span class="k">if</span> <span class="n">_LOGGER</span><span class="o">.</span><span class="n">isEnabledFor</span><span class="p">(</span><span class="n">ux</span><span class="o">.</span><span class="n">TRACE</span><span class="p">):</span>
                        <span class="n">_LOGGER</span><span class="o">.</span><span class="n">log</span><span class="p">(</span>
                            <span class="n">ux</span><span class="o">.</span><span class="n">TRACE</span><span class="p">,</span>
                            <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="se">\n</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
                            <span class="n">uuid</span><span class="p">,</span>
                            <span class="n">compiled_route</span><span class="o">.</span><span class="n">method</span><span class="p">,</span>
                            <span class="n">url</span><span class="p">,</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">_stringify_http_message</span><span class="p">(</span><span class="n">headers</span><span class="p">,</span> <span class="n">json</span><span class="p">),</span>
                        <span class="p">)</span>
                        <span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">monotonic</span><span class="p">()</span>

                    <span class="c1"># Make the request.</span>
                    <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">live_attributes</span><span class="o">.</span><span class="n">still_alive</span><span class="p">()</span><span class="o">.</span><span class="n">client_session</span><span class="o">.</span><span class="n">request</span><span class="p">(</span>
                        <span class="n">compiled_route</span><span class="o">.</span><span class="n">method</span><span class="p">,</span>
                        <span class="n">url</span><span class="p">,</span>
                        <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                        <span class="n">params</span><span class="o">=</span><span class="n">query</span><span class="p">,</span>
                        <span class="n">json</span><span class="o">=</span><span class="n">json</span><span class="p">,</span>
                        <span class="n">data</span><span class="o">=</span><span class="n">form</span><span class="p">,</span>
                        <span class="n">allow_redirects</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_http_settings</span><span class="o">.</span><span class="n">max_redirects</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span>
                        <span class="n">max_redirects</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_http_settings</span><span class="o">.</span><span class="n">max_redirects</span><span class="p">,</span>
                        <span class="n">proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_settings</span><span class="o">.</span><span class="n">url</span><span class="p">,</span>
                        <span class="n">proxy_headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_settings</span><span class="o">.</span><span class="n">all_headers</span><span class="p">,</span>
                    <span class="p">)</span>

                    <span class="k">if</span> <span class="n">_LOGGER</span><span class="o">.</span><span class="n">isEnabledFor</span><span class="p">(</span><span class="n">ux</span><span class="o">.</span><span class="n">TRACE</span><span class="p">):</span>
                        <span class="n">time_taken</span> <span class="o">=</span> <span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">monotonic</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1_000</span>
                        <span class="n">_LOGGER</span><span class="o">.</span><span class="n">log</span><span class="p">(</span>
                            <span class="n">ux</span><span class="o">.</span><span class="n">TRACE</span><span class="p">,</span>
                            <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> in </span><span class="si">%s</span><span class="s2">ms</span><span class="se">\n</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
                            <span class="n">uuid</span><span class="p">,</span>
                            <span class="n">response</span><span class="o">.</span><span class="n">status</span><span class="p">,</span>
                            <span class="n">response</span><span class="o">.</span><span class="n">reason</span><span class="p">,</span>
                            <span class="n">time_taken</span><span class="p">,</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">_stringify_http_message</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">read</span><span class="p">()),</span>
                        <span class="p">)</span>

                    <span class="c1"># Ensure we are not rate limited, and update rate limiting headers where appropriate.</span>
                    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_ratelimits</span><span class="p">(</span><span class="n">compiled_route</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">live_attributes</span><span class="p">)</span>

                <span class="c1"># Don&#39;t bother processing any further if we got NO CONTENT. There&#39;s not anything</span>
                <span class="c1"># to check.</span>
                <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="n">http</span><span class="o">.</span><span class="n">HTTPStatus</span><span class="o">.</span><span class="n">NO_CONTENT</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">None</span>

                <span class="c1"># Handle the response when everything went good</span>
                <span class="k">if</span> <span class="mi">200</span> <span class="o">&lt;=</span> <span class="n">response</span><span class="o">.</span><span class="n">status</span> <span class="o">&lt;</span> <span class="mi">300</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">content_type</span> <span class="o">==</span> <span class="n">_APPLICATION_JSON</span><span class="p">:</span>
                        <span class="c1"># Only deserializing here stops Cloudflare shenanigans messing us around.</span>
                        <span class="k">return</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">load_json</span><span class="p">(</span><span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

                    <span class="n">real_url</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">real_url</span><span class="p">)</span>
                    <span class="k">raise</span> <span class="n">errors</span><span class="o">.</span><span class="n">HTTPError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Expected JSON [</span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">content_type</span><span class="si">=}</span><span class="s2">, </span><span class="si">{</span><span class="n">real_url</span><span class="si">=}</span><span class="s2">]&quot;</span><span class="p">)</span>

                <span class="c1"># Handling 5xx errors</span>
                <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status</span> <span class="ow">in</span> <span class="n">_RETRY_ERROR_CODES</span> <span class="ow">and</span> <span class="n">retry_count</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max_retries</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">backoff</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">backoff</span> <span class="o">=</span> <span class="n">rate_limits</span><span class="o">.</span><span class="n">ExponentialBackOff</span><span class="p">(</span><span class="n">maximum</span><span class="o">=</span><span class="n">_MAX_BACKOFF_DURATION</span><span class="p">)</span>

                    <span class="n">sleep_time</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">backoff</span><span class="p">)</span>
                    <span class="n">_LOGGER</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                        <span class="s2">&quot;Received status </span><span class="si">%s</span><span class="s2"> on request, backing off for </span><span class="si">%.2f</span><span class="s2">s and retrying. Retries remaining: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
                        <span class="n">response</span><span class="o">.</span><span class="n">status</span><span class="p">,</span>
                        <span class="n">sleep_time</span><span class="p">,</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_max_retries</span> <span class="o">-</span> <span class="n">retry_count</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="n">retry_count</span> <span class="o">+=</span> <span class="mi">1</span>

                    <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">sleep_time</span><span class="p">)</span>
                    <span class="k">continue</span>

                <span class="c1"># Attempt to re-auth on UNAUTHORIZED if we are using a TokenStrategy</span>
                <span class="n">can_re_auth</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="mi">401</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span><span class="n">auth</span> <span class="ow">or</span> <span class="n">no_auth</span> <span class="ow">or</span> <span class="n">re_authed</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">can_re_auth</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="p">,</span> <span class="n">rest_api</span><span class="o">.</span><span class="n">TokenStrategy</span><span class="p">):</span>
                    <span class="k">assert</span> <span class="n">token</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="o">.</span><span class="n">invalidate</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
                    <span class="n">token</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="o">.</span><span class="n">acquire</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                    <span class="n">headers</span><span class="p">[</span><span class="n">_AUTHORIZATION_HEADER</span><span class="p">]</span> <span class="o">=</span> <span class="n">token</span>
                    <span class="n">re_authed</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">continue</span>

                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_error_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

            <span class="k">except</span> <span class="n">_RetryRequest</span><span class="p">:</span>
                <span class="k">continue</span>

    <span class="nd">@staticmethod</span>
    <span class="nd">@typing</span><span class="o">.</span><span class="n">final</span>
    <span class="k">def</span> <span class="nf">_stringify_http_message</span><span class="p">(</span><span class="n">headers</span><span class="p">:</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">Headers</span><span class="p">,</span> <span class="n">body</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;    </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="n">name</span> <span class="o">!=</span> <span class="n">_AUTHORIZATION_HEADER</span> <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot;    </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: **REDACTED TOKEN**&quot;</span>
            <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">headers</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">body</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">string</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">    &quot;</span>
            <span class="n">string</span> <span class="o">+=</span> <span class="n">body</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;ascii&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">)</span> <span class="k">else</span> <span class="nb">str</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">string</span>

    <span class="nd">@staticmethod</span>
    <span class="nd">@typing</span><span class="o">.</span><span class="n">final</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">_handle_error_response</span><span class="p">(</span><span class="n">response</span><span class="p">:</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientResponse</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">NoReturn</span><span class="p">:</span>
        <span class="k">raise</span> <span class="k">await</span> <span class="n">net</span><span class="o">.</span><span class="n">generate_error_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="nd">@typing</span><span class="o">.</span><span class="n">final</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">_parse_ratelimits</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">compiled_route</span><span class="p">:</span> <span class="n">routes</span><span class="o">.</span><span class="n">CompiledRoute</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientResponse</span><span class="p">,</span> <span class="n">live_attributes</span><span class="p">:</span> <span class="n">_LiveAttributes</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># Handle rate limiting.</span>
        <span class="n">resp_headers</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">headers</span>
        <span class="n">limit</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">resp_headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">_X_RATELIMIT_LIMIT_HEADER</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">))</span>
        <span class="n">remaining</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">resp_headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">_X_RATELIMIT_REMAINING_HEADER</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">))</span>
        <span class="n">bucket</span> <span class="o">=</span> <span class="n">resp_headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">_X_RATELIMIT_BUCKET_HEADER</span><span class="p">)</span>
        <span class="n">reset_after</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">resp_headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">_X_RATELIMIT_RESET_AFTER_HEADER</span><span class="p">,</span> <span class="s2">&quot;0&quot;</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">bucket</span><span class="p">:</span>
            <span class="n">live_attributes</span><span class="o">.</span><span class="n">still_alive</span><span class="p">()</span><span class="o">.</span><span class="n">buckets</span><span class="o">.</span><span class="n">update_rate_limits</span><span class="p">(</span>
                <span class="n">compiled_route</span><span class="o">=</span><span class="n">compiled_route</span><span class="p">,</span>
                <span class="n">bucket_header</span><span class="o">=</span><span class="n">bucket</span><span class="p">,</span>
                <span class="n">remaining_header</span><span class="o">=</span><span class="n">remaining</span><span class="p">,</span>
                <span class="n">limit_header</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span>
                <span class="n">reset_after</span><span class="o">=</span><span class="n">reset_after</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="n">http</span><span class="o">.</span><span class="n">HTTPStatus</span><span class="o">.</span><span class="n">TOO_MANY_REQUESTS</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="c1"># Discord have started applying ratelimits to operations on some endpoints</span>
        <span class="c1"># based on specific fields used in the JSON body.</span>
        <span class="c1"># This does not get reflected in the headers. The first we know is when we</span>
        <span class="c1"># get a 429.</span>
        <span class="c1"># The issue is that we may get the same response if Discord dynamically</span>
        <span class="c1"># adjusts the bucket ratelimits.</span>
        <span class="c1">#</span>
        <span class="c1"># We have no mechanism for handing field-based ratelimits, so if we get</span>
        <span class="c1"># to here, but notice remaining is greater than zero, we should just error.</span>
        <span class="c1">#</span>
        <span class="c1"># Seems Discord may raise this on some other undocumented cases, which</span>
        <span class="c1"># is nice of them. Apparently some dude spamming slurs in the Python</span>
        <span class="c1"># guild via a leaked webhook URL made people&#39;s clients exhibit this</span>
        <span class="c1"># behaviour.</span>
        <span class="c1">#</span>
        <span class="c1"># If we get ratelimited when running more than one bot under the same token,</span>
        <span class="c1"># or if the ratelimiting logic goes wrong, we will get a 429 and expect the</span>
        <span class="c1"># &quot;remaining&quot; header to be zeroed, or even negative as I don&#39;t trust that there</span>
        <span class="c1"># isn&#39;t some weird edge case here somewhere in Discord&#39;s implementation.</span>
        <span class="c1"># We can safely retry if this happens as acquiring the bucket will handle</span>
        <span class="c1"># this.</span>
        <span class="k">if</span> <span class="n">remaining</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">_LOGGER</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;rate limited on bucket </span><span class="si">%s</span><span class="s2">, maybe you are running more than one bot on this token? Retrying request...&quot;</span><span class="p">,</span>
                <span class="n">bucket</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="n">_RetryRequest</span>

        <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">content_type</span> <span class="o">!=</span> <span class="n">_APPLICATION_JSON</span><span class="p">:</span>
            <span class="c1"># We don&#39;t know exactly what this could imply. It is likely Cloudflare interfering</span>
            <span class="c1"># but I&#39;d rather we just give up than do something resulting in multiple failed</span>
            <span class="c1"># requests repeatedly.</span>
            <span class="k">raise</span> <span class="n">errors</span><span class="o">.</span><span class="n">HTTPResponseError</span><span class="p">(</span>
                <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">real_url</span><span class="p">),</span>
                <span class="n">http</span><span class="o">.</span><span class="n">HTTPStatus</span><span class="o">.</span><span class="n">TOO_MANY_REQUESTS</span><span class="p">,</span>
                <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span>
                <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span>
                <span class="sa">f</span><span class="s2">&quot;received rate limited response with unexpected response type </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">content_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="n">body</span> <span class="o">=</span> <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="n">body_retry_after</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">body</span><span class="p">[</span><span class="s2">&quot;retry_after&quot;</span><span class="p">])</span>

        <span class="k">if</span> <span class="n">body</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;global&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">_LOGGER</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="s2">&quot;rate limited on the global bucket. You should consider lowering the number of requests you make or &quot;</span>
                <span class="s2">&quot;contacting Discord to raise this limit. Backing off and retrying request...&quot;</span>
            <span class="p">)</span>
            <span class="n">live_attributes</span><span class="o">.</span><span class="n">still_alive</span><span class="p">()</span><span class="o">.</span><span class="n">global_rate_limit</span><span class="o">.</span><span class="n">throttle</span><span class="p">(</span><span class="n">body_retry_after</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">_RetryRequest</span>

        <span class="c1"># If the values are within 20% of each other by relativistic tolerance, it is probably</span>
        <span class="c1"># safe to retry the request, as they are likely the same value just with some</span>
        <span class="c1"># measuring difference. 20% was used as a rounded figure.</span>
        <span class="k">if</span> <span class="n">math</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">body_retry_after</span><span class="p">,</span> <span class="n">reset_after</span><span class="p">,</span> <span class="n">rel_tol</span><span class="o">=</span><span class="mf">0.20</span><span class="p">):</span>
            <span class="n">_LOGGER</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;rate limited on a sub bucket on bucket </span><span class="si">%s</span><span class="s2">, but it is safe to retry&quot;</span><span class="p">,</span> <span class="n">bucket</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">_RetryRequest</span>

        <span class="k">raise</span> <span class="n">errors</span><span class="o">.</span><span class="n">RateLimitedError</span><span class="p">(</span>
            <span class="n">url</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">real_url</span><span class="p">),</span>
            <span class="n">route</span><span class="o">=</span><span class="n">compiled_route</span><span class="p">,</span>
            <span class="n">headers</span><span class="o">=</span><span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span>
            <span class="n">raw_body</span><span class="o">=</span><span class="n">body</span><span class="p">,</span>
            <span class="n">retry_after</span><span class="o">=</span><span class="n">body_retry_after</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_channel</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">PartialChannel</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">channels_</span><span class="o">.</span><span class="n">PartialChannel</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_CHANNEL</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_channel</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cache</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">channels_</span><span class="o">.</span><span class="n">DMChannel</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_cache</span><span class="o">.</span><span class="n">set_dm_channel_id</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">recipient</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_channel</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildChannel</span><span class="p">],</span>
        <span class="o">/</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">topic</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">nsfw</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">bitrate</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">video_quality_mode</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">VideoQualityMode</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">user_limit</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">rate_limit_per_user</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">time</span><span class="o">.</span><span class="n">Intervalish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">region</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">voices</span><span class="o">.</span><span class="n">VoiceRegion</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">permission_overwrites</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">PermissionOverwrite</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">parent_category</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildCategory</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">channels_</span><span class="o">.</span><span class="n">PartialChannel</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_CHANNEL</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;position&quot;</span><span class="p">,</span> <span class="n">position</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;topic&quot;</span><span class="p">,</span> <span class="n">topic</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;nsfw&quot;</span><span class="p">,</span> <span class="n">nsfw</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;bitrate&quot;</span><span class="p">,</span> <span class="n">bitrate</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;video_quality_mode&quot;</span><span class="p">,</span> <span class="n">video_quality_mode</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;user_limit&quot;</span><span class="p">,</span> <span class="n">user_limit</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;rate_limit_per_user&quot;</span><span class="p">,</span> <span class="n">rate_limit_per_user</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">timespan_to_int</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;rtc_region&quot;</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;parent_id&quot;</span><span class="p">,</span> <span class="n">parent_category</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_array</span><span class="p">(</span>
            <span class="s2">&quot;permission_overwrites&quot;</span><span class="p">,</span>
            <span class="n">permission_overwrites</span><span class="p">,</span>
            <span class="n">conversion</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">serialize_permission_overwrite</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_channel</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">follow_channel</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">news_channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildNewsChannel</span><span class="p">],</span>
        <span class="n">target_channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildChannel</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">channels_</span><span class="o">.</span><span class="n">ChannelFollow</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_CHANNEL_FOLLOWERS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">news_channel</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;webhook_channel_id&quot;</span><span class="p">,</span> <span class="n">target_channel</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_channel_follow</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_channel</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">PartialChannel</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">channels_</span><span class="o">.</span><span class="n">PartialChannel</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_CHANNEL</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_channel</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_my_voice_state</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildStageChannel</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">suppress</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">request_to_speak</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedType</span><span class="p">,</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_MY_GUILD_VOICE_STATE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;channel_id&quot;</span><span class="p">,</span> <span class="n">channel</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;suppress&quot;</span><span class="p">,</span> <span class="n">suppress</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">request_to_speak</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">):</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;request_to_speak_timestamp&quot;</span><span class="p">,</span> <span class="n">request_to_speak</span><span class="o">.</span><span class="n">isoformat</span><span class="p">())</span>

        <span class="k">elif</span> <span class="n">request_to_speak</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;request_to_speak_timestamp&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">utc_datetime</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">())</span>

        <span class="k">elif</span> <span class="n">request_to_speak</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;request_to_speak_timestamp&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_voice_state</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildStageChannel</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">suppress</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_GUILD_VOICE_STATE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;channel_id&quot;</span><span class="p">,</span> <span class="n">channel</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;suppress&quot;</span><span class="p">,</span> <span class="n">suppress</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_permission_overwrites</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildChannel</span><span class="p">],</span>
        <span class="n">target</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span>
            <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflakeish</span><span class="p">,</span> <span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">,</span> <span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">,</span> <span class="n">channels_</span><span class="o">.</span><span class="n">PermissionOverwrite</span>
        <span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">target_type</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">PermissionOverwriteType</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">allow</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">permissions_</span><span class="o">.</span><span class="n">Permissions</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">deny</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">permissions_</span><span class="o">.</span><span class="n">Permissions</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">target_type</span> <span class="ow">is</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">):</span>
                <span class="n">target_type</span> <span class="o">=</span> <span class="n">channels_</span><span class="o">.</span><span class="n">PermissionOverwriteType</span><span class="o">.</span><span class="n">MEMBER</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">guilds</span><span class="o">.</span><span class="n">Role</span><span class="p">):</span>
                <span class="n">target_type</span> <span class="o">=</span> <span class="n">channels_</span><span class="o">.</span><span class="n">PermissionOverwriteType</span><span class="o">.</span><span class="n">ROLE</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">channels_</span><span class="o">.</span><span class="n">PermissionOverwrite</span><span class="p">):</span>
                <span class="n">target_type</span> <span class="o">=</span> <span class="n">target</span><span class="o">.</span><span class="n">type</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                    <span class="s2">&quot;Cannot determine the type of the target to update. Try specifying &#39;target_type&#39; manually.&quot;</span>
                <span class="p">)</span>

        <span class="n">target</span> <span class="o">=</span> <span class="n">target</span><span class="o">.</span><span class="n">id</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">channels_</span><span class="o">.</span><span class="n">PermissionOverwrite</span><span class="p">)</span> <span class="k">else</span> <span class="n">target</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PUT_CHANNEL_PERMISSIONS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="n">target</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="n">target_type</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;allow&quot;</span><span class="p">,</span> <span class="n">allow</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;deny&quot;</span><span class="p">,</span> <span class="n">deny</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_permission_overwrite</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildChannel</span><span class="p">],</span>
        <span class="n">target</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span>
            <span class="n">channels_</span><span class="o">.</span><span class="n">PermissionOverwrite</span><span class="p">,</span> <span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">,</span> <span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">,</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflakeish</span>
        <span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_CHANNEL_PERMISSIONS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="n">target</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_channel_invites</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildChannel</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">invites</span><span class="o">.</span><span class="n">InviteWithMetadata</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_CHANNEL_INVITES</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_invite_with_metadata</span><span class="p">(</span><span class="n">invite_payload</span><span class="p">)</span> <span class="k">for</span> <span class="n">invite_payload</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_invite</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildChannel</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">max_age</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">time</span><span class="o">.</span><span class="n">Intervalish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">max_uses</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">temporary</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">unique</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">target_type</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">invites</span><span class="o">.</span><span class="n">TargetType</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">target_user</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">target_application</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">invites</span><span class="o">.</span><span class="n">InviteWithMetadata</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_CHANNEL_INVITES</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;max_age&quot;</span><span class="p">,</span> <span class="n">max_age</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">timespan_to_int</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;max_uses&quot;</span><span class="p">,</span> <span class="n">max_uses</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;temporary&quot;</span><span class="p">,</span> <span class="n">temporary</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;unique&quot;</span><span class="p">,</span> <span class="n">unique</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;target_type&quot;</span><span class="p">,</span> <span class="n">target_type</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;target_user_id&quot;</span><span class="p">,</span> <span class="n">target_user</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;target_application_id&quot;</span><span class="p">,</span> <span class="n">target_application</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_invite_with_metadata</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">trigger_typing</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">special_endpoints</span><span class="o">.</span><span class="n">TypingIndicator</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">special_endpoints_impl</span><span class="o">.</span><span class="n">TypingIndicator</span><span class="p">(</span>
            <span class="n">request_call</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span> <span class="n">rest_closed_event</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_live_attributes</span><span class="p">()</span><span class="o">.</span><span class="n">closed_event</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_pins</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_CHANNEL_PINS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_message</span><span class="p">(</span><span class="n">message_pl</span><span class="p">)</span> <span class="k">for</span> <span class="n">message_pl</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">pin_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">],</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PUT_CHANNEL_PINS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">unpin_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">],</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_CHANNEL_PIN</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">fetch_messages</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">before</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SearchableSnowflakeishOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Unique</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">after</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SearchableSnowflakeishOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Unique</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">around</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SearchableSnowflakeishOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Unique</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">iterators</span><span class="o">.</span><span class="n">LazyIterator</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">undefined</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">before</span><span class="p">,</span> <span class="n">after</span><span class="p">,</span> <span class="n">around</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Expected no kwargs, or a maximum of one of &#39;before&#39;, &#39;after&#39;, &#39;around&#39;&quot;</span><span class="p">)</span>

        <span class="n">timestamp</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">before</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">direction</span> <span class="o">=</span> <span class="s2">&quot;before&quot;</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">before</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">):</span>
                <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="o">.</span><span class="n">from_datetime</span><span class="p">(</span><span class="n">before</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">before</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">after</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">direction</span> <span class="o">=</span> <span class="s2">&quot;after&quot;</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">after</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">):</span>
                <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="o">.</span><span class="n">from_datetime</span><span class="p">(</span><span class="n">after</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">after</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">around</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">direction</span> <span class="o">=</span> <span class="s2">&quot;around&quot;</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">around</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">):</span>
                <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="o">.</span><span class="n">from_datetime</span><span class="p">(</span><span class="n">around</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">around</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">direction</span> <span class="o">=</span> <span class="s2">&quot;before&quot;</span>
            <span class="n">timestamp</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span>

        <span class="k">return</span> <span class="n">special_endpoints_impl</span><span class="o">.</span><span class="n">MessageIterator</span><span class="p">(</span>
            <span class="n">entity_factory</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="p">,</span>
            <span class="n">request_call</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">,</span>
            <span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span>
            <span class="n">direction</span><span class="o">=</span><span class="n">direction</span><span class="p">,</span>
            <span class="n">first_id</span><span class="o">=</span><span class="n">timestamp</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">],</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_CHANNEL_MESSAGE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_message</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">_create_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">route</span><span class="p">:</span> <span class="n">routes</span><span class="o">.</span><span class="n">CompiledRoute</span><span class="p">,</span>
        <span class="n">body</span><span class="p">:</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">,</span>
        <span class="n">query</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">data_binding</span><span class="o">.</span><span class="n">StringMapBuilder</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">no_auth</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">content</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span>
        <span class="n">attachment</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">],</span>
        <span class="n">attachments</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]],</span>
        <span class="n">component</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">components</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">embed</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">],</span>
        <span class="n">embeds</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">]],</span>
        <span class="n">tts</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">],</span>
        <span class="n">mentions_everyone</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">],</span>
        <span class="n">mentions_reply</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">],</span>
        <span class="n">user_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]],</span>
        <span class="n">role_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">any_undefined</span><span class="p">(</span><span class="n">attachment</span><span class="p">,</span> <span class="n">attachments</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;You may only specify one of &#39;attachment&#39; or &#39;attachments&#39;, not both&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">any_undefined</span><span class="p">(</span><span class="n">component</span><span class="p">,</span> <span class="n">components</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;You may only specify one of &#39;component&#39; or &#39;components&#39;, not both&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">any_undefined</span><span class="p">(</span><span class="n">embed</span><span class="p">,</span> <span class="n">embeds</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;You may only specify one of &#39;embed&#39; or &#39;embeds&#39;, not both&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">attachments</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">attachments</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Collection</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s2">&quot;You passed a non-collection to &#39;attachments&#39;, but this expects a collection. Maybe you meant to &quot;</span>
                <span class="s2">&quot;use &#39;attachment&#39; (singular) instead?&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">components</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">components</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Collection</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s2">&quot;You passed a non-collection to &#39;components&#39;, but this expects a collection. Maybe you meant to &quot;</span>
                <span class="s2">&quot;use &#39;component&#39; (singular) instead?&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">embeds</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">_NONE_OR_UNDEFINED</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">embeds</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Collection</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s2">&quot;You passed a non-collection to &#39;embeds&#39;, but this expects a collection. Maybe you meant to &quot;</span>
                <span class="s2">&quot;use &#39;embed&#39; (singular) instead?&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">undefined</span><span class="o">.</span><span class="n">all_undefined</span><span class="p">(</span><span class="n">embed</span><span class="p">,</span> <span class="n">embeds</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">):</span>
            <span class="c1"># Syntactic sugar, common mistake to accidentally send an embed</span>
            <span class="c1"># as the content, so lets detect this and fix it for the user.</span>
            <span class="n">embed</span> <span class="o">=</span> <span class="n">content</span>
            <span class="n">content</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span>

        <span class="k">elif</span> <span class="n">undefined</span><span class="o">.</span><span class="n">all_undefined</span><span class="p">(</span><span class="n">attachment</span><span class="p">,</span> <span class="n">attachments</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span>
            <span class="n">content</span><span class="p">,</span> <span class="p">(</span><span class="n">files</span><span class="o">.</span><span class="n">Resource</span><span class="p">,</span> <span class="n">files</span><span class="o">.</span><span class="n">RAWISH_TYPES</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">)</span>
        <span class="p">):</span>
            <span class="c1"># Syntactic sugar, common mistake to accidentally send an attachment</span>
            <span class="c1"># as the content, so lets detect this and fix it for the user. This</span>
            <span class="c1"># will still then work with normal implicit embed attachments as</span>
            <span class="c1"># we work this out later.</span>
            <span class="n">attachment</span> <span class="o">=</span> <span class="n">content</span>
            <span class="n">content</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span>

        <span class="n">final_attachments</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resource</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">AsyncReader</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">attachment</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">final_attachments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">files</span><span class="o">.</span><span class="n">ensure_resource</span><span class="p">(</span><span class="n">attachment</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">attachments</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">final_attachments</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">files</span><span class="o">.</span><span class="n">ensure_resource</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">attachments</span><span class="p">])</span>

        <span class="k">if</span> <span class="n">component</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;components&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">component</span><span class="o">.</span><span class="n">build</span><span class="p">()])</span>

        <span class="k">elif</span> <span class="n">components</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;components&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">component</span><span class="o">.</span><span class="n">build</span><span class="p">()</span> <span class="k">for</span> <span class="n">component</span> <span class="ow">in</span> <span class="n">components</span><span class="p">])</span>

        <span class="n">serialized_embeds</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">data_binding</span><span class="o">.</span><span class="n">JSONArray</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span>

        <span class="k">if</span> <span class="n">embed</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">embed_payload</span><span class="p">,</span> <span class="n">embed_attachments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">serialize_embed</span><span class="p">(</span><span class="n">embed</span><span class="p">)</span>
            <span class="n">final_attachments</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">embed_attachments</span><span class="p">)</span>
            <span class="n">serialized_embeds</span> <span class="o">=</span> <span class="p">[</span><span class="n">embed_payload</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">embeds</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">serialized_embeds</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">embed</span> <span class="ow">in</span> <span class="n">embeds</span><span class="p">:</span>
                <span class="n">embed_payload</span><span class="p">,</span> <span class="n">embed_attachments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">serialize_embed</span><span class="p">(</span><span class="n">embed</span><span class="p">)</span>
                <span class="n">final_attachments</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">embed_attachments</span><span class="p">)</span>
                <span class="n">serialized_embeds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">embed_payload</span><span class="p">)</span>

        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
            <span class="s2">&quot;allowed_mentions&quot;</span><span class="p">,</span>
            <span class="n">mentions</span><span class="o">.</span><span class="n">generate_allowed_mentions</span><span class="p">(</span><span class="n">mentions_everyone</span><span class="p">,</span> <span class="n">mentions_reply</span><span class="p">,</span> <span class="n">user_mentions</span><span class="p">,</span> <span class="n">role_mentions</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;content&quot;</span><span class="p">,</span> <span class="n">content</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;tts&quot;</span><span class="p">,</span> <span class="n">tts</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;embeds&quot;</span><span class="p">,</span> <span class="n">serialized_embeds</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">final_attachments</span><span class="p">:</span>
            <span class="n">form</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">URLEncodedFormBuilder</span><span class="p">(</span><span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">)</span>
            <span class="n">form</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">&quot;payload_json&quot;</span><span class="p">,</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">dump_json</span><span class="p">(</span><span class="n">body</span><span class="p">),</span> <span class="n">content_type</span><span class="o">=</span><span class="n">_APPLICATION_JSON</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">attachment</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">final_attachments</span><span class="p">):</span>
                <span class="n">form</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;file</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">attachment</span><span class="p">)</span>

            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">form_builder</span><span class="o">=</span><span class="n">form</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="n">query</span><span class="p">,</span> <span class="n">no_auth</span><span class="o">=</span><span class="n">no_auth</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="n">query</span><span class="p">,</span> <span class="n">no_auth</span><span class="o">=</span><span class="n">no_auth</span><span class="p">)</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_message</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">],</span>
        <span class="n">content</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">attachment</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">attachments</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">component</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">components</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">embed</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">embeds</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">tts</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">nonce</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reply</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">mentions_everyone</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">mentions_reply</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">user_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">role_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_CHANNEL_MESSAGES</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;nonce&quot;</span><span class="p">,</span> <span class="n">nonce</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;message_reference&quot;</span><span class="p">,</span> <span class="n">reply</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="k">lambda</span> <span class="n">m</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;message_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">m</span><span class="p">))})</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_message</span><span class="p">(</span>
            <span class="n">route</span><span class="p">,</span>
            <span class="n">body</span><span class="p">,</span>
            <span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span>
            <span class="n">attachment</span><span class="o">=</span><span class="n">attachment</span><span class="p">,</span>
            <span class="n">attachments</span><span class="o">=</span><span class="n">attachments</span><span class="p">,</span>
            <span class="n">component</span><span class="o">=</span><span class="n">component</span><span class="p">,</span>
            <span class="n">components</span><span class="o">=</span><span class="n">components</span><span class="p">,</span>
            <span class="n">embed</span><span class="o">=</span><span class="n">embed</span><span class="p">,</span>
            <span class="n">embeds</span><span class="o">=</span><span class="n">embeds</span><span class="p">,</span>
            <span class="n">tts</span><span class="o">=</span><span class="n">tts</span><span class="p">,</span>
            <span class="n">mentions_everyone</span><span class="o">=</span><span class="n">mentions_everyone</span><span class="p">,</span>
            <span class="n">mentions_reply</span><span class="o">=</span><span class="n">mentions_reply</span><span class="p">,</span>
            <span class="n">user_mentions</span><span class="o">=</span><span class="n">user_mentions</span><span class="p">,</span>
            <span class="n">role_mentions</span><span class="o">=</span><span class="n">role_mentions</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">crosspost_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildNewsChannel</span><span class="p">],</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_CHANNEL_CROSSPOST</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_message</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">_edit_message</span><span class="p">(</span>  <span class="c1"># noqa: C901 - Function too complex</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">route</span><span class="p">:</span> <span class="n">routes</span><span class="o">.</span><span class="n">CompiledRoute</span><span class="p">,</span>
        <span class="n">body</span><span class="p">:</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">no_auth</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">content</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span>
        <span class="n">attachment</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">],</span>
        <span class="n">attachments</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]],</span>
        <span class="n">component</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">components</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">embed</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">],</span>
        <span class="n">embeds</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">]],</span>
        <span class="n">replace_attachments</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">mentions_everyone</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">],</span>
        <span class="n">mentions_reply</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">],</span>
        <span class="n">user_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]],</span>
        <span class="n">role_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">any_undefined</span><span class="p">(</span><span class="n">attachment</span><span class="p">,</span> <span class="n">attachments</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;You may only specify one of &#39;attachment&#39; or &#39;attachments&#39;, not both&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">any_undefined</span><span class="p">(</span><span class="n">component</span><span class="p">,</span> <span class="n">components</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;You may only specify one of &#39;component&#39; or &#39;components&#39;, not both&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">any_undefined</span><span class="p">(</span><span class="n">embed</span><span class="p">,</span> <span class="n">embeds</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;You may only specify one of &#39;embed&#39; or &#39;embeds&#39;, not both&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">attachments</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">attachments</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Collection</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s2">&quot;You passed a non-collection to &#39;attachments&#39;, but this expects a collection. Maybe you meant to &quot;</span>
                <span class="s2">&quot;use &#39;attachment&#39; (singular) instead?&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">components</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">components</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Collection</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s2">&quot;You passed a non-collection to &#39;components&#39;, but this expects a collection. Maybe you meant to &quot;</span>
                <span class="s2">&quot;use &#39;component&#39; (singular) instead?&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">embeds</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">_NONE_OR_UNDEFINED</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">embeds</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Collection</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s2">&quot;You passed a non-collection to &#39;embeds&#39;, but this expects a collection. Maybe you meant to &quot;</span>
                <span class="s2">&quot;use &#39;embed&#39; (singular) instead?&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">all_undefined</span><span class="p">(</span><span class="n">mentions_everyone</span><span class="p">,</span> <span class="n">mentions_reply</span><span class="p">,</span> <span class="n">user_mentions</span><span class="p">,</span> <span class="n">role_mentions</span><span class="p">):</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
                <span class="s2">&quot;allowed_mentions&quot;</span><span class="p">,</span>
                <span class="n">mentions</span><span class="o">.</span><span class="n">generate_allowed_mentions</span><span class="p">(</span><span class="n">mentions_everyone</span><span class="p">,</span> <span class="n">mentions_reply</span><span class="p">,</span> <span class="n">user_mentions</span><span class="p">,</span> <span class="n">role_mentions</span><span class="p">),</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">embed</span> <span class="ow">is</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">):</span>
            <span class="c1"># Syntactic sugar, common mistake to accidentally send an embed</span>
            <span class="c1"># as the content, so lets detect this and fix it for the user.</span>
            <span class="n">embed</span> <span class="o">=</span> <span class="n">content</span>
            <span class="n">content</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span>
        <span class="k">elif</span> <span class="n">undefined</span><span class="o">.</span><span class="n">all_undefined</span><span class="p">(</span><span class="n">attachment</span><span class="p">,</span> <span class="n">attachments</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span>
            <span class="n">content</span><span class="p">,</span> <span class="p">(</span><span class="n">files</span><span class="o">.</span><span class="n">Resource</span><span class="p">,</span> <span class="n">files</span><span class="o">.</span><span class="n">RAWISH_TYPES</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">)</span>
        <span class="p">):</span>
            <span class="c1"># Syntactic sugar, common mistake to accidentally send an attachment</span>
            <span class="c1"># as the content, so lets detect this and fix it for the user. This</span>
            <span class="c1"># will still then work with normal implicit embed attachments as</span>
            <span class="c1"># we work this out later.</span>
            <span class="n">attachment</span> <span class="o">=</span> <span class="n">content</span>
            <span class="n">content</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span>

        <span class="k">if</span> <span class="n">content</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;content&quot;</span><span class="p">,</span> <span class="n">content</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;content&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="n">final_attachments</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resource</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">AsyncReader</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">attachment</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">final_attachments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">files</span><span class="o">.</span><span class="n">ensure_resource</span><span class="p">(</span><span class="n">attachment</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">attachments</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">final_attachments</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">files</span><span class="o">.</span><span class="n">ensure_resource</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">attachments</span><span class="p">])</span>

        <span class="n">serialized_components</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObject</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">component</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">component</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">serialized_components</span> <span class="o">=</span> <span class="p">[</span><span class="n">component</span><span class="o">.</span><span class="n">build</span><span class="p">()]</span>

            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;components&quot;</span><span class="p">,</span> <span class="n">serialized_components</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">components</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">components</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">serialized_components</span> <span class="o">=</span> <span class="p">[</span><span class="n">component</span><span class="o">.</span><span class="n">build</span><span class="p">()</span> <span class="k">for</span> <span class="n">component</span> <span class="ow">in</span> <span class="n">components</span><span class="p">]</span>

            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;components&quot;</span><span class="p">,</span> <span class="n">serialized_components</span><span class="p">)</span>

        <span class="n">serialized_embeds</span><span class="p">:</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONArray</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">update_embeds</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">embed</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">update_embeds</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">if</span> <span class="n">embed</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">embed_payload</span><span class="p">,</span> <span class="n">embed_attachments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">serialize_embed</span><span class="p">(</span><span class="n">embed</span><span class="p">)</span>
                <span class="n">serialized_embeds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">embed_payload</span><span class="p">)</span>
                <span class="n">final_attachments</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">embed_attachments</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">embeds</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">update_embeds</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">if</span> <span class="n">embeds</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">embed</span> <span class="ow">in</span> <span class="n">embeds</span><span class="p">:</span>
                    <span class="n">embed_payload</span><span class="p">,</span> <span class="n">embed_attachments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">serialize_embed</span><span class="p">(</span><span class="n">embed</span><span class="p">)</span>
                    <span class="n">serialized_embeds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">embed_payload</span><span class="p">)</span>
                    <span class="n">final_attachments</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">embed_attachments</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">update_embeds</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;embeds&quot;</span><span class="p">,</span> <span class="n">serialized_embeds</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">replace_attachments</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;attachments&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">final_attachments</span><span class="p">:</span>
            <span class="n">form_builder</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">URLEncodedFormBuilder</span><span class="p">(</span><span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">)</span>
            <span class="n">form_builder</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">&quot;payload_json&quot;</span><span class="p">,</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">dump_json</span><span class="p">(</span><span class="n">body</span><span class="p">),</span> <span class="n">content_type</span><span class="o">=</span><span class="n">_APPLICATION_JSON</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">attachment</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">final_attachments</span><span class="p">):</span>
                <span class="n">form_builder</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;file</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">attachment</span><span class="p">)</span>

            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">form_builder</span><span class="o">=</span><span class="n">form_builder</span><span class="p">,</span> <span class="n">no_auth</span><span class="o">=</span><span class="n">no_auth</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">no_auth</span><span class="o">=</span><span class="n">no_auth</span><span class="p">)</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_message</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">],</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
        <span class="n">content</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">attachment</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">attachments</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">component</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">components</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">embed</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">embeds</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">replace_attachments</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">mentions_everyone</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">mentions_reply</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">user_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">role_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">flags</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">MessageFlag</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_CHANNEL_MESSAGE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;flags&quot;</span><span class="p">,</span> <span class="n">flags</span><span class="p">)</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_edit_message</span><span class="p">(</span>
            <span class="n">route</span><span class="p">,</span>
            <span class="n">body</span><span class="p">,</span>
            <span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span>
            <span class="n">attachment</span><span class="o">=</span><span class="n">attachment</span><span class="p">,</span>
            <span class="n">attachments</span><span class="o">=</span><span class="n">attachments</span><span class="p">,</span>
            <span class="n">component</span><span class="o">=</span><span class="n">component</span><span class="p">,</span>
            <span class="n">components</span><span class="o">=</span><span class="n">components</span><span class="p">,</span>
            <span class="n">embed</span><span class="o">=</span><span class="n">embed</span><span class="p">,</span>
            <span class="n">embeds</span><span class="o">=</span><span class="n">embeds</span><span class="p">,</span>
            <span class="n">replace_attachments</span><span class="o">=</span><span class="n">replace_attachments</span><span class="p">,</span>
            <span class="n">mentions_everyone</span><span class="o">=</span><span class="n">mentions_everyone</span><span class="p">,</span>
            <span class="n">mentions_reply</span><span class="o">=</span><span class="n">mentions_reply</span><span class="p">,</span>
            <span class="n">user_mentions</span><span class="o">=</span><span class="n">user_mentions</span><span class="p">,</span>
            <span class="n">role_mentions</span><span class="o">=</span><span class="n">role_mentions</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">],</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_CHANNEL_MESSAGE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_messages</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">],</span>
        <span class="n">messages</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span>
            <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
            <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishIterable</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
        <span class="p">],</span>
        <span class="o">/</span><span class="p">,</span>
        <span class="o">*</span><span class="n">other_messages</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_DELETE_CHANNEL_MESSAGES_BULK</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">)</span>

        <span class="n">pending</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">deleted</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">):</span>  <span class="c1"># Syntactic sugar. Allows to use iterables</span>
            <span class="n">pending</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">pending</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>

        <span class="c1"># This maintains the order in-order to keep a predictable deletion order.</span>
        <span class="n">pending</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">other_messages</span><span class="p">)</span>

        <span class="k">while</span> <span class="n">pending</span><span class="p">:</span>
            <span class="c1"># Discord only allows 2-100 messages in the BULK_DELETE endpoint. Because of that,</span>
            <span class="c1"># if the user wants 101 messages deleted, we will post 100 messages in bulk delete</span>
            <span class="c1"># and then the last message in a normal delete.</span>
            <span class="c1"># Along with this, the bucket size for v6 and v7 seems to be a bit restrictive. As of</span>
            <span class="c1"># 30th July 2020, this endpoint returned the following headers when being ratelimited:</span>
            <span class="c1">#       x-ratelimit-bucket         b05c0d8c2ab83895085006a8eae073a3</span>
            <span class="c1">#       x-ratelimit-limit          1</span>
            <span class="c1">#       x-ratelimit-remaining      0</span>
            <span class="c1">#       x-ratelimit-reset          1596033974.096</span>
            <span class="c1">#       x-ratelimit-reset-after    3.000</span>
            <span class="c1"># This kind of defeats the point of asynchronously gathering any of these</span>
            <span class="c1"># in the first place really. To save clogging up the event loop</span>
            <span class="c1"># (albeit at a cost of maybe a couple-dozen milliseconds per call),</span>
            <span class="c1"># I am just gonna invoke these sequentially instead.</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">pending</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">message</span> <span class="o">=</span> <span class="n">pending</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">delete_message</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
                    <span class="k">except</span> <span class="n">errors</span><span class="o">.</span><span class="n">NotFoundError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
                        <span class="c1"># If the message is not found then this error should be suppressed</span>
                        <span class="c1"># to keep consistency with how the bulk delete endpoint functions.</span>
                        <span class="k">if</span> <span class="n">exc</span><span class="o">.</span><span class="n">code</span> <span class="o">!=</span> <span class="mi">10008</span><span class="p">:</span>  <span class="c1"># Unknown Message</span>
                            <span class="k">raise</span>

                    <span class="n">deleted</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
                    <span class="n">chunk</span> <span class="o">=</span> <span class="n">pending</span><span class="p">[:</span><span class="mi">100</span><span class="p">]</span>
                    <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake_array</span><span class="p">(</span><span class="s2">&quot;messages&quot;</span><span class="p">,</span> <span class="n">chunk</span><span class="p">)</span>
                    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>
                    <span class="n">deleted</span> <span class="o">+=</span> <span class="n">chunk</span>

                <span class="n">pending</span> <span class="o">=</span> <span class="n">pending</span><span class="p">[</span><span class="mi">100</span><span class="p">:]</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">errors</span><span class="o">.</span><span class="n">BulkDeleteError</span><span class="p">(</span><span class="n">deleted</span><span class="p">,</span> <span class="n">pending</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">ex</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_transform_emoji_to_url_format</span><span class="p">(</span>
        <span class="n">emoji</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">emojis</span><span class="o">.</span><span class="n">Emoji</span><span class="p">],</span>
        <span class="n">emoji_id</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">emojis</span><span class="o">.</span><span class="n">CustomEmoji</span><span class="p">]],</span>
        <span class="o">/</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">emoji</span><span class="p">,</span> <span class="n">emojis</span><span class="o">.</span><span class="n">Emoji</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">emoji_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;emoji_id shouldn&#39;t be passed when an Emoji object is passed for emoji&quot;</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">emoji</span><span class="o">.</span><span class="n">url_name</span>

        <span class="k">if</span> <span class="n">emoji_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">emoji</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">emoji_id</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="k">return</span> <span class="n">emoji</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">add_reaction</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">],</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
        <span class="n">emoji</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">emojis</span><span class="o">.</span><span class="n">Emoji</span><span class="p">],</span>
        <span class="n">emoji_id</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">emojis</span><span class="o">.</span><span class="n">CustomEmoji</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PUT_MY_REACTION</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
            <span class="n">emoji</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_transform_emoji_to_url_format</span><span class="p">(</span><span class="n">emoji</span><span class="p">,</span> <span class="n">emoji_id</span><span class="p">),</span>
            <span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span>
            <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_my_reaction</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">],</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
        <span class="n">emoji</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">emojis</span><span class="o">.</span><span class="n">Emoji</span><span class="p">],</span>
        <span class="n">emoji_id</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">emojis</span><span class="o">.</span><span class="n">CustomEmoji</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_MY_REACTION</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
            <span class="n">emoji</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_transform_emoji_to_url_format</span><span class="p">(</span><span class="n">emoji</span><span class="p">,</span> <span class="n">emoji_id</span><span class="p">),</span>
            <span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span>
            <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_all_reactions_for_emoji</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">],</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
        <span class="n">emoji</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">emojis</span><span class="o">.</span><span class="n">Emoji</span><span class="p">],</span>
        <span class="n">emoji_id</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">emojis</span><span class="o">.</span><span class="n">CustomEmoji</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_REACTION_EMOJI</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
            <span class="n">emoji</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_transform_emoji_to_url_format</span><span class="p">(</span><span class="n">emoji</span><span class="p">,</span> <span class="n">emoji_id</span><span class="p">),</span>
            <span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span>
            <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_reaction</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">],</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span>
        <span class="n">emoji</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">emojis</span><span class="o">.</span><span class="n">Emoji</span><span class="p">],</span>
        <span class="n">emoji_id</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">emojis</span><span class="o">.</span><span class="n">CustomEmoji</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_REACTION_USER</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
            <span class="n">emoji</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_transform_emoji_to_url_format</span><span class="p">(</span><span class="n">emoji</span><span class="p">,</span> <span class="n">emoji_id</span><span class="p">),</span>
            <span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span>
            <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span>
            <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_all_reactions</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">],</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_ALL_REACTIONS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">fetch_reactions_for_emoji</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">],</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
        <span class="n">emoji</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">emojis</span><span class="o">.</span><span class="n">Emoji</span><span class="p">],</span>
        <span class="n">emoji_id</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">emojis</span><span class="o">.</span><span class="n">CustomEmoji</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">iterators</span><span class="o">.</span><span class="n">LazyIterator</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">User</span><span class="p">]:</span>
        <span class="k">return</span> <span class="n">special_endpoints_impl</span><span class="o">.</span><span class="n">ReactorIterator</span><span class="p">(</span>
            <span class="n">entity_factory</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="p">,</span>
            <span class="n">request_call</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">,</span>
            <span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span>
            <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span>
            <span class="n">emoji</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_transform_emoji_to_url_format</span><span class="p">(</span><span class="n">emoji</span><span class="p">,</span> <span class="n">emoji_id</span><span class="p">),</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_webhook</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">WebhookChannelT</span><span class="p">],</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">avatar</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">webhooks</span><span class="o">.</span><span class="n">IncomingWebhook</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_CHANNEL_WEBHOOKS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">avatar</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">avatar_resource</span> <span class="o">=</span> <span class="n">files</span><span class="o">.</span><span class="n">ensure_resource</span><span class="p">(</span><span class="n">avatar</span><span class="p">)</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">avatar_resource</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
                <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;avatar&quot;</span><span class="p">,</span> <span class="k">await</span> <span class="n">stream</span><span class="o">.</span><span class="n">data_uri</span><span class="p">())</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_incoming_webhook</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_webhook</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">webhook</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">webhooks</span><span class="o">.</span><span class="n">PartialWebhook</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">token</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">webhooks</span><span class="o">.</span><span class="n">PartialWebhook</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">token</span> <span class="ow">is</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_WEBHOOK</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">webhook</span><span class="o">=</span><span class="n">webhook</span><span class="p">)</span>
            <span class="n">no_auth</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_WEBHOOK_WITH_TOKEN</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">webhook</span><span class="o">=</span><span class="n">webhook</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">)</span>
            <span class="n">no_auth</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">no_auth</span><span class="o">=</span><span class="n">no_auth</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_webhook</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_channel_webhooks</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">WebhookChannelT</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">webhooks</span><span class="o">.</span><span class="n">PartialWebhook</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_CHANNEL_WEBHOOKS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_webhook</span><span class="p">(</span><span class="n">webhook_pl</span><span class="p">)</span> <span class="k">for</span> <span class="n">webhook_pl</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_guild_webhooks</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">webhooks</span><span class="o">.</span><span class="n">PartialWebhook</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_WEBHOOKS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_webhook</span><span class="p">(</span><span class="n">webhook_payload</span><span class="p">)</span> <span class="k">for</span> <span class="n">webhook_payload</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_webhook</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">webhook</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">webhooks</span><span class="o">.</span><span class="n">PartialWebhook</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">token</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">avatar</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">WebhookChannelT</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">webhooks</span><span class="o">.</span><span class="n">PartialWebhook</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">token</span> <span class="ow">is</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_WEBHOOK</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">webhook</span><span class="o">=</span><span class="n">webhook</span><span class="p">)</span>
            <span class="n">no_auth</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_WEBHOOK_WITH_TOKEN</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">webhook</span><span class="o">=</span><span class="n">webhook</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">)</span>
            <span class="n">no_auth</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;channel&quot;</span><span class="p">,</span> <span class="n">channel</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">avatar</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;avatar&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">avatar</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">avatar_resource</span> <span class="o">=</span> <span class="n">files</span><span class="o">.</span><span class="n">ensure_resource</span><span class="p">(</span><span class="n">avatar</span><span class="p">)</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">avatar_resource</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
                <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;avatar&quot;</span><span class="p">,</span> <span class="k">await</span> <span class="n">stream</span><span class="o">.</span><span class="n">data_uri</span><span class="p">())</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">,</span> <span class="n">no_auth</span><span class="o">=</span><span class="n">no_auth</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_webhook</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_webhook</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">webhook</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">webhooks</span><span class="o">.</span><span class="n">PartialWebhook</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">token</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">token</span> <span class="ow">is</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_WEBHOOK</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">webhook</span><span class="o">=</span><span class="n">webhook</span><span class="p">)</span>
            <span class="n">no_auth</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_WEBHOOK_WITH_TOKEN</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">webhook</span><span class="o">=</span><span class="n">webhook</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">)</span>
            <span class="n">no_auth</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">no_auth</span><span class="o">=</span><span class="n">no_auth</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">execute_webhook</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">webhook</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">webhooks</span><span class="o">.</span><span class="n">ExecutableWebhook</span><span class="p">,</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflakeish</span><span class="p">],</span>
        <span class="n">token</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">content</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">username</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">avatar_url</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedType</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">files</span><span class="o">.</span><span class="n">URL</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">attachment</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">attachments</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">component</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">components</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">embed</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">embeds</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">tts</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">mentions_everyone</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">user_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">role_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">flags</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedType</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="n">messages_</span><span class="o">.</span><span class="n">MessageFlag</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">:</span>
        <span class="c1"># int(ExecutableWebhook) isn&#39;t guaranteed to be valid nor the ID used to execute this entity as a webhook.</span>
        <span class="n">webhook_id</span> <span class="o">=</span> <span class="n">webhook</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">webhook</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="k">else</span> <span class="n">webhook</span><span class="o">.</span><span class="n">webhook_id</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_WEBHOOK_WITH_TOKEN</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">webhook</span><span class="o">=</span><span class="n">webhook_id</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">)</span>

        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;username&quot;</span><span class="p">,</span> <span class="n">username</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;avatar_url&quot;</span><span class="p">,</span> <span class="n">avatar_url</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;flags&quot;</span><span class="p">,</span> <span class="n">flags</span><span class="p">)</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">StringMapBuilder</span><span class="p">()</span>
        <span class="n">query</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;wait&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_message</span><span class="p">(</span>
            <span class="n">route</span><span class="p">,</span>
            <span class="n">body</span><span class="p">,</span>
            <span class="n">query</span><span class="p">,</span>
            <span class="n">no_auth</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span>
            <span class="n">attachment</span><span class="o">=</span><span class="n">attachment</span><span class="p">,</span>
            <span class="n">attachments</span><span class="o">=</span><span class="n">attachments</span><span class="p">,</span>
            <span class="n">component</span><span class="o">=</span><span class="n">component</span><span class="p">,</span>
            <span class="n">components</span><span class="o">=</span><span class="n">components</span><span class="p">,</span>
            <span class="n">embed</span><span class="o">=</span><span class="n">embed</span><span class="p">,</span>
            <span class="n">embeds</span><span class="o">=</span><span class="n">embeds</span><span class="p">,</span>
            <span class="n">tts</span><span class="o">=</span><span class="n">tts</span><span class="p">,</span>
            <span class="n">mentions_everyone</span><span class="o">=</span><span class="n">mentions_everyone</span><span class="p">,</span>
            <span class="n">user_mentions</span><span class="o">=</span><span class="n">user_mentions</span><span class="p">,</span>
            <span class="n">role_mentions</span><span class="o">=</span><span class="n">role_mentions</span><span class="p">,</span>
            <span class="n">mentions_reply</span><span class="o">=</span><span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_webhook_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">webhook</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">webhooks</span><span class="o">.</span><span class="n">ExecutableWebhook</span><span class="p">,</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflakeish</span><span class="p">],</span>
        <span class="n">token</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">:</span>
        <span class="c1"># int(ExecutableWebhook) isn&#39;t guaranteed to be valid nor the ID used to execute this entity as a webhook.</span>
        <span class="n">webhook_id</span> <span class="o">=</span> <span class="n">webhook</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">webhook</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="k">else</span> <span class="n">webhook</span><span class="o">.</span><span class="n">webhook_id</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_WEBHOOK_MESSAGE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">webhook</span><span class="o">=</span><span class="n">webhook_id</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">no_auth</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_message</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_webhook_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">webhook</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">webhooks</span><span class="o">.</span><span class="n">ExecutableWebhook</span><span class="p">,</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflakeish</span><span class="p">],</span>
        <span class="n">token</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">],</span>
        <span class="n">content</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">attachment</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">attachments</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">component</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">components</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">embed</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">embeds</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">replace_attachments</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">mentions_everyone</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">user_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">role_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">:</span>
        <span class="c1"># int(ExecutableWebhook) isn&#39;t guaranteed to be valid nor the ID used to execute this entity as a webhook.</span>
        <span class="n">webhook_id</span> <span class="o">=</span> <span class="n">webhook</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">webhook</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="k">else</span> <span class="n">webhook</span><span class="o">.</span><span class="n">webhook_id</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_WEBHOOK_MESSAGE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">webhook</span><span class="o">=</span><span class="n">webhook_id</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">)</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_edit_message</span><span class="p">(</span>
            <span class="n">route</span><span class="p">,</span>
            <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">(),</span>
            <span class="n">no_auth</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span>
            <span class="n">attachment</span><span class="o">=</span><span class="n">attachment</span><span class="p">,</span>
            <span class="n">attachments</span><span class="o">=</span><span class="n">attachments</span><span class="p">,</span>
            <span class="n">component</span><span class="o">=</span><span class="n">component</span><span class="p">,</span>
            <span class="n">components</span><span class="o">=</span><span class="n">components</span><span class="p">,</span>
            <span class="n">embed</span><span class="o">=</span><span class="n">embed</span><span class="p">,</span>
            <span class="n">embeds</span><span class="o">=</span><span class="n">embeds</span><span class="p">,</span>
            <span class="n">replace_attachments</span><span class="o">=</span><span class="n">replace_attachments</span><span class="p">,</span>
            <span class="n">mentions_everyone</span><span class="o">=</span><span class="n">mentions_everyone</span><span class="p">,</span>
            <span class="n">mentions_reply</span><span class="o">=</span><span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
            <span class="n">user_mentions</span><span class="o">=</span><span class="n">user_mentions</span><span class="p">,</span>
            <span class="n">role_mentions</span><span class="o">=</span><span class="n">role_mentions</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_webhook_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">webhook</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">webhooks</span><span class="o">.</span><span class="n">ExecutableWebhook</span><span class="p">,</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflakeish</span><span class="p">],</span>
        <span class="n">token</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># int(ExecutableWebhook) isn&#39;t guaranteed to be valid nor the ID used to execute this entity as a webhook.</span>
        <span class="n">webhook_id</span> <span class="o">=</span> <span class="n">webhook</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">webhook</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="k">else</span> <span class="n">webhook</span><span class="o">.</span><span class="n">webhook_id</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_WEBHOOK_MESSAGE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">webhook</span><span class="o">=</span><span class="n">webhook_id</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">no_auth</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_gateway_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GATEWAY</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="c1"># This doesn&#39;t need authorization.</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">no_auth</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">]</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">url</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_gateway_bot_info</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">sessions</span><span class="o">.</span><span class="n">GatewayBotInfo</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GATEWAY_BOT</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_gateway_bot_info</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_invite</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">invite</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">invites</span><span class="o">.</span><span class="n">InviteCode</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">invites</span><span class="o">.</span><span class="n">Invite</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_INVITE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">invite_code</span><span class="o">=</span><span class="n">invite</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">invite</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">invite</span><span class="o">.</span><span class="n">code</span><span class="p">)</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">StringMapBuilder</span><span class="p">()</span>
        <span class="n">query</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;with_counts&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="n">query</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;with_expiration&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="n">query</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_invite</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_invite</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">invite</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">invites</span><span class="o">.</span><span class="n">InviteCode</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">invites</span><span class="o">.</span><span class="n">Invite</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_INVITE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">invite_code</span><span class="o">=</span><span class="n">invite</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">invite</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">invite</span><span class="o">.</span><span class="n">code</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_invite</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_my_user</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">users</span><span class="o">.</span><span class="n">OwnUser</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_MY_USER</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_my_user</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_my_user</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">username</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">avatar</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">users</span><span class="o">.</span><span class="n">OwnUser</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_MY_USER</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;username&quot;</span><span class="p">,</span> <span class="n">username</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">avatar</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;avatar&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">avatar</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">avatar_resource</span> <span class="o">=</span> <span class="n">files</span><span class="o">.</span><span class="n">ensure_resource</span><span class="p">(</span><span class="n">avatar</span><span class="p">)</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">avatar_resource</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
                <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;avatar&quot;</span><span class="p">,</span> <span class="k">await</span> <span class="n">stream</span><span class="o">.</span><span class="n">data_uri</span><span class="p">())</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_my_user</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_my_connections</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">applications</span><span class="o">.</span><span class="n">OwnConnection</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_MY_CONNECTIONS</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_own_connection</span><span class="p">(</span><span class="n">connection_payload</span><span class="p">)</span> <span class="k">for</span> <span class="n">connection_payload</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">fetch_my_guilds</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">newest_first</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">start_at</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SearchableSnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">iterators</span><span class="o">.</span><span class="n">LazyIterator</span><span class="p">[</span><span class="n">applications</span><span class="o">.</span><span class="n">OwnGuild</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">start_at</span> <span class="ow">is</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">start_at</span> <span class="o">=</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="k">if</span> <span class="n">newest_first</span> <span class="k">else</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">start_at</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">):</span>
            <span class="n">start_at</span> <span class="o">=</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="o">.</span><span class="n">from_datetime</span><span class="p">(</span><span class="n">start_at</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">start_at</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">start_at</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">special_endpoints_impl</span><span class="o">.</span><span class="n">OwnGuildIterator</span><span class="p">(</span>
            <span class="n">entity_factory</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="p">,</span>
            <span class="n">request_call</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">,</span>
            <span class="n">newest_first</span><span class="o">=</span><span class="n">newest_first</span><span class="p">,</span>
            <span class="n">first_id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">start_at</span><span class="p">),</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">leave_guild</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_MY_GUILD</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_dm_channel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">channels_</span><span class="o">.</span><span class="n">DMChannel</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_MY_CHANNELS</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;recipient_id&quot;</span><span class="p">,</span> <span class="n">user</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="n">channel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_dm</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cache</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_cache</span><span class="o">.</span><span class="n">set_dm_channel_id</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">channel</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">channel</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_application</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">applications</span><span class="o">.</span><span class="n">Application</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_MY_APPLICATION</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_application</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_authorization</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">applications</span><span class="o">.</span><span class="n">AuthorizationInformation</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_MY_AUTHORIZATION</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_authorization_information</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_gen_oauth2_token</span><span class="p">(</span><span class="n">client</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span> <span class="n">client_secret</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">token</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">client</span><span class="p">)</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">client_secret</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">applications</span><span class="o">.</span><span class="n">TokenType</span><span class="o">.</span><span class="n">BASIC</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">token</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">authorize_client_credentials_token</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">client</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">client_secret</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">scopes</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">applications</span><span class="o">.</span><span class="n">OAuth2Scope</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">applications</span><span class="o">.</span><span class="n">PartialOAuth2Token</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_TOKEN</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="n">form</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">URLEncodedFormBuilder</span><span class="p">()</span>
        <span class="n">form</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">&quot;grant_type&quot;</span><span class="p">,</span> <span class="s2">&quot;client_credentials&quot;</span><span class="p">)</span>
        <span class="n">form</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">&quot;scope&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">scopes</span><span class="p">))</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">form_builder</span><span class="o">=</span><span class="n">form</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_gen_oauth2_token</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">client_secret</span><span class="p">))</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_partial_token</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">authorize_access_token</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">client</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">client_secret</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">code</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">redirect_uri</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">applications</span><span class="o">.</span><span class="n">OAuth2AuthorizationToken</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_TOKEN</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="n">form</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">URLEncodedFormBuilder</span><span class="p">()</span>
        <span class="n">form</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">&quot;grant_type&quot;</span><span class="p">,</span> <span class="s2">&quot;authorization_code&quot;</span><span class="p">)</span>
        <span class="n">form</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">&quot;code&quot;</span><span class="p">,</span> <span class="n">code</span><span class="p">)</span>
        <span class="n">form</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">&quot;redirect_uri&quot;</span><span class="p">,</span> <span class="n">redirect_uri</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">form_builder</span><span class="o">=</span><span class="n">form</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_gen_oauth2_token</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">client_secret</span><span class="p">))</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_authorization_token</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">refresh_access_token</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">client</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">client_secret</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">refresh_token</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">scopes</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">applications</span><span class="o">.</span><span class="n">OAuth2Scope</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">applications</span><span class="o">.</span><span class="n">OAuth2AuthorizationToken</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_TOKEN</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="n">form</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">URLEncodedFormBuilder</span><span class="p">()</span>
        <span class="n">form</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">&quot;grant_type&quot;</span><span class="p">,</span> <span class="s2">&quot;refresh_token&quot;</span><span class="p">)</span>
        <span class="n">form</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">&quot;refresh_token&quot;</span><span class="p">,</span> <span class="n">refresh_token</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">scopes</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">form</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">&quot;scope&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">scopes</span><span class="p">))</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">form_builder</span><span class="o">=</span><span class="n">form</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_gen_oauth2_token</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">client_secret</span><span class="p">))</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_authorization_token</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">revoke_access_token</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">client</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">client_secret</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">token</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">applications</span><span class="o">.</span><span class="n">PartialOAuth2Token</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_TOKEN_REVOKE</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="n">form</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">URLEncodedFormBuilder</span><span class="p">()</span>
        <span class="n">form</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">&quot;token&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">token</span><span class="p">))</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">form_builder</span><span class="o">=</span><span class="n">form</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_gen_oauth2_token</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">client_secret</span><span class="p">))</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">add_user_to_guild</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">access_token</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">applications</span><span class="o">.</span><span class="n">PartialOAuth2Token</span><span class="p">],</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">nick</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">roles</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">mute</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">deaf</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">Member</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PUT_GUILD_MEMBER</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;access_token&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">access_token</span><span class="p">))</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;nick&quot;</span><span class="p">,</span> <span class="n">nick</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;mute&quot;</span><span class="p">,</span> <span class="n">mute</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;deaf&quot;</span><span class="p">,</span> <span class="n">deaf</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake_array</span><span class="p">(</span><span class="s2">&quot;roles&quot;</span><span class="p">,</span> <span class="n">roles</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">response</span> <span class="o">:=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_member</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># User already is in the guild.</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_voice_regions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">voices</span><span class="o">.</span><span class="n">VoiceRegion</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_VOICE_REGIONS</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_voice_region</span><span class="p">(</span><span class="n">voice_region_payload</span><span class="p">)</span> <span class="k">for</span> <span class="n">voice_region_payload</span> <span class="ow">in</span> <span class="n">response</span>
        <span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">users</span><span class="o">.</span><span class="n">User</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_USER</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_user</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">fetch_audit_log</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">before</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SearchableSnowflakeishOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Unique</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">event_type</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">audit_logs</span><span class="o">.</span><span class="n">AuditLogEventType</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">iterators</span><span class="o">.</span><span class="n">LazyIterator</span><span class="p">[</span><span class="n">audit_logs</span><span class="o">.</span><span class="n">AuditLog</span><span class="p">]:</span>

        <span class="n">timestamp</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">before</span> <span class="ow">is</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">timestamp</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">before</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">):</span>
            <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="o">.</span><span class="n">from_datetime</span><span class="p">(</span><span class="n">before</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">before</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">special_endpoints_impl</span><span class="o">.</span><span class="n">AuditLogIterator</span><span class="p">(</span>
            <span class="n">entity_factory</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="p">,</span>
            <span class="n">request_call</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">,</span>
            <span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span>
            <span class="n">before</span><span class="o">=</span><span class="n">timestamp</span><span class="p">,</span>
            <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">,</span>
            <span class="n">action_type</span><span class="o">=</span><span class="n">event_type</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_emoji</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">emoji</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">emojis</span><span class="o">.</span><span class="n">CustomEmoji</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">emojis</span><span class="o">.</span><span class="n">KnownCustomEmoji</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_EMOJI</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">emoji</span><span class="o">=</span><span class="n">emoji</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_known_custom_emoji</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">))</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_guild_emojis</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">emojis</span><span class="o">.</span><span class="n">KnownCustomEmoji</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_EMOJIS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="n">guild_id</span> <span class="o">=</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_known_custom_emoji</span><span class="p">(</span><span class="n">emoji_payload</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">guild_id</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">emoji_payload</span> <span class="ow">in</span> <span class="n">response</span>
        <span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_emoji</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">image</span><span class="p">:</span> <span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">roles</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">emojis</span><span class="o">.</span><span class="n">KnownCustomEmoji</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_GUILD_EMOJIS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">image_resource</span> <span class="o">=</span> <span class="n">files</span><span class="o">.</span><span class="n">ensure_resource</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
        <span class="k">async</span> <span class="k">with</span> <span class="n">image_resource</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;image&quot;</span><span class="p">,</span> <span class="k">await</span> <span class="n">stream</span><span class="o">.</span><span class="n">data_uri</span><span class="p">())</span>

        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake_array</span><span class="p">(</span><span class="s2">&quot;roles&quot;</span><span class="p">,</span> <span class="n">roles</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_known_custom_emoji</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">))</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_emoji</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">emoji</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">emojis</span><span class="o">.</span><span class="n">CustomEmoji</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">roles</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">emojis</span><span class="o">.</span><span class="n">KnownCustomEmoji</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_GUILD_EMOJI</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">emoji</span><span class="o">=</span><span class="n">emoji</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake_array</span><span class="p">(</span><span class="s2">&quot;roles&quot;</span><span class="p">,</span> <span class="n">roles</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_known_custom_emoji</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">))</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_emoji</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">emoji</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">emojis</span><span class="o">.</span><span class="n">CustomEmoji</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_GUILD_EMOJI</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">emoji</span><span class="o">=</span><span class="n">emoji</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_available_sticker_packs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">stickers</span><span class="o">.</span><span class="n">StickerPack</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_STICKER_PACKS</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">no_auth</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_sticker_pack</span><span class="p">(</span><span class="n">sticker_pack_payload</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">sticker_pack_payload</span> <span class="ow">in</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;sticker_packs&quot;</span><span class="p">]</span>
        <span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_sticker</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">sticker</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">stickers</span><span class="o">.</span><span class="n">PartialSticker</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">stickers</span><span class="o">.</span><span class="n">StandardSticker</span><span class="p">,</span> <span class="n">stickers</span><span class="o">.</span><span class="n">GuildSticker</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_STICKER</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">sticker</span><span class="o">=</span><span class="n">sticker</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_guild_sticker</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
            <span class="k">if</span> <span class="s2">&quot;guild_id&quot;</span> <span class="ow">in</span> <span class="n">response</span>
            <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_standard_sticker</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_guild_stickers</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">stickers</span><span class="o">.</span><span class="n">GuildSticker</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_STICKERS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_guild_sticker</span><span class="p">(</span><span class="n">guild_sticker_payload</span><span class="p">)</span> <span class="k">for</span> <span class="n">guild_sticker_payload</span> <span class="ow">in</span> <span class="n">response</span>
        <span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_guild_sticker</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">sticker</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">stickers</span><span class="o">.</span><span class="n">PartialSticker</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">stickers</span><span class="o">.</span><span class="n">GuildSticker</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_STICKER</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">sticker</span><span class="o">=</span><span class="n">sticker</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_guild_sticker</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_sticker</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">tag</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">image</span><span class="p">:</span> <span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">stickers</span><span class="o">.</span><span class="n">GuildSticker</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_GUILD_STICKERS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">form</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">URLEncodedFormBuilder</span><span class="p">(</span><span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">)</span>
        <span class="n">form</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">form</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">&quot;tags&quot;</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
        <span class="n">form</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="n">description</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="n">form</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="s2">&quot;file&quot;</span><span class="p">,</span> <span class="n">files</span><span class="o">.</span><span class="n">ensure_resource</span><span class="p">(</span><span class="n">image</span><span class="p">))</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">form_builder</span><span class="o">=</span><span class="n">form</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_guild_sticker</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_sticker</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">sticker</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">stickers</span><span class="o">.</span><span class="n">PartialSticker</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">tag</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">stickers</span><span class="o">.</span><span class="n">GuildSticker</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_GUILD_STICKER</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">sticker</span><span class="o">=</span><span class="n">sticker</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;tags&quot;</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="n">description</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_guild_sticker</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_sticker</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">sticker</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">stickers</span><span class="o">.</span><span class="n">PartialSticker</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_GUILD_STICKER</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">sticker</span><span class="o">=</span><span class="n">sticker</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">guild_builder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">special_endpoints</span><span class="o">.</span><span class="n">GuildBuilder</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">special_endpoints_impl</span><span class="o">.</span><span class="n">GuildBuilder</span><span class="p">(</span>
            <span class="n">entity_factory</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="p">,</span> <span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">,</span> <span class="n">request_call</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_guild</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">guilds</span><span class="o">.</span><span class="n">RESTGuild</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">StringMapBuilder</span><span class="p">()</span>
        <span class="n">query</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;with_counts&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="n">query</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_rest_guild</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_guild_preview</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">guilds</span><span class="o">.</span><span class="n">GuildPreview</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_PREVIEW</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_guild_preview</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_guild</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">verification_level</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">GuildVerificationLevel</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">default_message_notifications</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">guilds</span><span class="o">.</span><span class="n">GuildMessageNotificationsLevel</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">explicit_content_filter_level</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">guilds</span><span class="o">.</span><span class="n">GuildExplicitContentFilterLevel</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">afk_channel</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildVoiceChannel</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">afk_timeout</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">time</span><span class="o">.</span><span class="n">Intervalish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">icon</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">owner</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">splash</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">banner</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">system_channel</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span>
            <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildTextChannel</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">rules_channel</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span>
            <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildTextChannel</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">public_updates_channel</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span>
            <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildTextChannel</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">preferred_locale</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">guilds</span><span class="o">.</span><span class="n">RESTGuild</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_GUILD</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;verification_level&quot;</span><span class="p">,</span> <span class="n">verification_level</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;default_message_notifications&quot;</span><span class="p">,</span> <span class="n">default_message_notifications</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;explicit_content_filter&quot;</span><span class="p">,</span> <span class="n">explicit_content_filter_level</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;afk_timeout&quot;</span><span class="p">,</span> <span class="n">afk_timeout</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">timespan_to_int</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;preferred_locale&quot;</span><span class="p">,</span> <span class="n">preferred_locale</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;afk_channel_id&quot;</span><span class="p">,</span> <span class="n">afk_channel</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;owner_id&quot;</span><span class="p">,</span> <span class="n">owner</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;system_channel_id&quot;</span><span class="p">,</span> <span class="n">system_channel</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;rules_channel_id&quot;</span><span class="p">,</span> <span class="n">rules_channel</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;public_updates_channel_id&quot;</span><span class="p">,</span> <span class="n">public_updates_channel</span><span class="p">)</span>

        <span class="n">tasks</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">asyncio</span><span class="o">.</span><span class="n">Task</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="n">icon</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;icon&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">icon</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">icon_resource</span> <span class="o">=</span> <span class="n">files</span><span class="o">.</span><span class="n">ensure_resource</span><span class="p">(</span><span class="n">icon</span><span class="p">)</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">icon_resource</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
                <span class="n">task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">stream</span><span class="o">.</span><span class="n">data_uri</span><span class="p">())</span>
                <span class="n">task</span><span class="o">.</span><span class="n">add_done_callback</span><span class="p">(</span><span class="k">lambda</span> <span class="n">future</span><span class="p">:</span> <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;icon&quot;</span><span class="p">,</span> <span class="n">future</span><span class="o">.</span><span class="n">result</span><span class="p">()))</span>
                <span class="n">tasks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">splash</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;splash&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">splash</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">splash_resource</span> <span class="o">=</span> <span class="n">files</span><span class="o">.</span><span class="n">ensure_resource</span><span class="p">(</span><span class="n">splash</span><span class="p">)</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">splash_resource</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
                <span class="n">task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">stream</span><span class="o">.</span><span class="n">data_uri</span><span class="p">())</span>
                <span class="n">task</span><span class="o">.</span><span class="n">add_done_callback</span><span class="p">(</span><span class="k">lambda</span> <span class="n">future</span><span class="p">:</span> <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;splash&quot;</span><span class="p">,</span> <span class="n">future</span><span class="o">.</span><span class="n">result</span><span class="p">()))</span>
                <span class="n">tasks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">banner</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;banner&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">banner</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">banner_resource</span> <span class="o">=</span> <span class="n">files</span><span class="o">.</span><span class="n">ensure_resource</span><span class="p">(</span><span class="n">banner</span><span class="p">)</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">banner_resource</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
                <span class="n">task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">stream</span><span class="o">.</span><span class="n">data_uri</span><span class="p">())</span>
                <span class="n">task</span><span class="o">.</span><span class="n">add_done_callback</span><span class="p">(</span><span class="k">lambda</span> <span class="n">future</span><span class="p">:</span> <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;banner&quot;</span><span class="p">,</span> <span class="n">future</span><span class="o">.</span><span class="n">result</span><span class="p">()))</span>
                <span class="n">tasks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>

        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span><span class="o">*</span><span class="n">tasks</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_rest_guild</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_guild</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_GUILD</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_guild_channels</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildChannel</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_CHANNELS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="n">channel_sequence</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_channel</span><span class="p">(</span><span class="n">channel_payload</span><span class="p">)</span> <span class="k">for</span> <span class="n">channel_payload</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>
        <span class="c1"># Will always be guild channels unless Discord messes up severely on something!</span>
        <span class="k">return</span> <span class="n">typing</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="s2">&quot;typing.Sequence[channels_.GuildChannel]&quot;</span><span class="p">,</span> <span class="n">channel_sequence</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_guild_text_channel</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">topic</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">nsfw</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">rate_limit_per_user</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">time</span><span class="o">.</span><span class="n">Intervalish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">permission_overwrites</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">PermissionOverwrite</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">category</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildCategory</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">channels_</span><span class="o">.</span><span class="n">GuildTextChannel</span><span class="p">:</span>
        <span class="n">channel</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_guild_channel</span><span class="p">(</span>
            <span class="n">guild</span><span class="p">,</span>
            <span class="n">name</span><span class="p">,</span>
            <span class="n">channels_</span><span class="o">.</span><span class="n">ChannelType</span><span class="o">.</span><span class="n">GUILD_TEXT</span><span class="p">,</span>
            <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
            <span class="n">topic</span><span class="o">=</span><span class="n">topic</span><span class="p">,</span>
            <span class="n">nsfw</span><span class="o">=</span><span class="n">nsfw</span><span class="p">,</span>
            <span class="n">rate_limit_per_user</span><span class="o">=</span><span class="n">rate_limit_per_user</span><span class="p">,</span>
            <span class="n">permission_overwrites</span><span class="o">=</span><span class="n">permission_overwrites</span><span class="p">,</span>
            <span class="n">category</span><span class="o">=</span><span class="n">category</span><span class="p">,</span>
            <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">channels_</span><span class="o">.</span><span class="n">GuildTextChannel</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">channel</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_guild_news_channel</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">topic</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">nsfw</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">rate_limit_per_user</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">time</span><span class="o">.</span><span class="n">Intervalish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">permission_overwrites</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">PermissionOverwrite</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">category</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildCategory</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">channels_</span><span class="o">.</span><span class="n">GuildNewsChannel</span><span class="p">:</span>
        <span class="n">channel</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_guild_channel</span><span class="p">(</span>
            <span class="n">guild</span><span class="p">,</span>
            <span class="n">name</span><span class="p">,</span>
            <span class="n">channels_</span><span class="o">.</span><span class="n">ChannelType</span><span class="o">.</span><span class="n">GUILD_NEWS</span><span class="p">,</span>
            <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
            <span class="n">topic</span><span class="o">=</span><span class="n">topic</span><span class="p">,</span>
            <span class="n">nsfw</span><span class="o">=</span><span class="n">nsfw</span><span class="p">,</span>
            <span class="n">rate_limit_per_user</span><span class="o">=</span><span class="n">rate_limit_per_user</span><span class="p">,</span>
            <span class="n">permission_overwrites</span><span class="o">=</span><span class="n">permission_overwrites</span><span class="p">,</span>
            <span class="n">category</span><span class="o">=</span><span class="n">category</span><span class="p">,</span>
            <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">channels_</span><span class="o">.</span><span class="n">GuildNewsChannel</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">channel</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_guild_voice_channel</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">user_limit</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">bitrate</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">video_quality_mode</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">VideoQualityMode</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">permission_overwrites</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">PermissionOverwrite</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">region</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">voices</span><span class="o">.</span><span class="n">VoiceRegion</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">category</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildCategory</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">channels_</span><span class="o">.</span><span class="n">GuildVoiceChannel</span><span class="p">:</span>
        <span class="n">channel</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_guild_channel</span><span class="p">(</span>
            <span class="n">guild</span><span class="p">,</span>
            <span class="n">name</span><span class="p">,</span>
            <span class="n">channels_</span><span class="o">.</span><span class="n">ChannelType</span><span class="o">.</span><span class="n">GUILD_VOICE</span><span class="p">,</span>
            <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
            <span class="n">user_limit</span><span class="o">=</span><span class="n">user_limit</span><span class="p">,</span>
            <span class="n">bitrate</span><span class="o">=</span><span class="n">bitrate</span><span class="p">,</span>
            <span class="n">video_quality_mode</span><span class="o">=</span><span class="n">video_quality_mode</span><span class="p">,</span>
            <span class="n">permission_overwrites</span><span class="o">=</span><span class="n">permission_overwrites</span><span class="p">,</span>
            <span class="n">region</span><span class="o">=</span><span class="n">region</span><span class="p">,</span>
            <span class="n">category</span><span class="o">=</span><span class="n">category</span><span class="p">,</span>
            <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">channels_</span><span class="o">.</span><span class="n">GuildVoiceChannel</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">channel</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_guild_stage_channel</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">user_limit</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">bitrate</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">permission_overwrites</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">PermissionOverwrite</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">region</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">voices</span><span class="o">.</span><span class="n">VoiceRegion</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">category</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildCategory</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">channels_</span><span class="o">.</span><span class="n">GuildStageChannel</span><span class="p">:</span>
        <span class="n">channel</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_guild_channel</span><span class="p">(</span>
            <span class="n">guild</span><span class="p">,</span>
            <span class="n">name</span><span class="p">,</span>
            <span class="n">channels_</span><span class="o">.</span><span class="n">ChannelType</span><span class="o">.</span><span class="n">GUILD_STAGE</span><span class="p">,</span>
            <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
            <span class="n">user_limit</span><span class="o">=</span><span class="n">user_limit</span><span class="p">,</span>
            <span class="n">bitrate</span><span class="o">=</span><span class="n">bitrate</span><span class="p">,</span>
            <span class="n">permission_overwrites</span><span class="o">=</span><span class="n">permission_overwrites</span><span class="p">,</span>
            <span class="n">region</span><span class="o">=</span><span class="n">region</span><span class="p">,</span>
            <span class="n">category</span><span class="o">=</span><span class="n">category</span><span class="p">,</span>
            <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">channels_</span><span class="o">.</span><span class="n">GuildStageChannel</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">channel</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_guild_category</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">permission_overwrites</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">PermissionOverwrite</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">channels_</span><span class="o">.</span><span class="n">GuildCategory</span><span class="p">:</span>
        <span class="n">channel</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_guild_channel</span><span class="p">(</span>
            <span class="n">guild</span><span class="p">,</span>
            <span class="n">name</span><span class="p">,</span>
            <span class="n">channels_</span><span class="o">.</span><span class="n">ChannelType</span><span class="o">.</span><span class="n">GUILD_CATEGORY</span><span class="p">,</span>
            <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
            <span class="n">permission_overwrites</span><span class="o">=</span><span class="n">permission_overwrites</span><span class="p">,</span>
            <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">channels_</span><span class="o">.</span><span class="n">GuildCategory</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">channel</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">_create_guild_channel</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">type_</span><span class="p">:</span> <span class="n">channels_</span><span class="o">.</span><span class="n">ChannelType</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">topic</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">nsfw</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">bitrate</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">video_quality_mode</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">VideoQualityMode</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">user_limit</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">rate_limit_per_user</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">time</span><span class="o">.</span><span class="n">Intervalish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">permission_overwrites</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">PermissionOverwrite</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">region</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">voices</span><span class="o">.</span><span class="n">VoiceRegion</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">category</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildCategory</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">channels_</span><span class="o">.</span><span class="n">GuildChannel</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_GUILD_CHANNELS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="n">type_</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;position&quot;</span><span class="p">,</span> <span class="n">position</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;topic&quot;</span><span class="p">,</span> <span class="n">topic</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;nsfw&quot;</span><span class="p">,</span> <span class="n">nsfw</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;bitrate&quot;</span><span class="p">,</span> <span class="n">bitrate</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;video_quality_mode&quot;</span><span class="p">,</span> <span class="n">video_quality_mode</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;user_limit&quot;</span><span class="p">,</span> <span class="n">user_limit</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;rate_limit_per_user&quot;</span><span class="p">,</span> <span class="n">rate_limit_per_user</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">timespan_to_int</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;rtc_region&quot;</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;parent_id&quot;</span><span class="p">,</span> <span class="n">category</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_array</span><span class="p">(</span>
            <span class="s2">&quot;permission_overwrites&quot;</span><span class="p">,</span>
            <span class="n">permission_overwrites</span><span class="p">,</span>
            <span class="n">conversion</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">serialize_permission_overwrite</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="n">channel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_channel</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">channels_</span><span class="o">.</span><span class="n">GuildChannel</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">channel</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">reposition_channels</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">positions</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildChannel</span><span class="p">]],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_GUILD_CHANNELS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">channel</span><span class="p">)),</span> <span class="s2">&quot;position&quot;</span><span class="p">:</span> <span class="n">pos</span><span class="p">}</span> <span class="k">for</span> <span class="n">pos</span><span class="p">,</span> <span class="n">channel</span> <span class="ow">in</span> <span class="n">positions</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_member</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">guilds</span><span class="o">.</span><span class="n">Member</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_MEMBER</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_member</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">fetch_members</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">iterators</span><span class="o">.</span><span class="n">LazyIterator</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">Member</span><span class="p">]:</span>
        <span class="k">return</span> <span class="n">special_endpoints_impl</span><span class="o">.</span><span class="n">MemberIterator</span><span class="p">(</span>
            <span class="n">entity_factory</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="p">,</span> <span class="n">request_call</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">,</span> <span class="n">guild</span><span class="o">=</span><span class="n">guild</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">search_members</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">Member</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_MEMBERS_SEARCH</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">StringMapBuilder</span><span class="p">()</span>
        <span class="n">query</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;query&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">query</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;limit&quot;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="n">query</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="n">guild_id</span> <span class="o">=</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_member</span><span class="p">(</span><span class="n">member_payload</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">guild_id</span><span class="p">)</span> <span class="k">for</span> <span class="n">member_payload</span> <span class="ow">in</span> <span class="n">response</span>
        <span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_member</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">nick</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">roles</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">mute</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">deaf</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">voice_channel</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span>
            <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildVoiceChannel</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">guilds</span><span class="o">.</span><span class="n">Member</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_GUILD_MEMBER</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;nick&quot;</span><span class="p">,</span> <span class="n">nick</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;mute&quot;</span><span class="p">,</span> <span class="n">mute</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;deaf&quot;</span><span class="p">,</span> <span class="n">deaf</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake_array</span><span class="p">(</span><span class="s2">&quot;roles&quot;</span><span class="p">,</span> <span class="n">roles</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">voice_channel</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;channel_id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">voice_channel</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;channel_id&quot;</span><span class="p">,</span> <span class="n">voice_channel</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_member</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">))</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_my_member</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">nickname</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">guilds</span><span class="o">.</span><span class="n">Member</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_MY_GUILD_MEMBER</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;nick&quot;</span><span class="p">,</span> <span class="n">nickname</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_member</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">))</span>

    <span class="nd">@deprecation</span><span class="o">.</span><span class="n">deprecated</span><span class="p">(</span><span class="s2">&quot;2.0.0.dev104&quot;</span><span class="p">,</span> <span class="s2">&quot;Use `edit_my_member`&#39;s `nick` argument instead.&quot;</span><span class="p">)</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_my_nick</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">Guild</span><span class="p">],</span>
        <span class="n">nick</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">edit_my_member</span><span class="p">(</span><span class="n">guild</span><span class="p">,</span> <span class="n">nickname</span><span class="o">=</span><span class="n">nick</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">add_role_to_member</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span>
        <span class="n">role</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PUT_GUILD_MEMBER_ROLE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="n">role</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">remove_role_from_member</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span>
        <span class="n">role</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_GUILD_MEMBER_ROLE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="n">role</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">kick_user</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_GUILD_MEMBER</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">kick_member</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Coroutine</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">kick_user</span><span class="p">(</span><span class="n">guild</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">ban_user</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">delete_message_days</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;delete_message_days&quot;</span><span class="p">,</span> <span class="n">delete_message_days</span><span class="p">)</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PUT_GUILD_BAN</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">ban_member</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">delete_message_days</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Coroutine</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ban_user</span><span class="p">(</span><span class="n">guild</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">delete_message_days</span><span class="o">=</span><span class="n">delete_message_days</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">unban_user</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_GUILD_BAN</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">unban_member</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Coroutine</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">unban_user</span><span class="p">(</span><span class="n">guild</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_ban</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">guilds</span><span class="o">.</span><span class="n">GuildBan</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_BAN</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_guild_member_ban</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_bans</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">GuildBan</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_BANS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_guild_member_ban</span><span class="p">(</span><span class="n">ban_payload</span><span class="p">)</span> <span class="k">for</span> <span class="n">ban_payload</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_roles</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">Role</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_ROLES</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="n">guild_id</span> <span class="o">=</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_role</span><span class="p">(</span><span class="n">role_payload</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">guild_id</span><span class="p">)</span> <span class="k">for</span> <span class="n">role_payload</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_role</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">permissions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">permissions_</span><span class="o">.</span><span class="n">Permissions</span><span class="p">]</span> <span class="o">=</span> <span class="n">permissions_</span><span class="o">.</span><span class="n">Permissions</span><span class="o">.</span><span class="n">NONE</span><span class="p">,</span>
        <span class="n">color</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">colors</span><span class="o">.</span><span class="n">Colorish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">colour</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">colors</span><span class="o">.</span><span class="n">Colorish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">hoist</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">icon</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">unicode_emoji</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">mentionable</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">guilds</span><span class="o">.</span><span class="n">Role</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">any_undefined</span><span class="p">(</span><span class="n">color</span><span class="p">,</span> <span class="n">colour</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Can not specify &#39;color&#39; and &#39;colour&#39; together.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">any_undefined</span><span class="p">(</span><span class="n">icon</span><span class="p">,</span> <span class="n">unicode_emoji</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Can not specify &#39;icon&#39; and &#39;unicode_emoji&#39; together.&quot;</span><span class="p">)</span>

        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_GUILD_ROLES</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;permissions&quot;</span><span class="p">,</span> <span class="n">permissions</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="n">colors</span><span class="o">.</span><span class="n">Color</span><span class="o">.</span><span class="n">of</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="n">colour</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="n">colors</span><span class="o">.</span><span class="n">Color</span><span class="o">.</span><span class="n">of</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;hoist&quot;</span><span class="p">,</span> <span class="n">hoist</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;unicode_emoji&quot;</span><span class="p">,</span> <span class="n">unicode_emoji</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;mentionable&quot;</span><span class="p">,</span> <span class="n">mentionable</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">icon</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">icon_resource</span> <span class="o">=</span> <span class="n">files</span><span class="o">.</span><span class="n">ensure_resource</span><span class="p">(</span><span class="n">icon</span><span class="p">)</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">icon_resource</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
                <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;icon&quot;</span><span class="p">,</span> <span class="k">await</span> <span class="n">stream</span><span class="o">.</span><span class="n">data_uri</span><span class="p">())</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_role</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">))</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">reposition_roles</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">positions</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">]],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_GUILD_ROLES</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">role</span><span class="p">)),</span> <span class="s2">&quot;position&quot;</span><span class="p">:</span> <span class="n">pos</span><span class="p">}</span> <span class="k">for</span> <span class="n">pos</span><span class="p">,</span> <span class="n">role</span> <span class="ow">in</span> <span class="n">positions</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_role</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">role</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">permissions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">permissions_</span><span class="o">.</span><span class="n">Permissions</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">color</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">colors</span><span class="o">.</span><span class="n">Colorish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">colour</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">colors</span><span class="o">.</span><span class="n">Colorish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">hoist</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">icon</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">unicode_emoji</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">mentionable</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">guilds</span><span class="o">.</span><span class="n">Role</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">any_undefined</span><span class="p">(</span><span class="n">color</span><span class="p">,</span> <span class="n">colour</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Can not specify &#39;color&#39; and &#39;colour&#39; together.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">any_undefined</span><span class="p">(</span><span class="n">icon</span><span class="p">,</span> <span class="n">unicode_emoji</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Can not specify &#39;icon&#39; and &#39;unicode_emoji&#39; together.&quot;</span><span class="p">)</span>

        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_GUILD_ROLE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="n">role</span><span class="p">)</span>

        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;permissions&quot;</span><span class="p">,</span> <span class="n">permissions</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="n">colors</span><span class="o">.</span><span class="n">Color</span><span class="o">.</span><span class="n">of</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="n">colour</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="n">colors</span><span class="o">.</span><span class="n">Color</span><span class="o">.</span><span class="n">of</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;hoist&quot;</span><span class="p">,</span> <span class="n">hoist</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;unicode_emoji&quot;</span><span class="p">,</span> <span class="n">unicode_emoji</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;mentionable&quot;</span><span class="p">,</span> <span class="n">mentionable</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">icon</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;icon&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">icon</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">icon_resource</span> <span class="o">=</span> <span class="n">files</span><span class="o">.</span><span class="n">ensure_resource</span><span class="p">(</span><span class="n">icon</span><span class="p">)</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">icon_resource</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
                <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;icon&quot;</span><span class="p">,</span> <span class="k">await</span> <span class="n">stream</span><span class="o">.</span><span class="n">data_uri</span><span class="p">())</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_role</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">))</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_role</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">role</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_GUILD_ROLE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="n">role</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">estimate_guild_prune_count</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">days</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">include_roles</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_PRUNE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">StringMapBuilder</span><span class="p">()</span>
        <span class="n">query</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;days&quot;</span><span class="p">,</span> <span class="n">days</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">include_roles</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">roles</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">role</span><span class="p">))</span> <span class="k">for</span> <span class="n">role</span> <span class="ow">in</span> <span class="n">include_roles</span><span class="p">)</span>
            <span class="n">query</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;include_roles&quot;</span><span class="p">,</span> <span class="n">roles</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="n">query</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">response</span><span class="p">[</span><span class="s2">&quot;pruned&quot;</span><span class="p">])</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">begin_guild_prune</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">days</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">compute_prune_count</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">include_roles</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_GUILD_PRUNE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;days&quot;</span><span class="p">,</span> <span class="n">days</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;compute_prune_count&quot;</span><span class="p">,</span> <span class="n">compute_prune_count</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake_array</span><span class="p">(</span><span class="s2">&quot;include_roles&quot;</span><span class="p">,</span> <span class="n">include_roles</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="n">pruned</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;pruned&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">pruned</span><span class="p">)</span> <span class="k">if</span> <span class="n">pruned</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_guild_voice_regions</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">voices</span><span class="o">.</span><span class="n">VoiceRegion</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_VOICE_REGIONS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_voice_region</span><span class="p">(</span><span class="n">voice_region_payload</span><span class="p">)</span> <span class="k">for</span> <span class="n">voice_region_payload</span> <span class="ow">in</span> <span class="n">response</span>
        <span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_guild_invites</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">invites</span><span class="o">.</span><span class="n">InviteWithMetadata</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_INVITES</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_invite_with_metadata</span><span class="p">(</span><span class="n">invite_payload</span><span class="p">)</span> <span class="k">for</span> <span class="n">invite_payload</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_integrations</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">Integration</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_INTEGRATIONS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="n">guild_id</span> <span class="o">=</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_integration</span><span class="p">(</span><span class="n">integration_payload</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">guild_id</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">integration_payload</span> <span class="ow">in</span> <span class="n">response</span>
        <span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_widget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">guilds</span><span class="o">.</span><span class="n">GuildWidget</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_WIDGET</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_guild_widget</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_widget</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildChannel</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">enabled</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">guilds</span><span class="o">.</span><span class="n">GuildWidget</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_GUILD_WIDGET</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>

        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;enabled&quot;</span><span class="p">,</span> <span class="n">enabled</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">channel</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;channel&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">channel</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;channel&quot;</span><span class="p">,</span> <span class="n">channel</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_guild_widget</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_welcome_screen</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">guilds</span><span class="o">.</span><span class="n">WelcomeScreen</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_WELCOME_SCREEN</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_welcome_screen</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_welcome_screen</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">enabled</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">channels</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">WelcomeChannel</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">guilds</span><span class="o">.</span><span class="n">WelcomeScreen</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_GUILD_WELCOME_SCREEN</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>

        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>

        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="n">description</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;enabled&quot;</span><span class="p">,</span> <span class="n">enabled</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">channels</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put_array</span><span class="p">(</span><span class="s2">&quot;welcome_channels&quot;</span><span class="p">,</span> <span class="n">channels</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">serialize_welcome_channel</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;welcome_channels&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_welcome_screen</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_vanity_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">invites</span><span class="o">.</span><span class="n">VanityURL</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_VANITY_URL</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_vanity_url</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_template</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">template</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">templates</span><span class="o">.</span><span class="n">Template</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">templates</span><span class="o">.</span><span class="n">Template</span><span class="p">:</span>
        <span class="n">template</span> <span class="o">=</span> <span class="n">template</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">template</span><span class="o">.</span><span class="n">code</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_TEMPLATE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">template</span><span class="o">=</span><span class="n">template</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_template</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_guild_templates</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">templates</span><span class="o">.</span><span class="n">Template</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_TEMPLATES</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_template</span><span class="p">(</span><span class="n">template_payload</span><span class="p">)</span> <span class="k">for</span> <span class="n">template_payload</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">sync_guild_template</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">template</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">templates</span><span class="o">.</span><span class="n">Template</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">templates</span><span class="o">.</span><span class="n">Template</span><span class="p">:</span>
        <span class="n">template</span> <span class="o">=</span> <span class="n">template</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">template</span><span class="o">.</span><span class="n">code</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PUT_GUILD_TEMPLATE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">template</span><span class="o">=</span><span class="n">template</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_template</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_guild_from_template</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">template</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">templates</span><span class="o">.</span><span class="n">Template</span><span class="p">],</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">icon</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">guilds</span><span class="o">.</span><span class="n">RESTGuild</span><span class="p">:</span>
        <span class="n">template</span> <span class="o">=</span> <span class="n">template</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">template</span><span class="o">.</span><span class="n">code</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_TEMPLATE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">template</span><span class="o">=</span><span class="n">template</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">icon</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">icon_resource</span> <span class="o">=</span> <span class="n">files</span><span class="o">.</span><span class="n">ensure_resource</span><span class="p">(</span><span class="n">icon</span><span class="p">)</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">icon_resource</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
                <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;icon&quot;</span><span class="p">,</span> <span class="k">await</span> <span class="n">stream</span><span class="o">.</span><span class="n">data_uri</span><span class="p">())</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_rest_guild</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_template</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">templates</span><span class="o">.</span><span class="n">Template</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_GUILD_TEMPLATES</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="n">description</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_template</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_template</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">template</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">templates</span><span class="o">.</span><span class="n">Template</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">templates</span><span class="o">.</span><span class="n">Template</span><span class="p">:</span>
        <span class="n">template</span> <span class="o">=</span> <span class="n">template</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">template</span><span class="o">.</span><span class="n">code</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_GUILD_TEMPLATE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">template</span><span class="o">=</span><span class="n">template</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="n">description</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_template</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_template</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">template</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">templates</span><span class="o">.</span><span class="n">Template</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">templates</span><span class="o">.</span><span class="n">Template</span><span class="p">:</span>
        <span class="n">template</span> <span class="o">=</span> <span class="n">template</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">template</span><span class="o">.</span><span class="n">code</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_GUILD_TEMPLATE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">template</span><span class="o">=</span><span class="n">template</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_template</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">command_builder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">special_endpoints</span><span class="o">.</span><span class="n">CommandBuilder</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">special_endpoints_impl</span><span class="o">.</span><span class="n">CommandBuilder</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_application_command</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">application</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">command</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">commands</span><span class="o">.</span><span class="n">Command</span><span class="p">],</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">commands</span><span class="o">.</span><span class="n">Command</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">guild</span> <span class="ow">is</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_APPLICATION_COMMAND</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">command</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_APPLICATION_GUILD_COMMAND</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">command</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_command</span><span class="p">(</span>
            <span class="n">response</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">)</span> <span class="k">if</span> <span class="n">guild</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_application_commands</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">application</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">commands</span><span class="o">.</span><span class="n">Command</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">guild</span> <span class="ow">is</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_APPLICATION_COMMANDS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_APPLICATION_GUILD_COMMANDS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="n">guild_id</span> <span class="o">=</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">)</span> <span class="k">if</span> <span class="n">guild</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">guild_id</span><span class="p">)</span> <span class="k">for</span> <span class="n">command</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_application_command</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">application</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">options</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">commands</span><span class="o">.</span><span class="n">CommandOption</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">default_permission</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">commands</span><span class="o">.</span><span class="n">Command</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">guild</span> <span class="ow">is</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_APPLICATION_COMMAND</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_APPLICATION_GUILD_COMMAND</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>

        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="n">description</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_array</span><span class="p">(</span><span class="s2">&quot;options&quot;</span><span class="p">,</span> <span class="n">options</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">serialize_command_option</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;default_permission&quot;</span><span class="p">,</span> <span class="n">default_permission</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_command</span><span class="p">(</span>
            <span class="n">response</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">)</span> <span class="k">if</span> <span class="n">guild</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">set_application_commands</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">application</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">commands</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">CommandBuilder</span><span class="p">],</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">commands</span><span class="o">.</span><span class="n">Command</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">guild</span> <span class="ow">is</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PUT_APPLICATION_COMMANDS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PUT_APPLICATION_GUILD_COMMANDS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="p">[</span><span class="n">command</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="p">)</span> <span class="k">for</span> <span class="n">command</span> <span class="ow">in</span> <span class="n">commands</span><span class="p">])</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="n">guild_id</span> <span class="o">=</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">)</span> <span class="k">if</span> <span class="n">guild</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_command</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">guild_id</span><span class="p">)</span> <span class="k">for</span> <span class="n">payload</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_application_command</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">application</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">command</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">commands</span><span class="o">.</span><span class="n">Command</span><span class="p">],</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">options</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">commands</span><span class="o">.</span><span class="n">CommandOption</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">commands</span><span class="o">.</span><span class="n">Command</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">guild</span> <span class="ow">is</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_APPLICATION_COMMAND</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">command</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_APPLICATION_GUILD_COMMAND</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
                <span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">command</span><span class="p">,</span> <span class="n">guild</span><span class="o">=</span><span class="n">guild</span>
            <span class="p">)</span>

        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="n">description</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_array</span><span class="p">(</span><span class="s2">&quot;options&quot;</span><span class="p">,</span> <span class="n">options</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">serialize_command_option</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_command</span><span class="p">(</span>
            <span class="n">response</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">)</span> <span class="k">if</span> <span class="n">guild</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_application_command</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">application</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">command</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">commands</span><span class="o">.</span><span class="n">Command</span><span class="p">],</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">guild</span> <span class="ow">is</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_APPLICATION_COMMAND</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">command</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_APPLICATION_GUILD_COMMAND</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
                <span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">command</span><span class="p">,</span> <span class="n">guild</span><span class="o">=</span><span class="n">guild</span>
            <span class="p">)</span>

        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_application_guild_commands_permissions</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">application</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">commands</span><span class="o">.</span><span class="n">GuildCommandPermissions</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_APPLICATION_GUILD_COMMANDS_PERMISSIONS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_guild_command_permissions</span><span class="p">(</span><span class="n">payload</span><span class="p">)</span> <span class="k">for</span> <span class="n">payload</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_application_command_permissions</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">application</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">command</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">commands</span><span class="o">.</span><span class="n">Command</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">commands</span><span class="o">.</span><span class="n">GuildCommandPermissions</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_APPLICATION_COMMAND_PERMISSIONS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
            <span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">command</span>
        <span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_guild_command_permissions</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">set_application_guild_commands_permissions</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">application</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">permissions</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
            <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">commands</span><span class="o">.</span><span class="n">Command</span><span class="p">],</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">commands</span><span class="o">.</span><span class="n">CommandPermission</span><span class="p">]</span>
        <span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">commands</span><span class="o">.</span><span class="n">GuildCommandPermissions</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PUT_APPLICATION_GUILD_COMMANDS_PERMISSIONS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">command</span><span class="p">)),</span>
                <span class="s2">&quot;permissions&quot;</span><span class="p">:</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">serialize_command_permission</span><span class="p">(</span><span class="n">permission</span><span class="p">)</span> <span class="k">for</span> <span class="n">permission</span> <span class="ow">in</span> <span class="n">perms</span><span class="p">],</span>
            <span class="p">}</span>
            <span class="k">for</span> <span class="n">command</span><span class="p">,</span> <span class="n">perms</span> <span class="ow">in</span> <span class="n">permissions</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="p">]</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_guild_command_permissions</span><span class="p">(</span><span class="n">payload</span><span class="p">)</span> <span class="k">for</span> <span class="n">payload</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">set_application_command_permissions</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">application</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">command</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">commands</span><span class="o">.</span><span class="n">Command</span><span class="p">],</span>
        <span class="n">permissions</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">commands</span><span class="o">.</span><span class="n">CommandPermission</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">commands</span><span class="o">.</span><span class="n">GuildCommandPermissions</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PUT_APPLICATION_COMMAND_PERMISSIONS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
            <span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">command</span>
        <span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_array</span><span class="p">(</span><span class="s2">&quot;permissions&quot;</span><span class="p">,</span> <span class="n">permissions</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">serialize_command_permission</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_guild_command_permissions</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">interaction_deferred_builder</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">type_</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">base_interactions</span><span class="o">.</span><span class="n">ResponseType</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> <span class="o">/</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">special_endpoints</span><span class="o">.</span><span class="n">InteractionDeferredBuilder</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">special_endpoints_impl</span><span class="o">.</span><span class="n">InteractionDeferredBuilder</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="n">type_</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">interaction_message_builder</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">type_</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">base_interactions</span><span class="o">.</span><span class="n">ResponseType</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> <span class="o">/</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">special_endpoints</span><span class="o">.</span><span class="n">InteractionMessageBuilder</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">special_endpoints_impl</span><span class="o">.</span><span class="n">InteractionMessageBuilder</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="n">type_</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_interaction_response</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">application</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span> <span class="n">token</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_INTERACTION_RESPONSE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">webhook</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">no_auth</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_message</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_interaction_response</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">interaction</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">base_interactions</span><span class="o">.</span><span class="n">PartialInteraction</span><span class="p">],</span>
        <span class="n">token</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">response_type</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">base_interactions</span><span class="o">.</span><span class="n">ResponseType</span><span class="p">],</span>
        <span class="n">content</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">flags</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">messages_</span><span class="o">.</span><span class="n">MessageFlag</span><span class="p">,</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedType</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">tts</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">component</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">components</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">embed</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">embeds</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">mentions_everyone</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">user_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">role_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">any_undefined</span><span class="p">(</span><span class="n">component</span><span class="p">,</span> <span class="n">components</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;You may only specify one of &#39;component&#39; or &#39;components&#39;, not both&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">any_undefined</span><span class="p">(</span><span class="n">embed</span><span class="p">,</span> <span class="n">embeds</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;You may only specify one of &#39;embed&#39; or &#39;embeds&#39;, not both&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">components</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">components</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Collection</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s2">&quot;You passed a non-collection to &#39;components&#39;, but this expects a collection. Maybe you meant to &quot;</span>
                <span class="s2">&quot;use &#39;component&#39; (singular) instead?&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">embeds</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">_NONE_OR_UNDEFINED</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">embeds</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Collection</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s2">&quot;You passed a non-collection to &#39;embeds&#39;, but this expects a collection. Maybe you meant to &quot;</span>
                <span class="s2">&quot;use &#39;embed&#39; (singular) instead?&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">undefined</span><span class="o">.</span><span class="n">all_undefined</span><span class="p">(</span><span class="n">embed</span><span class="p">,</span> <span class="n">embeds</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">):</span>
            <span class="c1"># Syntactic sugar, common mistake to accidentally send an embed</span>
            <span class="c1"># as the content, so lets detect this and fix it for the user.</span>
            <span class="n">embed</span> <span class="o">=</span> <span class="n">content</span>
            <span class="n">content</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span>

        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_INTERACTION_RESPONSE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">interaction</span><span class="o">=</span><span class="n">interaction</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">)</span>

        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="n">response_type</span><span class="p">)</span>

        <span class="n">data</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">data</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;content&quot;</span><span class="p">,</span> <span class="n">content</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">data</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;flags&quot;</span><span class="p">,</span> <span class="n">flags</span><span class="p">)</span>
        <span class="n">data</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;tts&quot;</span><span class="p">,</span> <span class="n">tts</span><span class="p">)</span>
        <span class="n">data</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
            <span class="s2">&quot;allowed_mentions&quot;</span><span class="p">,</span>
            <span class="n">mentions</span><span class="o">.</span><span class="n">generate_allowed_mentions</span><span class="p">(</span><span class="n">mentions_everyone</span><span class="p">,</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span> <span class="n">user_mentions</span><span class="p">,</span> <span class="n">role_mentions</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">component</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">data</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;components&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">component</span><span class="o">.</span><span class="n">build</span><span class="p">()])</span>

        <span class="k">elif</span> <span class="n">components</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">data</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;components&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">component</span><span class="o">.</span><span class="n">build</span><span class="p">()</span> <span class="k">for</span> <span class="n">component</span> <span class="ow">in</span> <span class="n">components</span><span class="p">])</span>

        <span class="k">if</span> <span class="n">embed</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">embed_payload</span><span class="p">,</span> <span class="n">attachments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">serialize_embed</span><span class="p">(</span><span class="n">embed</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">attachments</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Cannot send an embed with attachments in a slash command&#39;s initial response&quot;</span><span class="p">)</span>

            <span class="n">data</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;embeds&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">embed_payload</span><span class="p">])</span>

        <span class="k">elif</span> <span class="n">embeds</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">embed_payloads</span><span class="p">:</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONArray</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">embed</span> <span class="ow">in</span> <span class="n">embeds</span><span class="p">:</span>
                <span class="n">serialized_embed</span><span class="p">,</span> <span class="n">attachments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">serialize_embed</span><span class="p">(</span><span class="n">embed</span><span class="p">)</span>
                <span class="n">embed_payloads</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">serialized_embed</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">attachments</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Cannot send an embed with attachments in a slash command&#39;s initial response&quot;</span><span class="p">)</span>

            <span class="n">data</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;embeds&quot;</span><span class="p">,</span> <span class="n">embed_payloads</span><span class="p">)</span>

        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">no_auth</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_interaction_response</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">application</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">token</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">content</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">attachment</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">attachments</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">component</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">components</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">embed</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">embeds</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">replace_attachments</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">mentions_everyone</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">user_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">role_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_INTERACTION_RESPONSE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">webhook</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">)</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_edit_message</span><span class="p">(</span>
            <span class="n">route</span><span class="p">,</span>
            <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">(),</span>
            <span class="n">no_auth</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span>
            <span class="n">attachment</span><span class="o">=</span><span class="n">attachment</span><span class="p">,</span>
            <span class="n">attachments</span><span class="o">=</span><span class="n">attachments</span><span class="p">,</span>
            <span class="n">component</span><span class="o">=</span><span class="n">component</span><span class="p">,</span>
            <span class="n">components</span><span class="o">=</span><span class="n">components</span><span class="p">,</span>
            <span class="n">embed</span><span class="o">=</span><span class="n">embed</span><span class="p">,</span>
            <span class="n">embeds</span><span class="o">=</span><span class="n">embeds</span><span class="p">,</span>
            <span class="n">replace_attachments</span><span class="o">=</span><span class="n">replace_attachments</span><span class="p">,</span>
            <span class="n">mentions_everyone</span><span class="o">=</span><span class="n">mentions_everyone</span><span class="p">,</span>
            <span class="n">user_mentions</span><span class="o">=</span><span class="n">user_mentions</span><span class="p">,</span>
            <span class="n">role_mentions</span><span class="o">=</span><span class="n">role_mentions</span><span class="p">,</span>
            <span class="n">mentions_reply</span><span class="o">=</span><span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_interaction_response</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">application</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span> <span class="n">token</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_INTERACTION_RESPONSE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">webhook</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">no_auth</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">build_action_row</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">special_endpoints</span><span class="o">.</span><span class="n">ActionRowBuilder</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">special_endpoints_impl</span><span class="o">.</span><span class="n">ActionRowBuilder</span><span class="p">()</span>
</pre></div>

        </details>

        </section>

            <section id="ClientCredentialsStrategy">
                    
            <div class="attr class">
        <a class="headerlink" href="#ClientCredentialsStrategy">#&nbsp;&nbsp</a>

        
        <span class="def">class</span>
        <span class="name">ClientCredentialsStrategy</span><wbr>(<span class="base"><a href="../api/rest.html#TokenStrategy">hikari.api.rest.TokenStrategy</a></span>):
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">ClientCredentialsStrategy</span><span class="p">(</span><span class="n">rest_api</span><span class="o">.</span><span class="n">TokenStrategy</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Strategy class for handling client credential OAuth2 authorization.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    client: typing.Optional[snowflakes.SnowflakeishOr[guilds.PartialApplication]]</span>
<span class="sd">        Object or ID of the application this client credentials strategy should</span>
<span class="sd">        authorize as.</span>
<span class="sd">    client_secret : typing.Optional[str]</span>
<span class="sd">        Client secret to use when authorizing.</span>

<span class="sd">    Other Parameters</span>
<span class="sd">    ----------------</span>
<span class="sd">    scopes : typing.Sequence[str]</span>
<span class="sd">        The scopes to authorize for.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="vm">__slots__</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;_client_id&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_client_secret&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_exception&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_expire_at&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_lock&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_scopes&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_token&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">client</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">client_secret</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">scopes</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">applications</span><span class="o">.</span><span class="n">OAuth2Scope</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">applications</span><span class="o">.</span><span class="n">OAuth2Scope</span><span class="o">.</span><span class="n">APPLICATIONS_COMMANDS_UPDATE</span><span class="p">,</span>
            <span class="n">applications</span><span class="o">.</span><span class="n">OAuth2Scope</span><span class="o">.</span><span class="n">IDENTIFY</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client_id</span> <span class="o">=</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client_secret</span> <span class="o">=</span> <span class="n">client_secret</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_exception</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">ClientHTTPResponseError</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_expire_at</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_scopes</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">scopes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">client_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;ID of the application this token strategy authenticates with.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client_id</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_is_expired</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">time</span><span class="o">.</span><span class="n">monotonic</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_expire_at</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">scopes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">applications</span><span class="o">.</span><span class="n">OAuth2Scope</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot;Sequence of scopes this token strategy authenticates for.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scopes</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">token_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">applications</span><span class="o">.</span><span class="n">TokenType</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">applications</span><span class="o">.</span><span class="n">TokenType</span><span class="o">.</span><span class="n">BEARER</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">acquire</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="p">:</span> <span class="n">rest_api</span><span class="o">.</span><span class="n">RESTClient</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_expired</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span>

        <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_expired</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_exception</span><span class="p">:</span>
                <span class="c1"># If we don&#39;t copy the exception then python keeps adding onto the stack each time it&#39;s raised.</span>
                <span class="k">raise</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_exception</span><span class="p">)</span> <span class="kn">from</span> <span class="bp">None</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authorize_client_credentials_token</span><span class="p">(</span>
                    <span class="n">client</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_client_id</span><span class="p">,</span> <span class="n">client_secret</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_client_secret</span><span class="p">,</span> <span class="n">scopes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_scopes</span>
                <span class="p">)</span>

            <span class="k">except</span> <span class="n">errors</span><span class="o">.</span><span class="n">ClientHTTPResponseError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="n">errors</span><span class="o">.</span><span class="n">RateLimitedError</span><span class="p">):</span>
                    <span class="c1"># If we don&#39;t copy the exception then python keeps adding onto the stack each time it&#39;s raised.</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_exception</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">exc</span><span class="p">)</span>

                <span class="k">raise</span>

            <span class="c1"># Expires in is lowered a bit in-order to lower the chance of a dead token being used.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_expire_at</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">monotonic</span><span class="p">()</span> <span class="o">+</span> <span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">expires_in</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">*</span> <span class="mf">0.99</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">token_type</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">access_token</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span>

    <span class="k">def</span> <span class="nf">invalidate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">token</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">token</span> <span class="ow">or</span> <span class="n">token</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_expire_at</span> <span class="o">=</span> <span class="mf">0.0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="o">=</span> <span class="kc">None</span>
</pre></div>

        </details>

            <div class="docstring"><p>Strategy class for handling client credential OAuth2 authorization.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>client</strong> (typing.Optional[snowflakes.SnowflakeishOr[guilds.PartialApplication]]):
Object or ID of the application this client credentials strategy should
authorize as.</li>
<li><strong>client_secret</strong> (typing.Optional[str]):
Client secret to use when authorizing.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>scopes</strong> (typing.Sequence[str]):
The scopes to authorize for.</li>
</ul>
</div>


                        <div id="ClientCredentialsStrategy.__init__" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#ClientCredentialsStrategy.__init__">#&nbsp;&nbsp</a>

        
            <span class="name">ClientCredentialsStrategy</span><span class="signature">(
    client: Union[<a href="../guilds.html#PartialApplication">hikari.guilds.PartialApplication</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    client_secret: str,
    *,
    scopes: Sequence[Union[<a href="../applications.html#OAuth2Scope">hikari.applications.OAuth2Scope</a>, str]] = (&lt;OAuth2Scope.APPLICATIONS_COMMANDS_UPDATE: &#39;applications.commands.update&#39;&gt;, &lt;OAuth2Scope.IDENTIFY: &#39;identify&#39;&gt;)
)</span>
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">client</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">client_secret</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">scopes</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">applications</span><span class="o">.</span><span class="n">OAuth2Scope</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">applications</span><span class="o">.</span><span class="n">OAuth2Scope</span><span class="o">.</span><span class="n">APPLICATIONS_COMMANDS_UPDATE</span><span class="p">,</span>
            <span class="n">applications</span><span class="o">.</span><span class="n">OAuth2Scope</span><span class="o">.</span><span class="n">IDENTIFY</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client_id</span> <span class="o">=</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client_secret</span> <span class="o">=</span> <span class="n">client_secret</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_exception</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">ClientHTTPResponseError</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_expire_at</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_scopes</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">scopes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</pre></div>

        </details>

    

                        </div>
                        <div id="ClientCredentialsStrategy.client_id" class="classattr">
                                
            <div class="attr variable"><a class="headerlink" href="#ClientCredentialsStrategy.client_id">#&nbsp;&nbsp</a>

        <span class="name">client_id</span><span class="annotation">: <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a></span>
    </div>

            <div class="docstring"><p>ID of the application this token strategy authenticates with.</p>
</div>


                        </div>
                        <div id="ClientCredentialsStrategy.scopes" class="classattr">
                                
            <div class="attr variable"><a class="headerlink" href="#ClientCredentialsStrategy.scopes">#&nbsp;&nbsp</a>

        <span class="name">scopes</span><span class="annotation">: Sequence[Union[<a href="../applications.html#OAuth2Scope">hikari.applications.OAuth2Scope</a>, str]]</span>
    </div>

            <div class="docstring"><p>Sequence of scopes this token strategy authenticates for.</p>
</div>


                        </div>
                        <div id="ClientCredentialsStrategy.token_type" class="classattr">
                                
            <div class="attr variable"><a class="headerlink" href="#ClientCredentialsStrategy.token_type">#&nbsp;&nbsp</a>

        <span class="name">token_type</span><span class="annotation">: <a href="../applications.html#TokenType">hikari.applications.TokenType</a></span>
    </div>

            <div class="docstring"><p>Type of token this strategy returns.</p>
</div>


                        </div>
                        <div id="ClientCredentialsStrategy.acquire" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#ClientCredentialsStrategy.acquire">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">acquire</span><span class="signature">(self, client: <a href="../api/rest.html#RESTClient">hikari.api.rest.RESTClient</a>) -&gt; str</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">acquire</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="p">:</span> <span class="n">rest_api</span><span class="o">.</span><span class="n">RESTClient</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_expired</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span>

        <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_expired</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_exception</span><span class="p">:</span>
                <span class="c1"># If we don&#39;t copy the exception then python keeps adding onto the stack each time it&#39;s raised.</span>
                <span class="k">raise</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_exception</span><span class="p">)</span> <span class="kn">from</span> <span class="bp">None</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authorize_client_credentials_token</span><span class="p">(</span>
                    <span class="n">client</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_client_id</span><span class="p">,</span> <span class="n">client_secret</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_client_secret</span><span class="p">,</span> <span class="n">scopes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_scopes</span>
                <span class="p">)</span>

            <span class="k">except</span> <span class="n">errors</span><span class="o">.</span><span class="n">ClientHTTPResponseError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="n">errors</span><span class="o">.</span><span class="n">RateLimitedError</span><span class="p">):</span>
                    <span class="c1"># If we don&#39;t copy the exception then python keeps adding onto the stack each time it&#39;s raised.</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_exception</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">exc</span><span class="p">)</span>

                <span class="k">raise</span>

            <span class="c1"># Expires in is lowered a bit in-order to lower the chance of a dead token being used.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_expire_at</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">monotonic</span><span class="p">()</span> <span class="o">+</span> <span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">expires_in</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">*</span> <span class="mf">0.99</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">token_type</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">access_token</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span>
</pre></div>

        </details>

            <div class="docstring"><p>Acquire an authorization token (including the prefix).</p>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>str</strong>: The current authorization token to use for this client and it's
prefix.</li>
</ul>
</div>


                        </div>
                        <div id="ClientCredentialsStrategy.invalidate" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#ClientCredentialsStrategy.invalidate">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">invalidate</span><span class="signature">(self, token: Union[str, NoneType]) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">invalidate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">token</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">token</span> <span class="ow">or</span> <span class="n">token</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_expire_at</span> <span class="o">=</span> <span class="mf">0.0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="o">=</span> <span class="kc">None</span>
</pre></div>

        </details>

            <div class="docstring"><p>Invalidate the cached token in this handler.</p>

<p><em>Note:</em>
<code>token</code> may be provided in-order to avoid newly generated tokens
from being invalidated due to multiple calls being made by separate
subroutines which are handling the same token.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>token</strong> (typing.Optional[str]):
The token to specifically invalidate. If provided then this will only
invalidate the cached token if it matches this, otherwise it'll be
invalidated regardless.</li>
</ul>
</div>


                        </div>
            </section>
            <section id="RESTApp">
                    
            <div class="attr class">
        <a class="headerlink" href="#RESTApp">#&nbsp;&nbsp</a>

        
        <span class="def">class</span>
        <span class="name">RESTApp</span><wbr>(<span class="base"><a href="../traits.html#ExecutorAware">hikari.traits.ExecutorAware</a></span>):
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">RESTApp</span><span class="p">(</span><span class="n">traits</span><span class="o">.</span><span class="n">ExecutorAware</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The base for a HTTP-only Discord application.</span>

<span class="sd">    This comprises of a shared TCP connector connection pool, and can have</span>
<span class="sd">    `RESTClientImpl` instances for specific credentials acquired</span>
<span class="sd">    from it.</span>

<span class="sd">    .. note::</span>
<span class="sd">        This event loop will be bound to a connector when the first call</span>
<span class="sd">        to `acquire` is made.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    executor : typing.Optional[concurrent.futures.Executor]</span>
<span class="sd">        The executor to use for blocking file IO operations. If `None`</span>
<span class="sd">        is passed, then the default `concurrent.futures.ThreadPoolExecutor` for</span>
<span class="sd">        the `asyncio.AbstractEventLoop` will be used instead.</span>
<span class="sd">    http_settings : typing.Optional[hikari.config.HTTPSettings]</span>
<span class="sd">        HTTP settings to use. Sane defaults are used if this is</span>
<span class="sd">        `None`.</span>
<span class="sd">    max_rate_limit : float</span>
<span class="sd">        Maximum number of seconds to sleep for when rate limited. If a rate</span>
<span class="sd">        limit occurs that is longer than this value, then a</span>
<span class="sd">        `hikari.errors.RateLimitedError` will be raised instead of waiting.</span>

<span class="sd">        This is provided since some endpoints may respond with non-sensible</span>
<span class="sd">        rate limits.</span>

<span class="sd">        Defaults to five minutes if unspecified.</span>
<span class="sd">    max_retries : typing.Optional[int]</span>
<span class="sd">        Maximum number of times a request will be retried if</span>
<span class="sd">        it fails with a `5xx` status. Defaults to 3 if set to `None`.</span>
<span class="sd">    proxy_settings : typing.Optional[hikari.config.ProxySettings]</span>
<span class="sd">        Proxy settings to use. If `None` then no proxy configuration</span>
<span class="sd">        will be used.</span>
<span class="sd">    url : typing.Optional[str]</span>
<span class="sd">        The base URL for the API. You can generally leave this as being</span>
<span class="sd">        `None` and the correct default API base URL will be generated.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="vm">__slots__</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;_executor&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_http_settings&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_max_rate_limit&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_max_retries&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_proxy_settings&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_url&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">executor</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">concurrent</span><span class="o">.</span><span class="n">futures</span><span class="o">.</span><span class="n">Executor</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">http_settings</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">config</span><span class="o">.</span><span class="n">HTTPSettings</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">max_rate_limit</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">300</span><span class="p">,</span>
        <span class="n">max_retries</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
        <span class="n">proxy_settings</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">config</span><span class="o">.</span><span class="n">ProxySettings</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">url</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_http_settings</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">HTTPSettings</span><span class="p">()</span> <span class="k">if</span> <span class="n">http_settings</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">http_settings</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_proxy_settings</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">ProxySettings</span><span class="p">()</span> <span class="k">if</span> <span class="n">proxy_settings</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">proxy_settings</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_executor</span> <span class="o">=</span> <span class="n">executor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_max_rate_limit</span> <span class="o">=</span> <span class="n">max_rate_limit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_max_retries</span> <span class="o">=</span> <span class="n">max_retries</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">=</span> <span class="n">url</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">executor</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">concurrent</span><span class="o">.</span><span class="n">futures</span><span class="o">.</span><span class="n">Executor</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_executor</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">http_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">config</span><span class="o">.</span><span class="n">HTTPSettings</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_http_settings</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">proxy_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">config</span><span class="o">.</span><span class="n">ProxySettings</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_proxy_settings</span>

    <span class="nd">@typing</span><span class="o">.</span><span class="n">overload</span>
    <span class="k">def</span> <span class="nf">acquire</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">token</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">rest_api</span><span class="o">.</span><span class="n">TokenStrategy</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RESTClientImpl</span><span class="p">:</span>
        <span class="o">...</span>

    <span class="nd">@typing</span><span class="o">.</span><span class="n">overload</span>
    <span class="k">def</span> <span class="nf">acquire</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">token</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">token_type</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">applications</span><span class="o">.</span><span class="n">TokenType</span><span class="p">]</span> <span class="o">=</span> <span class="n">applications</span><span class="o">.</span><span class="n">TokenType</span><span class="o">.</span><span class="n">BEARER</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RESTClientImpl</span><span class="p">:</span>
        <span class="o">...</span>

    <span class="k">def</span> <span class="nf">acquire</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">token</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">rest_api</span><span class="o">.</span><span class="n">TokenStrategy</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">token_type</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">applications</span><span class="o">.</span><span class="n">TokenType</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RESTClientImpl</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Acquire an instance of this REST client.</span>

<span class="sd">        .. note::</span>
<span class="sd">            The returned REST client should be started before it can be used,</span>
<span class="sd">            either by calling `RESTClientImpl.start` or by using it as an</span>
<span class="sd">            asynchronous context manager.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        ```py</span>
<span class="sd">        rest_app = RESTApp()</span>

<span class="sd">        # Using the returned client as a context manager to implicitly start</span>
<span class="sd">        # and stop it.</span>
<span class="sd">        async with rest_app.acquire(&quot;A token&quot;, &quot;Bot&quot;) as client:</span>
<span class="sd">            user = await client.fetch_my_user()</span>
<span class="sd">        ```</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        token : typing.Union[str, None, hikari.api.rest.TokenStrategy]</span>
<span class="sd">            The bot or bearer token. If no token is to be used,</span>
<span class="sd">            this can be undefined.</span>
<span class="sd">        token_type : typing.Union[str, hikari.applications.TokenType, None]</span>
<span class="sd">            The type of token in use. This should only be passed when `str`</span>
<span class="sd">            is passed for `token`, can be `&quot;Bot&quot;` or `&quot;Bearer&quot;` and will be</span>
<span class="sd">            defaulted to `&quot;Bearer&quot;` in this situation.</span>

<span class="sd">            This should be left as `None` when either</span>
<span class="sd">            `hikari.api.rest.TokenStrategy` or `None` is passed for</span>
<span class="sd">            `token`.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        RESTClientImpl</span>
<span class="sd">            An instance of the REST client.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        ValueError</span>
<span class="sd">            If `token_type` is provided when a token strategy is passed for `token`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Since we essentially mimic a fake App instance, we need to make a circular provider.</span>
        <span class="c1"># We can achieve this using a lambda. This allows the entity factory to build models that</span>
        <span class="c1"># are also REST-aware</span>
        <span class="n">provider</span> <span class="o">=</span> <span class="n">_RESTProvider</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">entity_factory</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">rest_client</span><span class="p">)</span>
        <span class="n">entity_factory</span> <span class="o">=</span> <span class="n">entity_factory_impl</span><span class="o">.</span><span class="n">EntityFactoryImpl</span><span class="p">(</span><span class="n">provider</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">token_type</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">token_type</span> <span class="o">=</span> <span class="n">applications</span><span class="o">.</span><span class="n">TokenType</span><span class="o">.</span><span class="n">BEARER</span>

        <span class="n">rest_client</span> <span class="o">=</span> <span class="n">RESTClientImpl</span><span class="p">(</span>
            <span class="n">cache</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">entity_factory</span><span class="o">=</span><span class="n">entity_factory</span><span class="p">,</span>
            <span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">,</span>
            <span class="n">http_settings</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_http_settings</span><span class="p">,</span>
            <span class="n">max_rate_limit</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_max_rate_limit</span><span class="p">,</span>
            <span class="n">max_retries</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_max_retries</span><span class="p">,</span>
            <span class="n">proxy_settings</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_settings</span><span class="p">,</span>
            <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">,</span>
            <span class="n">token_type</span><span class="o">=</span><span class="n">token_type</span><span class="p">,</span>
            <span class="n">rest_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_url</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">rest_client</span>
</pre></div>

        </details>

            <div class="docstring"><p>The base for a HTTP-only Discord application.</p>

<p>This comprises of a shared TCP connector connection pool, and can have
<code><a href="#RESTClientImpl">RESTClientImpl</a></code> instances for specific credentials acquired
from it.</p>

<p><em>Note:</em>
This event loop will be bound to a connector when the first call
to <code><a href="#RESTApp.acquire">acquire</a></code> is made.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>executor</strong> (typing.Optional[concurrent.futures.Executor]):
The executor to use for blocking file IO operations. If <code>None</code>
is passed, then the default <code>concurrent.futures.ThreadPoolExecutor</code> for
the <code>asyncio.AbstractEventLoop</code> will be used instead.</li>
<li><strong>http_settings</strong> (typing.Optional[<a href="../config.html#HTTPSettings">hikari.config.HTTPSettings</a>]):
HTTP settings to use. Sane defaults are used if this is
<code>None</code>.</li>
<li><p><strong>max_rate_limit</strong> (float):
Maximum number of seconds to sleep for when rate limited. If a rate
limit occurs that is longer than this value, then a
<code><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></code> will be raised instead of waiting.</p>

<p>This is provided since some endpoints may respond with non-sensible
rate limits.</p>

<p>Defaults to five minutes if unspecified.</p></li>
<li><strong>max_retries</strong> (typing.Optional[int]):
Maximum number of times a request will be retried if
it fails with a <code>5xx</code> status. Defaults to 3 if set to <code>None</code>.</li>
<li><strong>proxy_settings</strong> (typing.Optional[<a href="../config.html#ProxySettings">hikari.config.ProxySettings</a>]):
Proxy settings to use. If <code>None</code> then no proxy configuration
will be used.</li>
<li><strong>url</strong> (typing.Optional[str]):
The base URL for the API. You can generally leave this as being
<code>None</code> and the correct default API base URL will be generated.</li>
</ul>
</div>


                        <div id="RESTApp.__init__" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTApp.__init__">#&nbsp;&nbsp</a>

        
            <span class="name">RESTApp</span><span class="signature">(
    *,
    executor: Union[concurrent.futures._base.Executor, NoneType] = None,
    http_settings: Union[<a href="../config.html#HTTPSettings">hikari.config.HTTPSettings</a>, NoneType] = None,
    max_rate_limit: float = 300,
    max_retries: int = 3,
    proxy_settings: Union[<a href="../config.html#ProxySettings">hikari.config.ProxySettings</a>, NoneType] = None,
    url: Union[str, NoneType] = None
)</span>
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">executor</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">concurrent</span><span class="o">.</span><span class="n">futures</span><span class="o">.</span><span class="n">Executor</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">http_settings</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">config</span><span class="o">.</span><span class="n">HTTPSettings</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">max_rate_limit</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">300</span><span class="p">,</span>
        <span class="n">max_retries</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
        <span class="n">proxy_settings</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">config</span><span class="o">.</span><span class="n">ProxySettings</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">url</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_http_settings</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">HTTPSettings</span><span class="p">()</span> <span class="k">if</span> <span class="n">http_settings</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">http_settings</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_proxy_settings</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">ProxySettings</span><span class="p">()</span> <span class="k">if</span> <span class="n">proxy_settings</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">proxy_settings</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_executor</span> <span class="o">=</span> <span class="n">executor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_max_rate_limit</span> <span class="o">=</span> <span class="n">max_rate_limit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_max_retries</span> <span class="o">=</span> <span class="n">max_retries</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">=</span> <span class="n">url</span>
</pre></div>

        </details>

    

                        </div>
                        <div id="RESTApp.executor" class="classattr">
                                
            <div class="attr variable"><a class="headerlink" href="#RESTApp.executor">#&nbsp;&nbsp</a>

        <span class="name">executor</span><span class="annotation">: Union[concurrent.futures._base.Executor, NoneType]</span>
    </div>

            <div class="docstring"><p>Executor to use for blocking operations.</p>

<p>This may return <code>None</code> if the default <code>asyncio</code> thread pool
should be used instead.</p>
</div>


                        </div>
                        <div id="RESTApp.http_settings" class="classattr">
                                
            <div class="attr variable"><a class="headerlink" href="#RESTApp.http_settings">#&nbsp;&nbsp</a>

        <span class="name">http_settings</span><span class="annotation">: <a href="../config.html#HTTPSettings">hikari.config.HTTPSettings</a></span>
    </div>

    

                        </div>
                        <div id="RESTApp.proxy_settings" class="classattr">
                                
            <div class="attr variable"><a class="headerlink" href="#RESTApp.proxy_settings">#&nbsp;&nbsp</a>

        <span class="name">proxy_settings</span><span class="annotation">: <a href="../config.html#ProxySettings">hikari.config.ProxySettings</a></span>
    </div>

    

                        </div>
                        <div id="RESTApp.acquire" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTApp.acquire">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">acquire</span><span class="signature">(
    self,
    token: Union[str, <a href="../api/rest.html#TokenStrategy">hikari.api.rest.TokenStrategy</a>, NoneType] = None,
    token_type: Union[str, <a href="../applications.html#TokenType">hikari.applications.TokenType</a>, NoneType] = None
) -&gt; <a href="#RESTClientImpl">hikari.impl.rest.RESTClientImpl</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">acquire</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">token</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">rest_api</span><span class="o">.</span><span class="n">TokenStrategy</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">token_type</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">applications</span><span class="o">.</span><span class="n">TokenType</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RESTClientImpl</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Acquire an instance of this REST client.</span>

<span class="sd">        .. note::</span>
<span class="sd">            The returned REST client should be started before it can be used,</span>
<span class="sd">            either by calling `RESTClientImpl.start` or by using it as an</span>
<span class="sd">            asynchronous context manager.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        ```py</span>
<span class="sd">        rest_app = RESTApp()</span>

<span class="sd">        # Using the returned client as a context manager to implicitly start</span>
<span class="sd">        # and stop it.</span>
<span class="sd">        async with rest_app.acquire(&quot;A token&quot;, &quot;Bot&quot;) as client:</span>
<span class="sd">            user = await client.fetch_my_user()</span>
<span class="sd">        ```</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        token : typing.Union[str, None, hikari.api.rest.TokenStrategy]</span>
<span class="sd">            The bot or bearer token. If no token is to be used,</span>
<span class="sd">            this can be undefined.</span>
<span class="sd">        token_type : typing.Union[str, hikari.applications.TokenType, None]</span>
<span class="sd">            The type of token in use. This should only be passed when `str`</span>
<span class="sd">            is passed for `token`, can be `&quot;Bot&quot;` or `&quot;Bearer&quot;` and will be</span>
<span class="sd">            defaulted to `&quot;Bearer&quot;` in this situation.</span>

<span class="sd">            This should be left as `None` when either</span>
<span class="sd">            `hikari.api.rest.TokenStrategy` or `None` is passed for</span>
<span class="sd">            `token`.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        RESTClientImpl</span>
<span class="sd">            An instance of the REST client.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        ValueError</span>
<span class="sd">            If `token_type` is provided when a token strategy is passed for `token`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Since we essentially mimic a fake App instance, we need to make a circular provider.</span>
        <span class="c1"># We can achieve this using a lambda. This allows the entity factory to build models that</span>
        <span class="c1"># are also REST-aware</span>
        <span class="n">provider</span> <span class="o">=</span> <span class="n">_RESTProvider</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">entity_factory</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">rest_client</span><span class="p">)</span>
        <span class="n">entity_factory</span> <span class="o">=</span> <span class="n">entity_factory_impl</span><span class="o">.</span><span class="n">EntityFactoryImpl</span><span class="p">(</span><span class="n">provider</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">token_type</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">token_type</span> <span class="o">=</span> <span class="n">applications</span><span class="o">.</span><span class="n">TokenType</span><span class="o">.</span><span class="n">BEARER</span>

        <span class="n">rest_client</span> <span class="o">=</span> <span class="n">RESTClientImpl</span><span class="p">(</span>
            <span class="n">cache</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">entity_factory</span><span class="o">=</span><span class="n">entity_factory</span><span class="p">,</span>
            <span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">,</span>
            <span class="n">http_settings</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_http_settings</span><span class="p">,</span>
            <span class="n">max_rate_limit</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_max_rate_limit</span><span class="p">,</span>
            <span class="n">max_retries</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_max_retries</span><span class="p">,</span>
            <span class="n">proxy_settings</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_settings</span><span class="p">,</span>
            <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">,</span>
            <span class="n">token_type</span><span class="o">=</span><span class="n">token_type</span><span class="p">,</span>
            <span class="n">rest_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_url</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">rest_client</span>
</pre></div>

        </details>

            <div class="docstring"><p>Acquire an instance of this REST client.</p>

<p><em>Note:</em>
The returned REST client should be started before it can be used,
either by calling <code><a href="#RESTClientImpl.start">RESTClientImpl.start</a></code> or by using it as an
asynchronous context manager.</p>

<h6 id="examples">Examples</h6>

<div class="codehilite"><pre><span></span><code><span class="n">rest_app</span> <span class="o">=</span> <span class="n">RESTApp</span><span class="p">()</span>

<span class="c1"># Using the returned client as a context manager to implicitly start</span>
<span class="c1"># and stop it.</span>
<span class="k">async</span> <span class="k">with</span> <span class="n">rest_app</span><span class="o">.</span><span class="n">acquire</span><span class="p">(</span><span class="s2">&quot;A token&quot;</span><span class="p">,</span> <span class="s2">&quot;Bot&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>
    <span class="n">user</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">fetch_my_user</span><span class="p">()</span>
</code></pre></div>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>token</strong> (typing.Union[str, None, <a href="../api/rest.html#TokenStrategy">hikari.api.rest.TokenStrategy</a>]):
The bot or bearer token. If no token is to be used,
this can be undefined.</li>
<li><p><strong>token_type</strong> (typing.Union[str, <a href="../applications.html#TokenType">hikari.applications.TokenType</a>, None]):
The type of token in use. This should only be passed when <code>str</code>
is passed for <code>token</code>, can be <code>"Bot"</code> or <code>"Bearer"</code> and will be
defaulted to <code>"Bearer"</code> in this situation.</p>

<p>This should be left as <code>None</code> when either
<code><a href="../api/rest.html#TokenStrategy">hikari.api.rest.TokenStrategy</a></code> or <code>None</code> is passed for
<code>token</code>.</p></li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>RESTClientImpl</strong>: An instance of the REST client.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong>ValueError</strong>: If <code>token_type</code> is provided when a token strategy is passed for <code>token</code>.</li>
</ul>
</div>


                        </div>
            </section>
            <section id="RESTClientImpl">
                    
            <div class="attr class">
        <a class="headerlink" href="#RESTClientImpl">#&nbsp;&nbsp</a>

        
        <span class="def">class</span>
        <span class="name">RESTClientImpl</span><wbr>(<span class="base"><a href="../api/rest.html#RESTClient">hikari.api.rest.RESTClient</a></span>):
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">RESTClientImpl</span><span class="p">(</span><span class="n">rest_api</span><span class="o">.</span><span class="n">RESTClient</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Implementation of the V8-compatible Discord HTTP API.</span>

<span class="sd">    This manages making HTTP/1.1 requests to the API and using the entity</span>
<span class="sd">    factory within the passed application instance to deserialize JSON responses</span>
<span class="sd">    to Pythonic data classes that are used throughout this library.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    entity_factory : hikari.api.entity_factory.EntityFactory</span>
<span class="sd">        The entity factory to use.</span>
<span class="sd">    executor : typing.Optional[concurrent.futures.Executor]</span>
<span class="sd">        The executor to use for blocking IO. Defaults to the `asyncio` thread</span>
<span class="sd">        pool if set to `None`.</span>
<span class="sd">    max_rate_limit : float</span>
<span class="sd">        Maximum number of seconds to sleep for when rate limited. If a rate</span>
<span class="sd">        limit occurs that is longer than this value, then a</span>
<span class="sd">        `hikari.errors.RateLimitedError` will be raised instead of waiting.</span>

<span class="sd">        This is provided since some endpoints may respond with non-sensible</span>
<span class="sd">        rate limits.</span>
<span class="sd">    max_retries : typing.Optional[int]</span>
<span class="sd">        Maximum number of times a request will be retried if</span>
<span class="sd">        it fails with a `5xx` status. Defaults to 3 if set to `None`.</span>
<span class="sd">    token : typing.Union[str, None, hikari.api.rest.TokenStrategy]</span>
<span class="sd">        The bot or bearer token. If no token is to be used,</span>
<span class="sd">        this can be undefined.</span>
<span class="sd">    token_type : typing.Union[str, hikari.applications.TokenType, None]</span>
<span class="sd">        The type of token in use. This must be passed when a `str` is</span>
<span class="sd">        passed for `token` but and can be `&quot;Bot&quot;` or `&quot;Bearer&quot;`.</span>

<span class="sd">        This should be left as `None` when either</span>
<span class="sd">        `hikari.api.rest.TokenStrategy` or `None` is passed for</span>
<span class="sd">        `token`.</span>
<span class="sd">    rest_url : str</span>
<span class="sd">        The HTTP API base URL. This can contain format-string specifiers to</span>
<span class="sd">        interpolate information such as API version in use.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ValueError</span>
<span class="sd">        * If `token_type` is provided when a token strategy is passed for `token`.</span>
<span class="sd">        * if `token_type` is left as `None` when a string is passed for `token`.</span>
<span class="sd">        * If the a value more than 5 is provided for `max_retries`</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="vm">__slots__</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;_cache&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_entity_factory&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_executor&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_http_settings&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_live_attributes&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_max_rate_limit&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_max_retries&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_proxy_settings&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_rest_url&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_token&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_token_type&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">cache</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">cache_api</span><span class="o">.</span><span class="n">MutableCache</span><span class="p">],</span>
        <span class="n">entity_factory</span><span class="p">:</span> <span class="n">entity_factory_</span><span class="o">.</span><span class="n">EntityFactory</span><span class="p">,</span>
        <span class="n">executor</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">concurrent</span><span class="o">.</span><span class="n">futures</span><span class="o">.</span><span class="n">Executor</span><span class="p">],</span>
        <span class="n">http_settings</span><span class="p">:</span> <span class="n">config</span><span class="o">.</span><span class="n">HTTPSettings</span><span class="p">,</span>
        <span class="n">max_rate_limit</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">max_retries</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
        <span class="n">proxy_settings</span><span class="p">:</span> <span class="n">config</span><span class="o">.</span><span class="n">ProxySettings</span><span class="p">,</span>
        <span class="n">token</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">rest_api</span><span class="o">.</span><span class="n">TokenStrategy</span><span class="p">],</span>
        <span class="n">token_type</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">applications</span><span class="o">.</span><span class="n">TokenType</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span>
        <span class="n">rest_url</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">max_retries</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;max_retries&#39; must be below or equal to 5&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_cache</span> <span class="o">=</span> <span class="n">cache</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span> <span class="o">=</span> <span class="n">entity_factory</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_executor</span> <span class="o">=</span> <span class="n">executor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_http_settings</span> <span class="o">=</span> <span class="n">http_settings</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_live_attributes</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">_LiveAttributes</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_max_rate_limit</span> <span class="o">=</span> <span class="n">max_rate_limit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_max_retries</span> <span class="o">=</span> <span class="n">max_retries</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_proxy_settings</span> <span class="o">=</span> <span class="n">proxy_settings</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">rest_api</span><span class="o">.</span><span class="n">TokenStrategy</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_token_type</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">token_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Token type required when a str is passed for `token`&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">token_type</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">token</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_token_type</span> <span class="o">=</span> <span class="n">applications</span><span class="o">.</span><span class="n">TokenType</span><span class="p">(</span><span class="n">token_type</span><span class="o">.</span><span class="n">title</span><span class="p">())</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">rest_api</span><span class="o">.</span><span class="n">TokenStrategy</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">token_type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Token type should be handled by the token strategy&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="o">=</span> <span class="n">token</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_token_type</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">token_type</span>

        <span class="c1"># While passing files.URL for rest_url is not officially supported, this is still</span>
        <span class="c1"># casted to string here to avoid confusing issues passing a URL here could lead to.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rest_url</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">rest_url</span><span class="p">)</span> <span class="k">if</span> <span class="n">rest_url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">urls</span><span class="o">.</span><span class="n">REST_API_URL</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_alive</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_live_attributes</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">http_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">config</span><span class="o">.</span><span class="n">HTTPSettings</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_http_settings</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">proxy_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">config</span><span class="o">.</span><span class="n">ProxySettings</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_proxy_settings</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">entity_factory</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">entity_factory_</span><span class="o">.</span><span class="n">EntityFactory</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">token_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">applications</span><span class="o">.</span><span class="n">TokenType</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token_type</span>

    <span class="nd">@typing</span><span class="o">.</span><span class="n">final</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Close the HTTP client and any open HTTP connections.&quot;&quot;&quot;</span>
        <span class="n">live_attributes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_live_attributes</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_live_attributes</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">await</span> <span class="n">live_attributes</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="nd">@typing</span><span class="o">.</span><span class="n">final</span>
    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Start the HTTP client.</span>

<span class="sd">        .. note::</span>
<span class="sd">            This must be called within an active event loop.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        RuntimeError</span>
<span class="sd">            If this is called in an environment without an active event loop.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_live_attributes</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">errors</span><span class="o">.</span><span class="n">ComponentStateConflictError</span><span class="p">(</span><span class="s2">&quot;Cannot start a REST Client which is already alive&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_live_attributes</span> <span class="o">=</span> <span class="n">_LiveAttributes</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_max_rate_limit</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_http_settings</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_proxy_settings</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_live_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">_LiveAttributes</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_live_attributes</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_live_attributes</span>

        <span class="k">raise</span> <span class="n">errors</span><span class="o">.</span><span class="n">ComponentStateConflictError</span><span class="p">(</span><span class="s2">&quot;Cannot use an inactive REST client&quot;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="fm">__aenter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RESTClientImpl</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">async</span> <span class="k">def</span> <span class="fm">__aexit__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">exc_type</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]],</span>
        <span class="n">exc_val</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">],</span>
        <span class="n">exc_tb</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">types</span><span class="o">.</span><span class="n">TracebackType</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="c1"># These are only included at runtime in-order to avoid the model being typed as a synchronous context manager.</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">typing</span><span class="o">.</span><span class="n">TYPE_CHECKING</span><span class="p">:</span>

        <span class="k">def</span> <span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">NoReturn</span><span class="p">:</span>
            <span class="c1"># This is async only.</span>
            <span class="bp">cls</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__module__</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__qualname__</span><span class="si">}</span><span class="s2"> is async-only, did you mean &#39;async with&#39;?&quot;</span><span class="p">)</span> <span class="kn">from</span> <span class="bp">None</span>

        <span class="k">def</span> <span class="fm">__exit__</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">exc_type</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]],</span>
            <span class="n">exc_val</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">],</span>
            <span class="n">exc_tb</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">types</span><span class="o">.</span><span class="n">TracebackType</span><span class="p">],</span>
        <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@typing</span><span class="o">.</span><span class="n">final</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">_request</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">compiled_route</span><span class="p">:</span> <span class="n">routes</span><span class="o">.</span><span class="n">CompiledRoute</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">query</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">data_binding</span><span class="o">.</span><span class="n">StringMapBuilder</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">form_builder</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">data_binding</span><span class="o">.</span><span class="n">URLEncodedFormBuilder</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">json</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">,</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONArray</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">no_auth</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">auth</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObject</span><span class="p">,</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONArray</span><span class="p">]:</span>
        <span class="c1"># Make a ratelimit-protected HTTP request to a JSON endpoint and expect some form</span>
        <span class="c1"># of JSON response.</span>
        <span class="n">live_attributes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_live_attributes</span><span class="p">()</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">StringMapBuilder</span><span class="p">()</span>
        <span class="n">headers</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">_USER_AGENT_HEADER</span><span class="p">,</span> <span class="n">_HTTP_USER_AGENT</span><span class="p">)</span>

        <span class="n">re_authed</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">token</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">auth</span><span class="p">:</span>
            <span class="n">headers</span><span class="p">[</span><span class="n">_AUTHORIZATION_HEADER</span><span class="p">]</span> <span class="o">=</span> <span class="n">auth</span>

        <span class="k">elif</span> <span class="ow">not</span> <span class="n">no_auth</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">headers</span><span class="p">[</span><span class="n">_AUTHORIZATION_HEADER</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span>

            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">token</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="o">.</span><span class="n">acquire</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                <span class="n">headers</span><span class="p">[</span><span class="n">_AUTHORIZATION_HEADER</span><span class="p">]</span> <span class="o">=</span> <span class="n">token</span>

        <span class="n">headers</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">_X_AUDIT_LOG_REASON_HEADER</span><span class="p">,</span> <span class="n">reason</span><span class="p">)</span>

        <span class="n">url</span> <span class="o">=</span> <span class="n">compiled_route</span><span class="o">.</span><span class="n">create_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rest_url</span><span class="p">)</span>

        <span class="c1"># This is initiated the first time we hit a 5xx error to save a little memory when nothing goes wrong</span>
        <span class="n">backoff</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">rate_limits</span><span class="o">.</span><span class="n">ExponentialBackOff</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">retry_count</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="n">stack</span> <span class="o">=</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">AsyncExitStack</span><span class="p">()</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">uuid</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">uuid</span><span class="p">()</span>
                <span class="k">async</span> <span class="k">with</span> <span class="n">stack</span><span class="p">:</span>
                    <span class="n">form</span> <span class="o">=</span> <span class="k">await</span> <span class="n">form_builder</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">stack</span><span class="p">)</span> <span class="k">if</span> <span class="n">form_builder</span> <span class="k">else</span> <span class="kc">None</span>

                    <span class="k">await</span> <span class="n">stack</span><span class="o">.</span><span class="n">enter_async_context</span><span class="p">(</span><span class="n">live_attributes</span><span class="o">.</span><span class="n">still_alive</span><span class="p">()</span><span class="o">.</span><span class="n">buckets</span><span class="o">.</span><span class="n">acquire</span><span class="p">(</span><span class="n">compiled_route</span><span class="p">))</span>
                    <span class="c1"># Buckets not using authentication still have a global</span>
                    <span class="c1"># rate limit, but it is different from the token one.</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">no_auth</span><span class="p">:</span>
                        <span class="k">await</span> <span class="n">live_attributes</span><span class="o">.</span><span class="n">still_alive</span><span class="p">()</span><span class="o">.</span><span class="n">global_rate_limit</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>

                    <span class="k">if</span> <span class="n">_LOGGER</span><span class="o">.</span><span class="n">isEnabledFor</span><span class="p">(</span><span class="n">ux</span><span class="o">.</span><span class="n">TRACE</span><span class="p">):</span>
                        <span class="n">_LOGGER</span><span class="o">.</span><span class="n">log</span><span class="p">(</span>
                            <span class="n">ux</span><span class="o">.</span><span class="n">TRACE</span><span class="p">,</span>
                            <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="se">\n</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
                            <span class="n">uuid</span><span class="p">,</span>
                            <span class="n">compiled_route</span><span class="o">.</span><span class="n">method</span><span class="p">,</span>
                            <span class="n">url</span><span class="p">,</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">_stringify_http_message</span><span class="p">(</span><span class="n">headers</span><span class="p">,</span> <span class="n">json</span><span class="p">),</span>
                        <span class="p">)</span>
                        <span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">monotonic</span><span class="p">()</span>

                    <span class="c1"># Make the request.</span>
                    <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">live_attributes</span><span class="o">.</span><span class="n">still_alive</span><span class="p">()</span><span class="o">.</span><span class="n">client_session</span><span class="o">.</span><span class="n">request</span><span class="p">(</span>
                        <span class="n">compiled_route</span><span class="o">.</span><span class="n">method</span><span class="p">,</span>
                        <span class="n">url</span><span class="p">,</span>
                        <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                        <span class="n">params</span><span class="o">=</span><span class="n">query</span><span class="p">,</span>
                        <span class="n">json</span><span class="o">=</span><span class="n">json</span><span class="p">,</span>
                        <span class="n">data</span><span class="o">=</span><span class="n">form</span><span class="p">,</span>
                        <span class="n">allow_redirects</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_http_settings</span><span class="o">.</span><span class="n">max_redirects</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span>
                        <span class="n">max_redirects</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_http_settings</span><span class="o">.</span><span class="n">max_redirects</span><span class="p">,</span>
                        <span class="n">proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_settings</span><span class="o">.</span><span class="n">url</span><span class="p">,</span>
                        <span class="n">proxy_headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_settings</span><span class="o">.</span><span class="n">all_headers</span><span class="p">,</span>
                    <span class="p">)</span>

                    <span class="k">if</span> <span class="n">_LOGGER</span><span class="o">.</span><span class="n">isEnabledFor</span><span class="p">(</span><span class="n">ux</span><span class="o">.</span><span class="n">TRACE</span><span class="p">):</span>
                        <span class="n">time_taken</span> <span class="o">=</span> <span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">monotonic</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1_000</span>
                        <span class="n">_LOGGER</span><span class="o">.</span><span class="n">log</span><span class="p">(</span>
                            <span class="n">ux</span><span class="o">.</span><span class="n">TRACE</span><span class="p">,</span>
                            <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> in </span><span class="si">%s</span><span class="s2">ms</span><span class="se">\n</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
                            <span class="n">uuid</span><span class="p">,</span>
                            <span class="n">response</span><span class="o">.</span><span class="n">status</span><span class="p">,</span>
                            <span class="n">response</span><span class="o">.</span><span class="n">reason</span><span class="p">,</span>
                            <span class="n">time_taken</span><span class="p">,</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">_stringify_http_message</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">read</span><span class="p">()),</span>
                        <span class="p">)</span>

                    <span class="c1"># Ensure we are not rate limited, and update rate limiting headers where appropriate.</span>
                    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_ratelimits</span><span class="p">(</span><span class="n">compiled_route</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">live_attributes</span><span class="p">)</span>

                <span class="c1"># Don&#39;t bother processing any further if we got NO CONTENT. There&#39;s not anything</span>
                <span class="c1"># to check.</span>
                <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="n">http</span><span class="o">.</span><span class="n">HTTPStatus</span><span class="o">.</span><span class="n">NO_CONTENT</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">None</span>

                <span class="c1"># Handle the response when everything went good</span>
                <span class="k">if</span> <span class="mi">200</span> <span class="o">&lt;=</span> <span class="n">response</span><span class="o">.</span><span class="n">status</span> <span class="o">&lt;</span> <span class="mi">300</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">content_type</span> <span class="o">==</span> <span class="n">_APPLICATION_JSON</span><span class="p">:</span>
                        <span class="c1"># Only deserializing here stops Cloudflare shenanigans messing us around.</span>
                        <span class="k">return</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">load_json</span><span class="p">(</span><span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

                    <span class="n">real_url</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">real_url</span><span class="p">)</span>
                    <span class="k">raise</span> <span class="n">errors</span><span class="o">.</span><span class="n">HTTPError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Expected JSON [</span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">content_type</span><span class="si">=}</span><span class="s2">, </span><span class="si">{</span><span class="n">real_url</span><span class="si">=}</span><span class="s2">]&quot;</span><span class="p">)</span>

                <span class="c1"># Handling 5xx errors</span>
                <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status</span> <span class="ow">in</span> <span class="n">_RETRY_ERROR_CODES</span> <span class="ow">and</span> <span class="n">retry_count</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max_retries</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">backoff</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">backoff</span> <span class="o">=</span> <span class="n">rate_limits</span><span class="o">.</span><span class="n">ExponentialBackOff</span><span class="p">(</span><span class="n">maximum</span><span class="o">=</span><span class="n">_MAX_BACKOFF_DURATION</span><span class="p">)</span>

                    <span class="n">sleep_time</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">backoff</span><span class="p">)</span>
                    <span class="n">_LOGGER</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                        <span class="s2">&quot;Received status </span><span class="si">%s</span><span class="s2"> on request, backing off for </span><span class="si">%.2f</span><span class="s2">s and retrying. Retries remaining: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
                        <span class="n">response</span><span class="o">.</span><span class="n">status</span><span class="p">,</span>
                        <span class="n">sleep_time</span><span class="p">,</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_max_retries</span> <span class="o">-</span> <span class="n">retry_count</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="n">retry_count</span> <span class="o">+=</span> <span class="mi">1</span>

                    <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">sleep_time</span><span class="p">)</span>
                    <span class="k">continue</span>

                <span class="c1"># Attempt to re-auth on UNAUTHORIZED if we are using a TokenStrategy</span>
                <span class="n">can_re_auth</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="mi">401</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span><span class="n">auth</span> <span class="ow">or</span> <span class="n">no_auth</span> <span class="ow">or</span> <span class="n">re_authed</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">can_re_auth</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="p">,</span> <span class="n">rest_api</span><span class="o">.</span><span class="n">TokenStrategy</span><span class="p">):</span>
                    <span class="k">assert</span> <span class="n">token</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="o">.</span><span class="n">invalidate</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
                    <span class="n">token</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="o">.</span><span class="n">acquire</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                    <span class="n">headers</span><span class="p">[</span><span class="n">_AUTHORIZATION_HEADER</span><span class="p">]</span> <span class="o">=</span> <span class="n">token</span>
                    <span class="n">re_authed</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">continue</span>

                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_error_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

            <span class="k">except</span> <span class="n">_RetryRequest</span><span class="p">:</span>
                <span class="k">continue</span>

    <span class="nd">@staticmethod</span>
    <span class="nd">@typing</span><span class="o">.</span><span class="n">final</span>
    <span class="k">def</span> <span class="nf">_stringify_http_message</span><span class="p">(</span><span class="n">headers</span><span class="p">:</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">Headers</span><span class="p">,</span> <span class="n">body</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;    </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="n">name</span> <span class="o">!=</span> <span class="n">_AUTHORIZATION_HEADER</span> <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot;    </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: **REDACTED TOKEN**&quot;</span>
            <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">headers</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">body</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">string</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">    &quot;</span>
            <span class="n">string</span> <span class="o">+=</span> <span class="n">body</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;ascii&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">)</span> <span class="k">else</span> <span class="nb">str</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">string</span>

    <span class="nd">@staticmethod</span>
    <span class="nd">@typing</span><span class="o">.</span><span class="n">final</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">_handle_error_response</span><span class="p">(</span><span class="n">response</span><span class="p">:</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientResponse</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">NoReturn</span><span class="p">:</span>
        <span class="k">raise</span> <span class="k">await</span> <span class="n">net</span><span class="o">.</span><span class="n">generate_error_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="nd">@typing</span><span class="o">.</span><span class="n">final</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">_parse_ratelimits</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">compiled_route</span><span class="p">:</span> <span class="n">routes</span><span class="o">.</span><span class="n">CompiledRoute</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientResponse</span><span class="p">,</span> <span class="n">live_attributes</span><span class="p">:</span> <span class="n">_LiveAttributes</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># Handle rate limiting.</span>
        <span class="n">resp_headers</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">headers</span>
        <span class="n">limit</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">resp_headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">_X_RATELIMIT_LIMIT_HEADER</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">))</span>
        <span class="n">remaining</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">resp_headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">_X_RATELIMIT_REMAINING_HEADER</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">))</span>
        <span class="n">bucket</span> <span class="o">=</span> <span class="n">resp_headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">_X_RATELIMIT_BUCKET_HEADER</span><span class="p">)</span>
        <span class="n">reset_after</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">resp_headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">_X_RATELIMIT_RESET_AFTER_HEADER</span><span class="p">,</span> <span class="s2">&quot;0&quot;</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">bucket</span><span class="p">:</span>
            <span class="n">live_attributes</span><span class="o">.</span><span class="n">still_alive</span><span class="p">()</span><span class="o">.</span><span class="n">buckets</span><span class="o">.</span><span class="n">update_rate_limits</span><span class="p">(</span>
                <span class="n">compiled_route</span><span class="o">=</span><span class="n">compiled_route</span><span class="p">,</span>
                <span class="n">bucket_header</span><span class="o">=</span><span class="n">bucket</span><span class="p">,</span>
                <span class="n">remaining_header</span><span class="o">=</span><span class="n">remaining</span><span class="p">,</span>
                <span class="n">limit_header</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span>
                <span class="n">reset_after</span><span class="o">=</span><span class="n">reset_after</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="n">http</span><span class="o">.</span><span class="n">HTTPStatus</span><span class="o">.</span><span class="n">TOO_MANY_REQUESTS</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="c1"># Discord have started applying ratelimits to operations on some endpoints</span>
        <span class="c1"># based on specific fields used in the JSON body.</span>
        <span class="c1"># This does not get reflected in the headers. The first we know is when we</span>
        <span class="c1"># get a 429.</span>
        <span class="c1"># The issue is that we may get the same response if Discord dynamically</span>
        <span class="c1"># adjusts the bucket ratelimits.</span>
        <span class="c1">#</span>
        <span class="c1"># We have no mechanism for handing field-based ratelimits, so if we get</span>
        <span class="c1"># to here, but notice remaining is greater than zero, we should just error.</span>
        <span class="c1">#</span>
        <span class="c1"># Seems Discord may raise this on some other undocumented cases, which</span>
        <span class="c1"># is nice of them. Apparently some dude spamming slurs in the Python</span>
        <span class="c1"># guild via a leaked webhook URL made people&#39;s clients exhibit this</span>
        <span class="c1"># behaviour.</span>
        <span class="c1">#</span>
        <span class="c1"># If we get ratelimited when running more than one bot under the same token,</span>
        <span class="c1"># or if the ratelimiting logic goes wrong, we will get a 429 and expect the</span>
        <span class="c1"># &quot;remaining&quot; header to be zeroed, or even negative as I don&#39;t trust that there</span>
        <span class="c1"># isn&#39;t some weird edge case here somewhere in Discord&#39;s implementation.</span>
        <span class="c1"># We can safely retry if this happens as acquiring the bucket will handle</span>
        <span class="c1"># this.</span>
        <span class="k">if</span> <span class="n">remaining</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">_LOGGER</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;rate limited on bucket </span><span class="si">%s</span><span class="s2">, maybe you are running more than one bot on this token? Retrying request...&quot;</span><span class="p">,</span>
                <span class="n">bucket</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="n">_RetryRequest</span>

        <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">content_type</span> <span class="o">!=</span> <span class="n">_APPLICATION_JSON</span><span class="p">:</span>
            <span class="c1"># We don&#39;t know exactly what this could imply. It is likely Cloudflare interfering</span>
            <span class="c1"># but I&#39;d rather we just give up than do something resulting in multiple failed</span>
            <span class="c1"># requests repeatedly.</span>
            <span class="k">raise</span> <span class="n">errors</span><span class="o">.</span><span class="n">HTTPResponseError</span><span class="p">(</span>
                <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">real_url</span><span class="p">),</span>
                <span class="n">http</span><span class="o">.</span><span class="n">HTTPStatus</span><span class="o">.</span><span class="n">TOO_MANY_REQUESTS</span><span class="p">,</span>
                <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span>
                <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span>
                <span class="sa">f</span><span class="s2">&quot;received rate limited response with unexpected response type </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">content_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="n">body</span> <span class="o">=</span> <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="n">body_retry_after</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">body</span><span class="p">[</span><span class="s2">&quot;retry_after&quot;</span><span class="p">])</span>

        <span class="k">if</span> <span class="n">body</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;global&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">_LOGGER</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="s2">&quot;rate limited on the global bucket. You should consider lowering the number of requests you make or &quot;</span>
                <span class="s2">&quot;contacting Discord to raise this limit. Backing off and retrying request...&quot;</span>
            <span class="p">)</span>
            <span class="n">live_attributes</span><span class="o">.</span><span class="n">still_alive</span><span class="p">()</span><span class="o">.</span><span class="n">global_rate_limit</span><span class="o">.</span><span class="n">throttle</span><span class="p">(</span><span class="n">body_retry_after</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">_RetryRequest</span>

        <span class="c1"># If the values are within 20% of each other by relativistic tolerance, it is probably</span>
        <span class="c1"># safe to retry the request, as they are likely the same value just with some</span>
        <span class="c1"># measuring difference. 20% was used as a rounded figure.</span>
        <span class="k">if</span> <span class="n">math</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">body_retry_after</span><span class="p">,</span> <span class="n">reset_after</span><span class="p">,</span> <span class="n">rel_tol</span><span class="o">=</span><span class="mf">0.20</span><span class="p">):</span>
            <span class="n">_LOGGER</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;rate limited on a sub bucket on bucket </span><span class="si">%s</span><span class="s2">, but it is safe to retry&quot;</span><span class="p">,</span> <span class="n">bucket</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">_RetryRequest</span>

        <span class="k">raise</span> <span class="n">errors</span><span class="o">.</span><span class="n">RateLimitedError</span><span class="p">(</span>
            <span class="n">url</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">real_url</span><span class="p">),</span>
            <span class="n">route</span><span class="o">=</span><span class="n">compiled_route</span><span class="p">,</span>
            <span class="n">headers</span><span class="o">=</span><span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span>
            <span class="n">raw_body</span><span class="o">=</span><span class="n">body</span><span class="p">,</span>
            <span class="n">retry_after</span><span class="o">=</span><span class="n">body_retry_after</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_channel</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">PartialChannel</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">channels_</span><span class="o">.</span><span class="n">PartialChannel</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_CHANNEL</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_channel</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cache</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">channels_</span><span class="o">.</span><span class="n">DMChannel</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_cache</span><span class="o">.</span><span class="n">set_dm_channel_id</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">recipient</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_channel</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildChannel</span><span class="p">],</span>
        <span class="o">/</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">topic</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">nsfw</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">bitrate</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">video_quality_mode</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">VideoQualityMode</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">user_limit</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">rate_limit_per_user</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">time</span><span class="o">.</span><span class="n">Intervalish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">region</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">voices</span><span class="o">.</span><span class="n">VoiceRegion</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">permission_overwrites</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">PermissionOverwrite</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">parent_category</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildCategory</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">channels_</span><span class="o">.</span><span class="n">PartialChannel</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_CHANNEL</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;position&quot;</span><span class="p">,</span> <span class="n">position</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;topic&quot;</span><span class="p">,</span> <span class="n">topic</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;nsfw&quot;</span><span class="p">,</span> <span class="n">nsfw</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;bitrate&quot;</span><span class="p">,</span> <span class="n">bitrate</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;video_quality_mode&quot;</span><span class="p">,</span> <span class="n">video_quality_mode</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;user_limit&quot;</span><span class="p">,</span> <span class="n">user_limit</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;rate_limit_per_user&quot;</span><span class="p">,</span> <span class="n">rate_limit_per_user</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">timespan_to_int</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;rtc_region&quot;</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;parent_id&quot;</span><span class="p">,</span> <span class="n">parent_category</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_array</span><span class="p">(</span>
            <span class="s2">&quot;permission_overwrites&quot;</span><span class="p">,</span>
            <span class="n">permission_overwrites</span><span class="p">,</span>
            <span class="n">conversion</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">serialize_permission_overwrite</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_channel</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">follow_channel</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">news_channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildNewsChannel</span><span class="p">],</span>
        <span class="n">target_channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildChannel</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">channels_</span><span class="o">.</span><span class="n">ChannelFollow</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_CHANNEL_FOLLOWERS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">news_channel</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;webhook_channel_id&quot;</span><span class="p">,</span> <span class="n">target_channel</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_channel_follow</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_channel</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">PartialChannel</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">channels_</span><span class="o">.</span><span class="n">PartialChannel</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_CHANNEL</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_channel</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_my_voice_state</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildStageChannel</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">suppress</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">request_to_speak</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedType</span><span class="p">,</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_MY_GUILD_VOICE_STATE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;channel_id&quot;</span><span class="p">,</span> <span class="n">channel</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;suppress&quot;</span><span class="p">,</span> <span class="n">suppress</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">request_to_speak</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">):</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;request_to_speak_timestamp&quot;</span><span class="p">,</span> <span class="n">request_to_speak</span><span class="o">.</span><span class="n">isoformat</span><span class="p">())</span>

        <span class="k">elif</span> <span class="n">request_to_speak</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;request_to_speak_timestamp&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">utc_datetime</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">())</span>

        <span class="k">elif</span> <span class="n">request_to_speak</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;request_to_speak_timestamp&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_voice_state</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildStageChannel</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">suppress</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_GUILD_VOICE_STATE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;channel_id&quot;</span><span class="p">,</span> <span class="n">channel</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;suppress&quot;</span><span class="p">,</span> <span class="n">suppress</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_permission_overwrites</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildChannel</span><span class="p">],</span>
        <span class="n">target</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span>
            <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflakeish</span><span class="p">,</span> <span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">,</span> <span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">,</span> <span class="n">channels_</span><span class="o">.</span><span class="n">PermissionOverwrite</span>
        <span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">target_type</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">PermissionOverwriteType</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">allow</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">permissions_</span><span class="o">.</span><span class="n">Permissions</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">deny</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">permissions_</span><span class="o">.</span><span class="n">Permissions</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">target_type</span> <span class="ow">is</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">):</span>
                <span class="n">target_type</span> <span class="o">=</span> <span class="n">channels_</span><span class="o">.</span><span class="n">PermissionOverwriteType</span><span class="o">.</span><span class="n">MEMBER</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">guilds</span><span class="o">.</span><span class="n">Role</span><span class="p">):</span>
                <span class="n">target_type</span> <span class="o">=</span> <span class="n">channels_</span><span class="o">.</span><span class="n">PermissionOverwriteType</span><span class="o">.</span><span class="n">ROLE</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">channels_</span><span class="o">.</span><span class="n">PermissionOverwrite</span><span class="p">):</span>
                <span class="n">target_type</span> <span class="o">=</span> <span class="n">target</span><span class="o">.</span><span class="n">type</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                    <span class="s2">&quot;Cannot determine the type of the target to update. Try specifying &#39;target_type&#39; manually.&quot;</span>
                <span class="p">)</span>

        <span class="n">target</span> <span class="o">=</span> <span class="n">target</span><span class="o">.</span><span class="n">id</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">channels_</span><span class="o">.</span><span class="n">PermissionOverwrite</span><span class="p">)</span> <span class="k">else</span> <span class="n">target</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PUT_CHANNEL_PERMISSIONS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="n">target</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="n">target_type</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;allow&quot;</span><span class="p">,</span> <span class="n">allow</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;deny&quot;</span><span class="p">,</span> <span class="n">deny</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_permission_overwrite</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildChannel</span><span class="p">],</span>
        <span class="n">target</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span>
            <span class="n">channels_</span><span class="o">.</span><span class="n">PermissionOverwrite</span><span class="p">,</span> <span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">,</span> <span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">,</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflakeish</span>
        <span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_CHANNEL_PERMISSIONS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="n">target</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_channel_invites</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildChannel</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">invites</span><span class="o">.</span><span class="n">InviteWithMetadata</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_CHANNEL_INVITES</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_invite_with_metadata</span><span class="p">(</span><span class="n">invite_payload</span><span class="p">)</span> <span class="k">for</span> <span class="n">invite_payload</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_invite</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildChannel</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">max_age</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">time</span><span class="o">.</span><span class="n">Intervalish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">max_uses</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">temporary</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">unique</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">target_type</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">invites</span><span class="o">.</span><span class="n">TargetType</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">target_user</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">target_application</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">invites</span><span class="o">.</span><span class="n">InviteWithMetadata</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_CHANNEL_INVITES</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;max_age&quot;</span><span class="p">,</span> <span class="n">max_age</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">timespan_to_int</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;max_uses&quot;</span><span class="p">,</span> <span class="n">max_uses</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;temporary&quot;</span><span class="p">,</span> <span class="n">temporary</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;unique&quot;</span><span class="p">,</span> <span class="n">unique</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;target_type&quot;</span><span class="p">,</span> <span class="n">target_type</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;target_user_id&quot;</span><span class="p">,</span> <span class="n">target_user</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;target_application_id&quot;</span><span class="p">,</span> <span class="n">target_application</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_invite_with_metadata</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">trigger_typing</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">special_endpoints</span><span class="o">.</span><span class="n">TypingIndicator</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">special_endpoints_impl</span><span class="o">.</span><span class="n">TypingIndicator</span><span class="p">(</span>
            <span class="n">request_call</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span> <span class="n">rest_closed_event</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_live_attributes</span><span class="p">()</span><span class="o">.</span><span class="n">closed_event</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_pins</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_CHANNEL_PINS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_message</span><span class="p">(</span><span class="n">message_pl</span><span class="p">)</span> <span class="k">for</span> <span class="n">message_pl</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">pin_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">],</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PUT_CHANNEL_PINS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">unpin_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">],</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_CHANNEL_PIN</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">fetch_messages</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">before</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SearchableSnowflakeishOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Unique</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">after</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SearchableSnowflakeishOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Unique</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">around</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SearchableSnowflakeishOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Unique</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">iterators</span><span class="o">.</span><span class="n">LazyIterator</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">undefined</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">before</span><span class="p">,</span> <span class="n">after</span><span class="p">,</span> <span class="n">around</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Expected no kwargs, or a maximum of one of &#39;before&#39;, &#39;after&#39;, &#39;around&#39;&quot;</span><span class="p">)</span>

        <span class="n">timestamp</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">before</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">direction</span> <span class="o">=</span> <span class="s2">&quot;before&quot;</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">before</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">):</span>
                <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="o">.</span><span class="n">from_datetime</span><span class="p">(</span><span class="n">before</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">before</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">after</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">direction</span> <span class="o">=</span> <span class="s2">&quot;after&quot;</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">after</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">):</span>
                <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="o">.</span><span class="n">from_datetime</span><span class="p">(</span><span class="n">after</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">after</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">around</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">direction</span> <span class="o">=</span> <span class="s2">&quot;around&quot;</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">around</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">):</span>
                <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="o">.</span><span class="n">from_datetime</span><span class="p">(</span><span class="n">around</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">around</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">direction</span> <span class="o">=</span> <span class="s2">&quot;before&quot;</span>
            <span class="n">timestamp</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span>

        <span class="k">return</span> <span class="n">special_endpoints_impl</span><span class="o">.</span><span class="n">MessageIterator</span><span class="p">(</span>
            <span class="n">entity_factory</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="p">,</span>
            <span class="n">request_call</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">,</span>
            <span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span>
            <span class="n">direction</span><span class="o">=</span><span class="n">direction</span><span class="p">,</span>
            <span class="n">first_id</span><span class="o">=</span><span class="n">timestamp</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">],</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_CHANNEL_MESSAGE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_message</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">_create_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">route</span><span class="p">:</span> <span class="n">routes</span><span class="o">.</span><span class="n">CompiledRoute</span><span class="p">,</span>
        <span class="n">body</span><span class="p">:</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">,</span>
        <span class="n">query</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">data_binding</span><span class="o">.</span><span class="n">StringMapBuilder</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">no_auth</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">content</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span>
        <span class="n">attachment</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">],</span>
        <span class="n">attachments</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]],</span>
        <span class="n">component</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">components</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">embed</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">],</span>
        <span class="n">embeds</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">]],</span>
        <span class="n">tts</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">],</span>
        <span class="n">mentions_everyone</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">],</span>
        <span class="n">mentions_reply</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">],</span>
        <span class="n">user_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]],</span>
        <span class="n">role_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">any_undefined</span><span class="p">(</span><span class="n">attachment</span><span class="p">,</span> <span class="n">attachments</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;You may only specify one of &#39;attachment&#39; or &#39;attachments&#39;, not both&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">any_undefined</span><span class="p">(</span><span class="n">component</span><span class="p">,</span> <span class="n">components</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;You may only specify one of &#39;component&#39; or &#39;components&#39;, not both&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">any_undefined</span><span class="p">(</span><span class="n">embed</span><span class="p">,</span> <span class="n">embeds</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;You may only specify one of &#39;embed&#39; or &#39;embeds&#39;, not both&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">attachments</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">attachments</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Collection</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s2">&quot;You passed a non-collection to &#39;attachments&#39;, but this expects a collection. Maybe you meant to &quot;</span>
                <span class="s2">&quot;use &#39;attachment&#39; (singular) instead?&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">components</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">components</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Collection</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s2">&quot;You passed a non-collection to &#39;components&#39;, but this expects a collection. Maybe you meant to &quot;</span>
                <span class="s2">&quot;use &#39;component&#39; (singular) instead?&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">embeds</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">_NONE_OR_UNDEFINED</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">embeds</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Collection</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s2">&quot;You passed a non-collection to &#39;embeds&#39;, but this expects a collection. Maybe you meant to &quot;</span>
                <span class="s2">&quot;use &#39;embed&#39; (singular) instead?&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">undefined</span><span class="o">.</span><span class="n">all_undefined</span><span class="p">(</span><span class="n">embed</span><span class="p">,</span> <span class="n">embeds</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">):</span>
            <span class="c1"># Syntactic sugar, common mistake to accidentally send an embed</span>
            <span class="c1"># as the content, so lets detect this and fix it for the user.</span>
            <span class="n">embed</span> <span class="o">=</span> <span class="n">content</span>
            <span class="n">content</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span>

        <span class="k">elif</span> <span class="n">undefined</span><span class="o">.</span><span class="n">all_undefined</span><span class="p">(</span><span class="n">attachment</span><span class="p">,</span> <span class="n">attachments</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span>
            <span class="n">content</span><span class="p">,</span> <span class="p">(</span><span class="n">files</span><span class="o">.</span><span class="n">Resource</span><span class="p">,</span> <span class="n">files</span><span class="o">.</span><span class="n">RAWISH_TYPES</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">)</span>
        <span class="p">):</span>
            <span class="c1"># Syntactic sugar, common mistake to accidentally send an attachment</span>
            <span class="c1"># as the content, so lets detect this and fix it for the user. This</span>
            <span class="c1"># will still then work with normal implicit embed attachments as</span>
            <span class="c1"># we work this out later.</span>
            <span class="n">attachment</span> <span class="o">=</span> <span class="n">content</span>
            <span class="n">content</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span>

        <span class="n">final_attachments</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resource</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">AsyncReader</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">attachment</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">final_attachments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">files</span><span class="o">.</span><span class="n">ensure_resource</span><span class="p">(</span><span class="n">attachment</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">attachments</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">final_attachments</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">files</span><span class="o">.</span><span class="n">ensure_resource</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">attachments</span><span class="p">])</span>

        <span class="k">if</span> <span class="n">component</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;components&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">component</span><span class="o">.</span><span class="n">build</span><span class="p">()])</span>

        <span class="k">elif</span> <span class="n">components</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;components&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">component</span><span class="o">.</span><span class="n">build</span><span class="p">()</span> <span class="k">for</span> <span class="n">component</span> <span class="ow">in</span> <span class="n">components</span><span class="p">])</span>

        <span class="n">serialized_embeds</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">data_binding</span><span class="o">.</span><span class="n">JSONArray</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span>

        <span class="k">if</span> <span class="n">embed</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">embed_payload</span><span class="p">,</span> <span class="n">embed_attachments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">serialize_embed</span><span class="p">(</span><span class="n">embed</span><span class="p">)</span>
            <span class="n">final_attachments</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">embed_attachments</span><span class="p">)</span>
            <span class="n">serialized_embeds</span> <span class="o">=</span> <span class="p">[</span><span class="n">embed_payload</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">embeds</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">serialized_embeds</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">embed</span> <span class="ow">in</span> <span class="n">embeds</span><span class="p">:</span>
                <span class="n">embed_payload</span><span class="p">,</span> <span class="n">embed_attachments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">serialize_embed</span><span class="p">(</span><span class="n">embed</span><span class="p">)</span>
                <span class="n">final_attachments</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">embed_attachments</span><span class="p">)</span>
                <span class="n">serialized_embeds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">embed_payload</span><span class="p">)</span>

        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
            <span class="s2">&quot;allowed_mentions&quot;</span><span class="p">,</span>
            <span class="n">mentions</span><span class="o">.</span><span class="n">generate_allowed_mentions</span><span class="p">(</span><span class="n">mentions_everyone</span><span class="p">,</span> <span class="n">mentions_reply</span><span class="p">,</span> <span class="n">user_mentions</span><span class="p">,</span> <span class="n">role_mentions</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;content&quot;</span><span class="p">,</span> <span class="n">content</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;tts&quot;</span><span class="p">,</span> <span class="n">tts</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;embeds&quot;</span><span class="p">,</span> <span class="n">serialized_embeds</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">final_attachments</span><span class="p">:</span>
            <span class="n">form</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">URLEncodedFormBuilder</span><span class="p">(</span><span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">)</span>
            <span class="n">form</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">&quot;payload_json&quot;</span><span class="p">,</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">dump_json</span><span class="p">(</span><span class="n">body</span><span class="p">),</span> <span class="n">content_type</span><span class="o">=</span><span class="n">_APPLICATION_JSON</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">attachment</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">final_attachments</span><span class="p">):</span>
                <span class="n">form</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;file</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">attachment</span><span class="p">)</span>

            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">form_builder</span><span class="o">=</span><span class="n">form</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="n">query</span><span class="p">,</span> <span class="n">no_auth</span><span class="o">=</span><span class="n">no_auth</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="n">query</span><span class="p">,</span> <span class="n">no_auth</span><span class="o">=</span><span class="n">no_auth</span><span class="p">)</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_message</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">],</span>
        <span class="n">content</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">attachment</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">attachments</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">component</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">components</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">embed</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">embeds</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">tts</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">nonce</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reply</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">mentions_everyone</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">mentions_reply</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">user_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">role_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_CHANNEL_MESSAGES</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;nonce&quot;</span><span class="p">,</span> <span class="n">nonce</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;message_reference&quot;</span><span class="p">,</span> <span class="n">reply</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="k">lambda</span> <span class="n">m</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;message_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">m</span><span class="p">))})</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_message</span><span class="p">(</span>
            <span class="n">route</span><span class="p">,</span>
            <span class="n">body</span><span class="p">,</span>
            <span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span>
            <span class="n">attachment</span><span class="o">=</span><span class="n">attachment</span><span class="p">,</span>
            <span class="n">attachments</span><span class="o">=</span><span class="n">attachments</span><span class="p">,</span>
            <span class="n">component</span><span class="o">=</span><span class="n">component</span><span class="p">,</span>
            <span class="n">components</span><span class="o">=</span><span class="n">components</span><span class="p">,</span>
            <span class="n">embed</span><span class="o">=</span><span class="n">embed</span><span class="p">,</span>
            <span class="n">embeds</span><span class="o">=</span><span class="n">embeds</span><span class="p">,</span>
            <span class="n">tts</span><span class="o">=</span><span class="n">tts</span><span class="p">,</span>
            <span class="n">mentions_everyone</span><span class="o">=</span><span class="n">mentions_everyone</span><span class="p">,</span>
            <span class="n">mentions_reply</span><span class="o">=</span><span class="n">mentions_reply</span><span class="p">,</span>
            <span class="n">user_mentions</span><span class="o">=</span><span class="n">user_mentions</span><span class="p">,</span>
            <span class="n">role_mentions</span><span class="o">=</span><span class="n">role_mentions</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">crosspost_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildNewsChannel</span><span class="p">],</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_CHANNEL_CROSSPOST</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_message</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">_edit_message</span><span class="p">(</span>  <span class="c1"># noqa: C901 - Function too complex</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">route</span><span class="p">:</span> <span class="n">routes</span><span class="o">.</span><span class="n">CompiledRoute</span><span class="p">,</span>
        <span class="n">body</span><span class="p">:</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">no_auth</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">content</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span>
        <span class="n">attachment</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">],</span>
        <span class="n">attachments</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]],</span>
        <span class="n">component</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">components</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">embed</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">],</span>
        <span class="n">embeds</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">]],</span>
        <span class="n">replace_attachments</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">mentions_everyone</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">],</span>
        <span class="n">mentions_reply</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">],</span>
        <span class="n">user_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]],</span>
        <span class="n">role_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">any_undefined</span><span class="p">(</span><span class="n">attachment</span><span class="p">,</span> <span class="n">attachments</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;You may only specify one of &#39;attachment&#39; or &#39;attachments&#39;, not both&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">any_undefined</span><span class="p">(</span><span class="n">component</span><span class="p">,</span> <span class="n">components</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;You may only specify one of &#39;component&#39; or &#39;components&#39;, not both&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">any_undefined</span><span class="p">(</span><span class="n">embed</span><span class="p">,</span> <span class="n">embeds</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;You may only specify one of &#39;embed&#39; or &#39;embeds&#39;, not both&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">attachments</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">attachments</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Collection</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s2">&quot;You passed a non-collection to &#39;attachments&#39;, but this expects a collection. Maybe you meant to &quot;</span>
                <span class="s2">&quot;use &#39;attachment&#39; (singular) instead?&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">components</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">components</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Collection</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s2">&quot;You passed a non-collection to &#39;components&#39;, but this expects a collection. Maybe you meant to &quot;</span>
                <span class="s2">&quot;use &#39;component&#39; (singular) instead?&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">embeds</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">_NONE_OR_UNDEFINED</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">embeds</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Collection</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s2">&quot;You passed a non-collection to &#39;embeds&#39;, but this expects a collection. Maybe you meant to &quot;</span>
                <span class="s2">&quot;use &#39;embed&#39; (singular) instead?&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">all_undefined</span><span class="p">(</span><span class="n">mentions_everyone</span><span class="p">,</span> <span class="n">mentions_reply</span><span class="p">,</span> <span class="n">user_mentions</span><span class="p">,</span> <span class="n">role_mentions</span><span class="p">):</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
                <span class="s2">&quot;allowed_mentions&quot;</span><span class="p">,</span>
                <span class="n">mentions</span><span class="o">.</span><span class="n">generate_allowed_mentions</span><span class="p">(</span><span class="n">mentions_everyone</span><span class="p">,</span> <span class="n">mentions_reply</span><span class="p">,</span> <span class="n">user_mentions</span><span class="p">,</span> <span class="n">role_mentions</span><span class="p">),</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">embed</span> <span class="ow">is</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">):</span>
            <span class="c1"># Syntactic sugar, common mistake to accidentally send an embed</span>
            <span class="c1"># as the content, so lets detect this and fix it for the user.</span>
            <span class="n">embed</span> <span class="o">=</span> <span class="n">content</span>
            <span class="n">content</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span>
        <span class="k">elif</span> <span class="n">undefined</span><span class="o">.</span><span class="n">all_undefined</span><span class="p">(</span><span class="n">attachment</span><span class="p">,</span> <span class="n">attachments</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span>
            <span class="n">content</span><span class="p">,</span> <span class="p">(</span><span class="n">files</span><span class="o">.</span><span class="n">Resource</span><span class="p">,</span> <span class="n">files</span><span class="o">.</span><span class="n">RAWISH_TYPES</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">)</span>
        <span class="p">):</span>
            <span class="c1"># Syntactic sugar, common mistake to accidentally send an attachment</span>
            <span class="c1"># as the content, so lets detect this and fix it for the user. This</span>
            <span class="c1"># will still then work with normal implicit embed attachments as</span>
            <span class="c1"># we work this out later.</span>
            <span class="n">attachment</span> <span class="o">=</span> <span class="n">content</span>
            <span class="n">content</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span>

        <span class="k">if</span> <span class="n">content</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;content&quot;</span><span class="p">,</span> <span class="n">content</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;content&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="n">final_attachments</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resource</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">AsyncReader</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">attachment</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">final_attachments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">files</span><span class="o">.</span><span class="n">ensure_resource</span><span class="p">(</span><span class="n">attachment</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">attachments</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">final_attachments</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">files</span><span class="o">.</span><span class="n">ensure_resource</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">attachments</span><span class="p">])</span>

        <span class="n">serialized_components</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObject</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">component</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">component</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">serialized_components</span> <span class="o">=</span> <span class="p">[</span><span class="n">component</span><span class="o">.</span><span class="n">build</span><span class="p">()]</span>

            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;components&quot;</span><span class="p">,</span> <span class="n">serialized_components</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">components</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">components</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">serialized_components</span> <span class="o">=</span> <span class="p">[</span><span class="n">component</span><span class="o">.</span><span class="n">build</span><span class="p">()</span> <span class="k">for</span> <span class="n">component</span> <span class="ow">in</span> <span class="n">components</span><span class="p">]</span>

            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;components&quot;</span><span class="p">,</span> <span class="n">serialized_components</span><span class="p">)</span>

        <span class="n">serialized_embeds</span><span class="p">:</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONArray</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">update_embeds</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">embed</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">update_embeds</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">if</span> <span class="n">embed</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">embed_payload</span><span class="p">,</span> <span class="n">embed_attachments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">serialize_embed</span><span class="p">(</span><span class="n">embed</span><span class="p">)</span>
                <span class="n">serialized_embeds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">embed_payload</span><span class="p">)</span>
                <span class="n">final_attachments</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">embed_attachments</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">embeds</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">update_embeds</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">if</span> <span class="n">embeds</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">embed</span> <span class="ow">in</span> <span class="n">embeds</span><span class="p">:</span>
                    <span class="n">embed_payload</span><span class="p">,</span> <span class="n">embed_attachments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">serialize_embed</span><span class="p">(</span><span class="n">embed</span><span class="p">)</span>
                    <span class="n">serialized_embeds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">embed_payload</span><span class="p">)</span>
                    <span class="n">final_attachments</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">embed_attachments</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">update_embeds</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;embeds&quot;</span><span class="p">,</span> <span class="n">serialized_embeds</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">replace_attachments</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;attachments&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">final_attachments</span><span class="p">:</span>
            <span class="n">form_builder</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">URLEncodedFormBuilder</span><span class="p">(</span><span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">)</span>
            <span class="n">form_builder</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">&quot;payload_json&quot;</span><span class="p">,</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">dump_json</span><span class="p">(</span><span class="n">body</span><span class="p">),</span> <span class="n">content_type</span><span class="o">=</span><span class="n">_APPLICATION_JSON</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">attachment</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">final_attachments</span><span class="p">):</span>
                <span class="n">form_builder</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;file</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">attachment</span><span class="p">)</span>

            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">form_builder</span><span class="o">=</span><span class="n">form_builder</span><span class="p">,</span> <span class="n">no_auth</span><span class="o">=</span><span class="n">no_auth</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">no_auth</span><span class="o">=</span><span class="n">no_auth</span><span class="p">)</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_message</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">],</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
        <span class="n">content</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">attachment</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">attachments</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">component</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">components</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">embed</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">embeds</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">replace_attachments</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">mentions_everyone</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">mentions_reply</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">user_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">role_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">flags</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">MessageFlag</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_CHANNEL_MESSAGE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;flags&quot;</span><span class="p">,</span> <span class="n">flags</span><span class="p">)</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_edit_message</span><span class="p">(</span>
            <span class="n">route</span><span class="p">,</span>
            <span class="n">body</span><span class="p">,</span>
            <span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span>
            <span class="n">attachment</span><span class="o">=</span><span class="n">attachment</span><span class="p">,</span>
            <span class="n">attachments</span><span class="o">=</span><span class="n">attachments</span><span class="p">,</span>
            <span class="n">component</span><span class="o">=</span><span class="n">component</span><span class="p">,</span>
            <span class="n">components</span><span class="o">=</span><span class="n">components</span><span class="p">,</span>
            <span class="n">embed</span><span class="o">=</span><span class="n">embed</span><span class="p">,</span>
            <span class="n">embeds</span><span class="o">=</span><span class="n">embeds</span><span class="p">,</span>
            <span class="n">replace_attachments</span><span class="o">=</span><span class="n">replace_attachments</span><span class="p">,</span>
            <span class="n">mentions_everyone</span><span class="o">=</span><span class="n">mentions_everyone</span><span class="p">,</span>
            <span class="n">mentions_reply</span><span class="o">=</span><span class="n">mentions_reply</span><span class="p">,</span>
            <span class="n">user_mentions</span><span class="o">=</span><span class="n">user_mentions</span><span class="p">,</span>
            <span class="n">role_mentions</span><span class="o">=</span><span class="n">role_mentions</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">],</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_CHANNEL_MESSAGE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_messages</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">],</span>
        <span class="n">messages</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span>
            <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
            <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishIterable</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
        <span class="p">],</span>
        <span class="o">/</span><span class="p">,</span>
        <span class="o">*</span><span class="n">other_messages</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_DELETE_CHANNEL_MESSAGES_BULK</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">)</span>

        <span class="n">pending</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">deleted</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">):</span>  <span class="c1"># Syntactic sugar. Allows to use iterables</span>
            <span class="n">pending</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">pending</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>

        <span class="c1"># This maintains the order in-order to keep a predictable deletion order.</span>
        <span class="n">pending</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">other_messages</span><span class="p">)</span>

        <span class="k">while</span> <span class="n">pending</span><span class="p">:</span>
            <span class="c1"># Discord only allows 2-100 messages in the BULK_DELETE endpoint. Because of that,</span>
            <span class="c1"># if the user wants 101 messages deleted, we will post 100 messages in bulk delete</span>
            <span class="c1"># and then the last message in a normal delete.</span>
            <span class="c1"># Along with this, the bucket size for v6 and v7 seems to be a bit restrictive. As of</span>
            <span class="c1"># 30th July 2020, this endpoint returned the following headers when being ratelimited:</span>
            <span class="c1">#       x-ratelimit-bucket         b05c0d8c2ab83895085006a8eae073a3</span>
            <span class="c1">#       x-ratelimit-limit          1</span>
            <span class="c1">#       x-ratelimit-remaining      0</span>
            <span class="c1">#       x-ratelimit-reset          1596033974.096</span>
            <span class="c1">#       x-ratelimit-reset-after    3.000</span>
            <span class="c1"># This kind of defeats the point of asynchronously gathering any of these</span>
            <span class="c1"># in the first place really. To save clogging up the event loop</span>
            <span class="c1"># (albeit at a cost of maybe a couple-dozen milliseconds per call),</span>
            <span class="c1"># I am just gonna invoke these sequentially instead.</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">pending</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">message</span> <span class="o">=</span> <span class="n">pending</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">delete_message</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
                    <span class="k">except</span> <span class="n">errors</span><span class="o">.</span><span class="n">NotFoundError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
                        <span class="c1"># If the message is not found then this error should be suppressed</span>
                        <span class="c1"># to keep consistency with how the bulk delete endpoint functions.</span>
                        <span class="k">if</span> <span class="n">exc</span><span class="o">.</span><span class="n">code</span> <span class="o">!=</span> <span class="mi">10008</span><span class="p">:</span>  <span class="c1"># Unknown Message</span>
                            <span class="k">raise</span>

                    <span class="n">deleted</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
                    <span class="n">chunk</span> <span class="o">=</span> <span class="n">pending</span><span class="p">[:</span><span class="mi">100</span><span class="p">]</span>
                    <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake_array</span><span class="p">(</span><span class="s2">&quot;messages&quot;</span><span class="p">,</span> <span class="n">chunk</span><span class="p">)</span>
                    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>
                    <span class="n">deleted</span> <span class="o">+=</span> <span class="n">chunk</span>

                <span class="n">pending</span> <span class="o">=</span> <span class="n">pending</span><span class="p">[</span><span class="mi">100</span><span class="p">:]</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">errors</span><span class="o">.</span><span class="n">BulkDeleteError</span><span class="p">(</span><span class="n">deleted</span><span class="p">,</span> <span class="n">pending</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">ex</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_transform_emoji_to_url_format</span><span class="p">(</span>
        <span class="n">emoji</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">emojis</span><span class="o">.</span><span class="n">Emoji</span><span class="p">],</span>
        <span class="n">emoji_id</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">emojis</span><span class="o">.</span><span class="n">CustomEmoji</span><span class="p">]],</span>
        <span class="o">/</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">emoji</span><span class="p">,</span> <span class="n">emojis</span><span class="o">.</span><span class="n">Emoji</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">emoji_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;emoji_id shouldn&#39;t be passed when an Emoji object is passed for emoji&quot;</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">emoji</span><span class="o">.</span><span class="n">url_name</span>

        <span class="k">if</span> <span class="n">emoji_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">emoji</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">emoji_id</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="k">return</span> <span class="n">emoji</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">add_reaction</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">],</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
        <span class="n">emoji</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">emojis</span><span class="o">.</span><span class="n">Emoji</span><span class="p">],</span>
        <span class="n">emoji_id</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">emojis</span><span class="o">.</span><span class="n">CustomEmoji</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PUT_MY_REACTION</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
            <span class="n">emoji</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_transform_emoji_to_url_format</span><span class="p">(</span><span class="n">emoji</span><span class="p">,</span> <span class="n">emoji_id</span><span class="p">),</span>
            <span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span>
            <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_my_reaction</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">],</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
        <span class="n">emoji</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">emojis</span><span class="o">.</span><span class="n">Emoji</span><span class="p">],</span>
        <span class="n">emoji_id</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">emojis</span><span class="o">.</span><span class="n">CustomEmoji</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_MY_REACTION</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
            <span class="n">emoji</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_transform_emoji_to_url_format</span><span class="p">(</span><span class="n">emoji</span><span class="p">,</span> <span class="n">emoji_id</span><span class="p">),</span>
            <span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span>
            <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_all_reactions_for_emoji</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">],</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
        <span class="n">emoji</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">emojis</span><span class="o">.</span><span class="n">Emoji</span><span class="p">],</span>
        <span class="n">emoji_id</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">emojis</span><span class="o">.</span><span class="n">CustomEmoji</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_REACTION_EMOJI</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
            <span class="n">emoji</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_transform_emoji_to_url_format</span><span class="p">(</span><span class="n">emoji</span><span class="p">,</span> <span class="n">emoji_id</span><span class="p">),</span>
            <span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span>
            <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_reaction</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">],</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span>
        <span class="n">emoji</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">emojis</span><span class="o">.</span><span class="n">Emoji</span><span class="p">],</span>
        <span class="n">emoji_id</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">emojis</span><span class="o">.</span><span class="n">CustomEmoji</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_REACTION_USER</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
            <span class="n">emoji</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_transform_emoji_to_url_format</span><span class="p">(</span><span class="n">emoji</span><span class="p">,</span> <span class="n">emoji_id</span><span class="p">),</span>
            <span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span>
            <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span>
            <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_all_reactions</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">],</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_ALL_REACTIONS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">fetch_reactions_for_emoji</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">],</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
        <span class="n">emoji</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">emojis</span><span class="o">.</span><span class="n">Emoji</span><span class="p">],</span>
        <span class="n">emoji_id</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">emojis</span><span class="o">.</span><span class="n">CustomEmoji</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">iterators</span><span class="o">.</span><span class="n">LazyIterator</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">User</span><span class="p">]:</span>
        <span class="k">return</span> <span class="n">special_endpoints_impl</span><span class="o">.</span><span class="n">ReactorIterator</span><span class="p">(</span>
            <span class="n">entity_factory</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="p">,</span>
            <span class="n">request_call</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">,</span>
            <span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span>
            <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span>
            <span class="n">emoji</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_transform_emoji_to_url_format</span><span class="p">(</span><span class="n">emoji</span><span class="p">,</span> <span class="n">emoji_id</span><span class="p">),</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_webhook</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">WebhookChannelT</span><span class="p">],</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">avatar</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">webhooks</span><span class="o">.</span><span class="n">IncomingWebhook</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_CHANNEL_WEBHOOKS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">avatar</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">avatar_resource</span> <span class="o">=</span> <span class="n">files</span><span class="o">.</span><span class="n">ensure_resource</span><span class="p">(</span><span class="n">avatar</span><span class="p">)</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">avatar_resource</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
                <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;avatar&quot;</span><span class="p">,</span> <span class="k">await</span> <span class="n">stream</span><span class="o">.</span><span class="n">data_uri</span><span class="p">())</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_incoming_webhook</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_webhook</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">webhook</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">webhooks</span><span class="o">.</span><span class="n">PartialWebhook</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">token</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">webhooks</span><span class="o">.</span><span class="n">PartialWebhook</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">token</span> <span class="ow">is</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_WEBHOOK</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">webhook</span><span class="o">=</span><span class="n">webhook</span><span class="p">)</span>
            <span class="n">no_auth</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_WEBHOOK_WITH_TOKEN</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">webhook</span><span class="o">=</span><span class="n">webhook</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">)</span>
            <span class="n">no_auth</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">no_auth</span><span class="o">=</span><span class="n">no_auth</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_webhook</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_channel_webhooks</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">WebhookChannelT</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">webhooks</span><span class="o">.</span><span class="n">PartialWebhook</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_CHANNEL_WEBHOOKS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_webhook</span><span class="p">(</span><span class="n">webhook_pl</span><span class="p">)</span> <span class="k">for</span> <span class="n">webhook_pl</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_guild_webhooks</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">webhooks</span><span class="o">.</span><span class="n">PartialWebhook</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_WEBHOOKS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_webhook</span><span class="p">(</span><span class="n">webhook_payload</span><span class="p">)</span> <span class="k">for</span> <span class="n">webhook_payload</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_webhook</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">webhook</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">webhooks</span><span class="o">.</span><span class="n">PartialWebhook</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">token</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">avatar</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">WebhookChannelT</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">webhooks</span><span class="o">.</span><span class="n">PartialWebhook</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">token</span> <span class="ow">is</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_WEBHOOK</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">webhook</span><span class="o">=</span><span class="n">webhook</span><span class="p">)</span>
            <span class="n">no_auth</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_WEBHOOK_WITH_TOKEN</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">webhook</span><span class="o">=</span><span class="n">webhook</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">)</span>
            <span class="n">no_auth</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;channel&quot;</span><span class="p">,</span> <span class="n">channel</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">avatar</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;avatar&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">avatar</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">avatar_resource</span> <span class="o">=</span> <span class="n">files</span><span class="o">.</span><span class="n">ensure_resource</span><span class="p">(</span><span class="n">avatar</span><span class="p">)</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">avatar_resource</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
                <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;avatar&quot;</span><span class="p">,</span> <span class="k">await</span> <span class="n">stream</span><span class="o">.</span><span class="n">data_uri</span><span class="p">())</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">,</span> <span class="n">no_auth</span><span class="o">=</span><span class="n">no_auth</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_webhook</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_webhook</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">webhook</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">webhooks</span><span class="o">.</span><span class="n">PartialWebhook</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">token</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">token</span> <span class="ow">is</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_WEBHOOK</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">webhook</span><span class="o">=</span><span class="n">webhook</span><span class="p">)</span>
            <span class="n">no_auth</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_WEBHOOK_WITH_TOKEN</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">webhook</span><span class="o">=</span><span class="n">webhook</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">)</span>
            <span class="n">no_auth</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">no_auth</span><span class="o">=</span><span class="n">no_auth</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">execute_webhook</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">webhook</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">webhooks</span><span class="o">.</span><span class="n">ExecutableWebhook</span><span class="p">,</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflakeish</span><span class="p">],</span>
        <span class="n">token</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">content</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">username</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">avatar_url</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedType</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">files</span><span class="o">.</span><span class="n">URL</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">attachment</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">attachments</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">component</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">components</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">embed</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">embeds</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">tts</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">mentions_everyone</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">user_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">role_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">flags</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedType</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="n">messages_</span><span class="o">.</span><span class="n">MessageFlag</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">:</span>
        <span class="c1"># int(ExecutableWebhook) isn&#39;t guaranteed to be valid nor the ID used to execute this entity as a webhook.</span>
        <span class="n">webhook_id</span> <span class="o">=</span> <span class="n">webhook</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">webhook</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="k">else</span> <span class="n">webhook</span><span class="o">.</span><span class="n">webhook_id</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_WEBHOOK_WITH_TOKEN</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">webhook</span><span class="o">=</span><span class="n">webhook_id</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">)</span>

        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;username&quot;</span><span class="p">,</span> <span class="n">username</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;avatar_url&quot;</span><span class="p">,</span> <span class="n">avatar_url</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;flags&quot;</span><span class="p">,</span> <span class="n">flags</span><span class="p">)</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">StringMapBuilder</span><span class="p">()</span>
        <span class="n">query</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;wait&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_message</span><span class="p">(</span>
            <span class="n">route</span><span class="p">,</span>
            <span class="n">body</span><span class="p">,</span>
            <span class="n">query</span><span class="p">,</span>
            <span class="n">no_auth</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span>
            <span class="n">attachment</span><span class="o">=</span><span class="n">attachment</span><span class="p">,</span>
            <span class="n">attachments</span><span class="o">=</span><span class="n">attachments</span><span class="p">,</span>
            <span class="n">component</span><span class="o">=</span><span class="n">component</span><span class="p">,</span>
            <span class="n">components</span><span class="o">=</span><span class="n">components</span><span class="p">,</span>
            <span class="n">embed</span><span class="o">=</span><span class="n">embed</span><span class="p">,</span>
            <span class="n">embeds</span><span class="o">=</span><span class="n">embeds</span><span class="p">,</span>
            <span class="n">tts</span><span class="o">=</span><span class="n">tts</span><span class="p">,</span>
            <span class="n">mentions_everyone</span><span class="o">=</span><span class="n">mentions_everyone</span><span class="p">,</span>
            <span class="n">user_mentions</span><span class="o">=</span><span class="n">user_mentions</span><span class="p">,</span>
            <span class="n">role_mentions</span><span class="o">=</span><span class="n">role_mentions</span><span class="p">,</span>
            <span class="n">mentions_reply</span><span class="o">=</span><span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_webhook_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">webhook</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">webhooks</span><span class="o">.</span><span class="n">ExecutableWebhook</span><span class="p">,</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflakeish</span><span class="p">],</span>
        <span class="n">token</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">:</span>
        <span class="c1"># int(ExecutableWebhook) isn&#39;t guaranteed to be valid nor the ID used to execute this entity as a webhook.</span>
        <span class="n">webhook_id</span> <span class="o">=</span> <span class="n">webhook</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">webhook</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="k">else</span> <span class="n">webhook</span><span class="o">.</span><span class="n">webhook_id</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_WEBHOOK_MESSAGE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">webhook</span><span class="o">=</span><span class="n">webhook_id</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">no_auth</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_message</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_webhook_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">webhook</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">webhooks</span><span class="o">.</span><span class="n">ExecutableWebhook</span><span class="p">,</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflakeish</span><span class="p">],</span>
        <span class="n">token</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">],</span>
        <span class="n">content</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">attachment</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">attachments</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">component</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">components</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">embed</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">embeds</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">replace_attachments</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">mentions_everyone</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">user_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">role_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">:</span>
        <span class="c1"># int(ExecutableWebhook) isn&#39;t guaranteed to be valid nor the ID used to execute this entity as a webhook.</span>
        <span class="n">webhook_id</span> <span class="o">=</span> <span class="n">webhook</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">webhook</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="k">else</span> <span class="n">webhook</span><span class="o">.</span><span class="n">webhook_id</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_WEBHOOK_MESSAGE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">webhook</span><span class="o">=</span><span class="n">webhook_id</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">)</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_edit_message</span><span class="p">(</span>
            <span class="n">route</span><span class="p">,</span>
            <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">(),</span>
            <span class="n">no_auth</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span>
            <span class="n">attachment</span><span class="o">=</span><span class="n">attachment</span><span class="p">,</span>
            <span class="n">attachments</span><span class="o">=</span><span class="n">attachments</span><span class="p">,</span>
            <span class="n">component</span><span class="o">=</span><span class="n">component</span><span class="p">,</span>
            <span class="n">components</span><span class="o">=</span><span class="n">components</span><span class="p">,</span>
            <span class="n">embed</span><span class="o">=</span><span class="n">embed</span><span class="p">,</span>
            <span class="n">embeds</span><span class="o">=</span><span class="n">embeds</span><span class="p">,</span>
            <span class="n">replace_attachments</span><span class="o">=</span><span class="n">replace_attachments</span><span class="p">,</span>
            <span class="n">mentions_everyone</span><span class="o">=</span><span class="n">mentions_everyone</span><span class="p">,</span>
            <span class="n">mentions_reply</span><span class="o">=</span><span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
            <span class="n">user_mentions</span><span class="o">=</span><span class="n">user_mentions</span><span class="p">,</span>
            <span class="n">role_mentions</span><span class="o">=</span><span class="n">role_mentions</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_webhook_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">webhook</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">webhooks</span><span class="o">.</span><span class="n">ExecutableWebhook</span><span class="p">,</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflakeish</span><span class="p">],</span>
        <span class="n">token</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># int(ExecutableWebhook) isn&#39;t guaranteed to be valid nor the ID used to execute this entity as a webhook.</span>
        <span class="n">webhook_id</span> <span class="o">=</span> <span class="n">webhook</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">webhook</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="k">else</span> <span class="n">webhook</span><span class="o">.</span><span class="n">webhook_id</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_WEBHOOK_MESSAGE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">webhook</span><span class="o">=</span><span class="n">webhook_id</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">no_auth</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_gateway_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GATEWAY</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="c1"># This doesn&#39;t need authorization.</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">no_auth</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">]</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">url</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_gateway_bot_info</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">sessions</span><span class="o">.</span><span class="n">GatewayBotInfo</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GATEWAY_BOT</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_gateway_bot_info</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_invite</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">invite</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">invites</span><span class="o">.</span><span class="n">InviteCode</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">invites</span><span class="o">.</span><span class="n">Invite</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_INVITE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">invite_code</span><span class="o">=</span><span class="n">invite</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">invite</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">invite</span><span class="o">.</span><span class="n">code</span><span class="p">)</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">StringMapBuilder</span><span class="p">()</span>
        <span class="n">query</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;with_counts&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="n">query</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;with_expiration&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="n">query</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_invite</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_invite</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">invite</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">invites</span><span class="o">.</span><span class="n">InviteCode</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">invites</span><span class="o">.</span><span class="n">Invite</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_INVITE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">invite_code</span><span class="o">=</span><span class="n">invite</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">invite</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">invite</span><span class="o">.</span><span class="n">code</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_invite</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_my_user</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">users</span><span class="o">.</span><span class="n">OwnUser</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_MY_USER</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_my_user</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_my_user</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">username</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">avatar</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">users</span><span class="o">.</span><span class="n">OwnUser</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_MY_USER</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;username&quot;</span><span class="p">,</span> <span class="n">username</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">avatar</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;avatar&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">avatar</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">avatar_resource</span> <span class="o">=</span> <span class="n">files</span><span class="o">.</span><span class="n">ensure_resource</span><span class="p">(</span><span class="n">avatar</span><span class="p">)</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">avatar_resource</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
                <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;avatar&quot;</span><span class="p">,</span> <span class="k">await</span> <span class="n">stream</span><span class="o">.</span><span class="n">data_uri</span><span class="p">())</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_my_user</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_my_connections</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">applications</span><span class="o">.</span><span class="n">OwnConnection</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_MY_CONNECTIONS</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_own_connection</span><span class="p">(</span><span class="n">connection_payload</span><span class="p">)</span> <span class="k">for</span> <span class="n">connection_payload</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">fetch_my_guilds</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">newest_first</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">start_at</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SearchableSnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">iterators</span><span class="o">.</span><span class="n">LazyIterator</span><span class="p">[</span><span class="n">applications</span><span class="o">.</span><span class="n">OwnGuild</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">start_at</span> <span class="ow">is</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">start_at</span> <span class="o">=</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="k">if</span> <span class="n">newest_first</span> <span class="k">else</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">start_at</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">):</span>
            <span class="n">start_at</span> <span class="o">=</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="o">.</span><span class="n">from_datetime</span><span class="p">(</span><span class="n">start_at</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">start_at</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">start_at</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">special_endpoints_impl</span><span class="o">.</span><span class="n">OwnGuildIterator</span><span class="p">(</span>
            <span class="n">entity_factory</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="p">,</span>
            <span class="n">request_call</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">,</span>
            <span class="n">newest_first</span><span class="o">=</span><span class="n">newest_first</span><span class="p">,</span>
            <span class="n">first_id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">start_at</span><span class="p">),</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">leave_guild</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_MY_GUILD</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_dm_channel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">channels_</span><span class="o">.</span><span class="n">DMChannel</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_MY_CHANNELS</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;recipient_id&quot;</span><span class="p">,</span> <span class="n">user</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="n">channel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_dm</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cache</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_cache</span><span class="o">.</span><span class="n">set_dm_channel_id</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">channel</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">channel</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_application</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">applications</span><span class="o">.</span><span class="n">Application</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_MY_APPLICATION</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_application</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_authorization</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">applications</span><span class="o">.</span><span class="n">AuthorizationInformation</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_MY_AUTHORIZATION</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_authorization_information</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_gen_oauth2_token</span><span class="p">(</span><span class="n">client</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span> <span class="n">client_secret</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">token</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">client</span><span class="p">)</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">client_secret</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">applications</span><span class="o">.</span><span class="n">TokenType</span><span class="o">.</span><span class="n">BASIC</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">token</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">authorize_client_credentials_token</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">client</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">client_secret</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">scopes</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">applications</span><span class="o">.</span><span class="n">OAuth2Scope</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">applications</span><span class="o">.</span><span class="n">PartialOAuth2Token</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_TOKEN</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="n">form</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">URLEncodedFormBuilder</span><span class="p">()</span>
        <span class="n">form</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">&quot;grant_type&quot;</span><span class="p">,</span> <span class="s2">&quot;client_credentials&quot;</span><span class="p">)</span>
        <span class="n">form</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">&quot;scope&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">scopes</span><span class="p">))</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">form_builder</span><span class="o">=</span><span class="n">form</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_gen_oauth2_token</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">client_secret</span><span class="p">))</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_partial_token</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">authorize_access_token</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">client</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">client_secret</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">code</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">redirect_uri</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">applications</span><span class="o">.</span><span class="n">OAuth2AuthorizationToken</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_TOKEN</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="n">form</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">URLEncodedFormBuilder</span><span class="p">()</span>
        <span class="n">form</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">&quot;grant_type&quot;</span><span class="p">,</span> <span class="s2">&quot;authorization_code&quot;</span><span class="p">)</span>
        <span class="n">form</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">&quot;code&quot;</span><span class="p">,</span> <span class="n">code</span><span class="p">)</span>
        <span class="n">form</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">&quot;redirect_uri&quot;</span><span class="p">,</span> <span class="n">redirect_uri</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">form_builder</span><span class="o">=</span><span class="n">form</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_gen_oauth2_token</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">client_secret</span><span class="p">))</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_authorization_token</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">refresh_access_token</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">client</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">client_secret</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">refresh_token</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">scopes</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">applications</span><span class="o">.</span><span class="n">OAuth2Scope</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">applications</span><span class="o">.</span><span class="n">OAuth2AuthorizationToken</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_TOKEN</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="n">form</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">URLEncodedFormBuilder</span><span class="p">()</span>
        <span class="n">form</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">&quot;grant_type&quot;</span><span class="p">,</span> <span class="s2">&quot;refresh_token&quot;</span><span class="p">)</span>
        <span class="n">form</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">&quot;refresh_token&quot;</span><span class="p">,</span> <span class="n">refresh_token</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">scopes</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">form</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">&quot;scope&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">scopes</span><span class="p">))</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">form_builder</span><span class="o">=</span><span class="n">form</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_gen_oauth2_token</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">client_secret</span><span class="p">))</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_authorization_token</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">revoke_access_token</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">client</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">client_secret</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">token</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">applications</span><span class="o">.</span><span class="n">PartialOAuth2Token</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_TOKEN_REVOKE</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="n">form</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">URLEncodedFormBuilder</span><span class="p">()</span>
        <span class="n">form</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">&quot;token&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">token</span><span class="p">))</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">form_builder</span><span class="o">=</span><span class="n">form</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_gen_oauth2_token</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">client_secret</span><span class="p">))</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">add_user_to_guild</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">access_token</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">applications</span><span class="o">.</span><span class="n">PartialOAuth2Token</span><span class="p">],</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">nick</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">roles</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">mute</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">deaf</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">Member</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PUT_GUILD_MEMBER</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;access_token&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">access_token</span><span class="p">))</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;nick&quot;</span><span class="p">,</span> <span class="n">nick</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;mute&quot;</span><span class="p">,</span> <span class="n">mute</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;deaf&quot;</span><span class="p">,</span> <span class="n">deaf</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake_array</span><span class="p">(</span><span class="s2">&quot;roles&quot;</span><span class="p">,</span> <span class="n">roles</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">response</span> <span class="o">:=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_member</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># User already is in the guild.</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_voice_regions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">voices</span><span class="o">.</span><span class="n">VoiceRegion</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_VOICE_REGIONS</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_voice_region</span><span class="p">(</span><span class="n">voice_region_payload</span><span class="p">)</span> <span class="k">for</span> <span class="n">voice_region_payload</span> <span class="ow">in</span> <span class="n">response</span>
        <span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">users</span><span class="o">.</span><span class="n">User</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_USER</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_user</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">fetch_audit_log</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">before</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SearchableSnowflakeishOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Unique</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">event_type</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">audit_logs</span><span class="o">.</span><span class="n">AuditLogEventType</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">iterators</span><span class="o">.</span><span class="n">LazyIterator</span><span class="p">[</span><span class="n">audit_logs</span><span class="o">.</span><span class="n">AuditLog</span><span class="p">]:</span>

        <span class="n">timestamp</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">before</span> <span class="ow">is</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">timestamp</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">before</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">):</span>
            <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="o">.</span><span class="n">from_datetime</span><span class="p">(</span><span class="n">before</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">before</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">special_endpoints_impl</span><span class="o">.</span><span class="n">AuditLogIterator</span><span class="p">(</span>
            <span class="n">entity_factory</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="p">,</span>
            <span class="n">request_call</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">,</span>
            <span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span>
            <span class="n">before</span><span class="o">=</span><span class="n">timestamp</span><span class="p">,</span>
            <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">,</span>
            <span class="n">action_type</span><span class="o">=</span><span class="n">event_type</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_emoji</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">emoji</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">emojis</span><span class="o">.</span><span class="n">CustomEmoji</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">emojis</span><span class="o">.</span><span class="n">KnownCustomEmoji</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_EMOJI</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">emoji</span><span class="o">=</span><span class="n">emoji</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_known_custom_emoji</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">))</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_guild_emojis</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">emojis</span><span class="o">.</span><span class="n">KnownCustomEmoji</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_EMOJIS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="n">guild_id</span> <span class="o">=</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_known_custom_emoji</span><span class="p">(</span><span class="n">emoji_payload</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">guild_id</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">emoji_payload</span> <span class="ow">in</span> <span class="n">response</span>
        <span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_emoji</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">image</span><span class="p">:</span> <span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">roles</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">emojis</span><span class="o">.</span><span class="n">KnownCustomEmoji</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_GUILD_EMOJIS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">image_resource</span> <span class="o">=</span> <span class="n">files</span><span class="o">.</span><span class="n">ensure_resource</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
        <span class="k">async</span> <span class="k">with</span> <span class="n">image_resource</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;image&quot;</span><span class="p">,</span> <span class="k">await</span> <span class="n">stream</span><span class="o">.</span><span class="n">data_uri</span><span class="p">())</span>

        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake_array</span><span class="p">(</span><span class="s2">&quot;roles&quot;</span><span class="p">,</span> <span class="n">roles</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_known_custom_emoji</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">))</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_emoji</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">emoji</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">emojis</span><span class="o">.</span><span class="n">CustomEmoji</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">roles</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">emojis</span><span class="o">.</span><span class="n">KnownCustomEmoji</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_GUILD_EMOJI</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">emoji</span><span class="o">=</span><span class="n">emoji</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake_array</span><span class="p">(</span><span class="s2">&quot;roles&quot;</span><span class="p">,</span> <span class="n">roles</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_known_custom_emoji</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">))</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_emoji</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">emoji</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">emojis</span><span class="o">.</span><span class="n">CustomEmoji</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_GUILD_EMOJI</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">emoji</span><span class="o">=</span><span class="n">emoji</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_available_sticker_packs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">stickers</span><span class="o">.</span><span class="n">StickerPack</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_STICKER_PACKS</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">no_auth</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_sticker_pack</span><span class="p">(</span><span class="n">sticker_pack_payload</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">sticker_pack_payload</span> <span class="ow">in</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;sticker_packs&quot;</span><span class="p">]</span>
        <span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_sticker</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">sticker</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">stickers</span><span class="o">.</span><span class="n">PartialSticker</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">stickers</span><span class="o">.</span><span class="n">StandardSticker</span><span class="p">,</span> <span class="n">stickers</span><span class="o">.</span><span class="n">GuildSticker</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_STICKER</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">sticker</span><span class="o">=</span><span class="n">sticker</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_guild_sticker</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
            <span class="k">if</span> <span class="s2">&quot;guild_id&quot;</span> <span class="ow">in</span> <span class="n">response</span>
            <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_standard_sticker</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_guild_stickers</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">stickers</span><span class="o">.</span><span class="n">GuildSticker</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_STICKERS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_guild_sticker</span><span class="p">(</span><span class="n">guild_sticker_payload</span><span class="p">)</span> <span class="k">for</span> <span class="n">guild_sticker_payload</span> <span class="ow">in</span> <span class="n">response</span>
        <span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_guild_sticker</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">sticker</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">stickers</span><span class="o">.</span><span class="n">PartialSticker</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">stickers</span><span class="o">.</span><span class="n">GuildSticker</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_STICKER</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">sticker</span><span class="o">=</span><span class="n">sticker</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_guild_sticker</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_sticker</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">tag</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">image</span><span class="p">:</span> <span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">stickers</span><span class="o">.</span><span class="n">GuildSticker</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_GUILD_STICKERS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">form</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">URLEncodedFormBuilder</span><span class="p">(</span><span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">)</span>
        <span class="n">form</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">form</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">&quot;tags&quot;</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
        <span class="n">form</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="n">description</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="n">form</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="s2">&quot;file&quot;</span><span class="p">,</span> <span class="n">files</span><span class="o">.</span><span class="n">ensure_resource</span><span class="p">(</span><span class="n">image</span><span class="p">))</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">form_builder</span><span class="o">=</span><span class="n">form</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_guild_sticker</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_sticker</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">sticker</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">stickers</span><span class="o">.</span><span class="n">PartialSticker</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">tag</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">stickers</span><span class="o">.</span><span class="n">GuildSticker</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_GUILD_STICKER</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">sticker</span><span class="o">=</span><span class="n">sticker</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;tags&quot;</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="n">description</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_guild_sticker</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_sticker</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">sticker</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">stickers</span><span class="o">.</span><span class="n">PartialSticker</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_GUILD_STICKER</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">sticker</span><span class="o">=</span><span class="n">sticker</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">guild_builder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">special_endpoints</span><span class="o">.</span><span class="n">GuildBuilder</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">special_endpoints_impl</span><span class="o">.</span><span class="n">GuildBuilder</span><span class="p">(</span>
            <span class="n">entity_factory</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="p">,</span> <span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">,</span> <span class="n">request_call</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_guild</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">guilds</span><span class="o">.</span><span class="n">RESTGuild</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">StringMapBuilder</span><span class="p">()</span>
        <span class="n">query</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;with_counts&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="n">query</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_rest_guild</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_guild_preview</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">guilds</span><span class="o">.</span><span class="n">GuildPreview</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_PREVIEW</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_guild_preview</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_guild</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">verification_level</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">GuildVerificationLevel</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">default_message_notifications</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">guilds</span><span class="o">.</span><span class="n">GuildMessageNotificationsLevel</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">explicit_content_filter_level</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">guilds</span><span class="o">.</span><span class="n">GuildExplicitContentFilterLevel</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">afk_channel</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildVoiceChannel</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">afk_timeout</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">time</span><span class="o">.</span><span class="n">Intervalish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">icon</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">owner</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">splash</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">banner</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">system_channel</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span>
            <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildTextChannel</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">rules_channel</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span>
            <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildTextChannel</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">public_updates_channel</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span>
            <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildTextChannel</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">preferred_locale</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">guilds</span><span class="o">.</span><span class="n">RESTGuild</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_GUILD</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;verification_level&quot;</span><span class="p">,</span> <span class="n">verification_level</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;default_message_notifications&quot;</span><span class="p">,</span> <span class="n">default_message_notifications</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;explicit_content_filter&quot;</span><span class="p">,</span> <span class="n">explicit_content_filter_level</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;afk_timeout&quot;</span><span class="p">,</span> <span class="n">afk_timeout</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">timespan_to_int</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;preferred_locale&quot;</span><span class="p">,</span> <span class="n">preferred_locale</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;afk_channel_id&quot;</span><span class="p">,</span> <span class="n">afk_channel</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;owner_id&quot;</span><span class="p">,</span> <span class="n">owner</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;system_channel_id&quot;</span><span class="p">,</span> <span class="n">system_channel</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;rules_channel_id&quot;</span><span class="p">,</span> <span class="n">rules_channel</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;public_updates_channel_id&quot;</span><span class="p">,</span> <span class="n">public_updates_channel</span><span class="p">)</span>

        <span class="n">tasks</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">asyncio</span><span class="o">.</span><span class="n">Task</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="n">icon</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;icon&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">icon</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">icon_resource</span> <span class="o">=</span> <span class="n">files</span><span class="o">.</span><span class="n">ensure_resource</span><span class="p">(</span><span class="n">icon</span><span class="p">)</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">icon_resource</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
                <span class="n">task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">stream</span><span class="o">.</span><span class="n">data_uri</span><span class="p">())</span>
                <span class="n">task</span><span class="o">.</span><span class="n">add_done_callback</span><span class="p">(</span><span class="k">lambda</span> <span class="n">future</span><span class="p">:</span> <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;icon&quot;</span><span class="p">,</span> <span class="n">future</span><span class="o">.</span><span class="n">result</span><span class="p">()))</span>
                <span class="n">tasks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">splash</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;splash&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">splash</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">splash_resource</span> <span class="o">=</span> <span class="n">files</span><span class="o">.</span><span class="n">ensure_resource</span><span class="p">(</span><span class="n">splash</span><span class="p">)</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">splash_resource</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
                <span class="n">task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">stream</span><span class="o">.</span><span class="n">data_uri</span><span class="p">())</span>
                <span class="n">task</span><span class="o">.</span><span class="n">add_done_callback</span><span class="p">(</span><span class="k">lambda</span> <span class="n">future</span><span class="p">:</span> <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;splash&quot;</span><span class="p">,</span> <span class="n">future</span><span class="o">.</span><span class="n">result</span><span class="p">()))</span>
                <span class="n">tasks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">banner</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;banner&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">banner</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">banner_resource</span> <span class="o">=</span> <span class="n">files</span><span class="o">.</span><span class="n">ensure_resource</span><span class="p">(</span><span class="n">banner</span><span class="p">)</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">banner_resource</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
                <span class="n">task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">stream</span><span class="o">.</span><span class="n">data_uri</span><span class="p">())</span>
                <span class="n">task</span><span class="o">.</span><span class="n">add_done_callback</span><span class="p">(</span><span class="k">lambda</span> <span class="n">future</span><span class="p">:</span> <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;banner&quot;</span><span class="p">,</span> <span class="n">future</span><span class="o">.</span><span class="n">result</span><span class="p">()))</span>
                <span class="n">tasks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>

        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span><span class="o">*</span><span class="n">tasks</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_rest_guild</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_guild</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_GUILD</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_guild_channels</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildChannel</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_CHANNELS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="n">channel_sequence</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_channel</span><span class="p">(</span><span class="n">channel_payload</span><span class="p">)</span> <span class="k">for</span> <span class="n">channel_payload</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>
        <span class="c1"># Will always be guild channels unless Discord messes up severely on something!</span>
        <span class="k">return</span> <span class="n">typing</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="s2">&quot;typing.Sequence[channels_.GuildChannel]&quot;</span><span class="p">,</span> <span class="n">channel_sequence</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_guild_text_channel</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">topic</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">nsfw</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">rate_limit_per_user</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">time</span><span class="o">.</span><span class="n">Intervalish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">permission_overwrites</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">PermissionOverwrite</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">category</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildCategory</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">channels_</span><span class="o">.</span><span class="n">GuildTextChannel</span><span class="p">:</span>
        <span class="n">channel</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_guild_channel</span><span class="p">(</span>
            <span class="n">guild</span><span class="p">,</span>
            <span class="n">name</span><span class="p">,</span>
            <span class="n">channels_</span><span class="o">.</span><span class="n">ChannelType</span><span class="o">.</span><span class="n">GUILD_TEXT</span><span class="p">,</span>
            <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
            <span class="n">topic</span><span class="o">=</span><span class="n">topic</span><span class="p">,</span>
            <span class="n">nsfw</span><span class="o">=</span><span class="n">nsfw</span><span class="p">,</span>
            <span class="n">rate_limit_per_user</span><span class="o">=</span><span class="n">rate_limit_per_user</span><span class="p">,</span>
            <span class="n">permission_overwrites</span><span class="o">=</span><span class="n">permission_overwrites</span><span class="p">,</span>
            <span class="n">category</span><span class="o">=</span><span class="n">category</span><span class="p">,</span>
            <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">channels_</span><span class="o">.</span><span class="n">GuildTextChannel</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">channel</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_guild_news_channel</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">topic</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">nsfw</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">rate_limit_per_user</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">time</span><span class="o">.</span><span class="n">Intervalish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">permission_overwrites</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">PermissionOverwrite</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">category</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildCategory</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">channels_</span><span class="o">.</span><span class="n">GuildNewsChannel</span><span class="p">:</span>
        <span class="n">channel</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_guild_channel</span><span class="p">(</span>
            <span class="n">guild</span><span class="p">,</span>
            <span class="n">name</span><span class="p">,</span>
            <span class="n">channels_</span><span class="o">.</span><span class="n">ChannelType</span><span class="o">.</span><span class="n">GUILD_NEWS</span><span class="p">,</span>
            <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
            <span class="n">topic</span><span class="o">=</span><span class="n">topic</span><span class="p">,</span>
            <span class="n">nsfw</span><span class="o">=</span><span class="n">nsfw</span><span class="p">,</span>
            <span class="n">rate_limit_per_user</span><span class="o">=</span><span class="n">rate_limit_per_user</span><span class="p">,</span>
            <span class="n">permission_overwrites</span><span class="o">=</span><span class="n">permission_overwrites</span><span class="p">,</span>
            <span class="n">category</span><span class="o">=</span><span class="n">category</span><span class="p">,</span>
            <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">channels_</span><span class="o">.</span><span class="n">GuildNewsChannel</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">channel</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_guild_voice_channel</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">user_limit</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">bitrate</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">video_quality_mode</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">VideoQualityMode</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">permission_overwrites</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">PermissionOverwrite</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">region</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">voices</span><span class="o">.</span><span class="n">VoiceRegion</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">category</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildCategory</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">channels_</span><span class="o">.</span><span class="n">GuildVoiceChannel</span><span class="p">:</span>
        <span class="n">channel</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_guild_channel</span><span class="p">(</span>
            <span class="n">guild</span><span class="p">,</span>
            <span class="n">name</span><span class="p">,</span>
            <span class="n">channels_</span><span class="o">.</span><span class="n">ChannelType</span><span class="o">.</span><span class="n">GUILD_VOICE</span><span class="p">,</span>
            <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
            <span class="n">user_limit</span><span class="o">=</span><span class="n">user_limit</span><span class="p">,</span>
            <span class="n">bitrate</span><span class="o">=</span><span class="n">bitrate</span><span class="p">,</span>
            <span class="n">video_quality_mode</span><span class="o">=</span><span class="n">video_quality_mode</span><span class="p">,</span>
            <span class="n">permission_overwrites</span><span class="o">=</span><span class="n">permission_overwrites</span><span class="p">,</span>
            <span class="n">region</span><span class="o">=</span><span class="n">region</span><span class="p">,</span>
            <span class="n">category</span><span class="o">=</span><span class="n">category</span><span class="p">,</span>
            <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">channels_</span><span class="o">.</span><span class="n">GuildVoiceChannel</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">channel</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_guild_stage_channel</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">user_limit</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">bitrate</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">permission_overwrites</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">PermissionOverwrite</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">region</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">voices</span><span class="o">.</span><span class="n">VoiceRegion</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">category</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildCategory</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">channels_</span><span class="o">.</span><span class="n">GuildStageChannel</span><span class="p">:</span>
        <span class="n">channel</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_guild_channel</span><span class="p">(</span>
            <span class="n">guild</span><span class="p">,</span>
            <span class="n">name</span><span class="p">,</span>
            <span class="n">channels_</span><span class="o">.</span><span class="n">ChannelType</span><span class="o">.</span><span class="n">GUILD_STAGE</span><span class="p">,</span>
            <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
            <span class="n">user_limit</span><span class="o">=</span><span class="n">user_limit</span><span class="p">,</span>
            <span class="n">bitrate</span><span class="o">=</span><span class="n">bitrate</span><span class="p">,</span>
            <span class="n">permission_overwrites</span><span class="o">=</span><span class="n">permission_overwrites</span><span class="p">,</span>
            <span class="n">region</span><span class="o">=</span><span class="n">region</span><span class="p">,</span>
            <span class="n">category</span><span class="o">=</span><span class="n">category</span><span class="p">,</span>
            <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">channels_</span><span class="o">.</span><span class="n">GuildStageChannel</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">channel</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_guild_category</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">permission_overwrites</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">PermissionOverwrite</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">channels_</span><span class="o">.</span><span class="n">GuildCategory</span><span class="p">:</span>
        <span class="n">channel</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_guild_channel</span><span class="p">(</span>
            <span class="n">guild</span><span class="p">,</span>
            <span class="n">name</span><span class="p">,</span>
            <span class="n">channels_</span><span class="o">.</span><span class="n">ChannelType</span><span class="o">.</span><span class="n">GUILD_CATEGORY</span><span class="p">,</span>
            <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
            <span class="n">permission_overwrites</span><span class="o">=</span><span class="n">permission_overwrites</span><span class="p">,</span>
            <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">channels_</span><span class="o">.</span><span class="n">GuildCategory</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">channel</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">_create_guild_channel</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">type_</span><span class="p">:</span> <span class="n">channels_</span><span class="o">.</span><span class="n">ChannelType</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">topic</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">nsfw</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">bitrate</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">video_quality_mode</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">VideoQualityMode</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">user_limit</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">rate_limit_per_user</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">time</span><span class="o">.</span><span class="n">Intervalish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">permission_overwrites</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">PermissionOverwrite</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">region</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">voices</span><span class="o">.</span><span class="n">VoiceRegion</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">category</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildCategory</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">channels_</span><span class="o">.</span><span class="n">GuildChannel</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_GUILD_CHANNELS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="n">type_</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;position&quot;</span><span class="p">,</span> <span class="n">position</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;topic&quot;</span><span class="p">,</span> <span class="n">topic</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;nsfw&quot;</span><span class="p">,</span> <span class="n">nsfw</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;bitrate&quot;</span><span class="p">,</span> <span class="n">bitrate</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;video_quality_mode&quot;</span><span class="p">,</span> <span class="n">video_quality_mode</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;user_limit&quot;</span><span class="p">,</span> <span class="n">user_limit</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;rate_limit_per_user&quot;</span><span class="p">,</span> <span class="n">rate_limit_per_user</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">timespan_to_int</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;rtc_region&quot;</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;parent_id&quot;</span><span class="p">,</span> <span class="n">category</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_array</span><span class="p">(</span>
            <span class="s2">&quot;permission_overwrites&quot;</span><span class="p">,</span>
            <span class="n">permission_overwrites</span><span class="p">,</span>
            <span class="n">conversion</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">serialize_permission_overwrite</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="n">channel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_channel</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">channels_</span><span class="o">.</span><span class="n">GuildChannel</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">channel</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">reposition_channels</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">positions</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildChannel</span><span class="p">]],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_GUILD_CHANNELS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">channel</span><span class="p">)),</span> <span class="s2">&quot;position&quot;</span><span class="p">:</span> <span class="n">pos</span><span class="p">}</span> <span class="k">for</span> <span class="n">pos</span><span class="p">,</span> <span class="n">channel</span> <span class="ow">in</span> <span class="n">positions</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_member</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">guilds</span><span class="o">.</span><span class="n">Member</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_MEMBER</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_member</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">fetch_members</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">iterators</span><span class="o">.</span><span class="n">LazyIterator</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">Member</span><span class="p">]:</span>
        <span class="k">return</span> <span class="n">special_endpoints_impl</span><span class="o">.</span><span class="n">MemberIterator</span><span class="p">(</span>
            <span class="n">entity_factory</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="p">,</span> <span class="n">request_call</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">,</span> <span class="n">guild</span><span class="o">=</span><span class="n">guild</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">search_members</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">Member</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_MEMBERS_SEARCH</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">StringMapBuilder</span><span class="p">()</span>
        <span class="n">query</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;query&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">query</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;limit&quot;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="n">query</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="n">guild_id</span> <span class="o">=</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_member</span><span class="p">(</span><span class="n">member_payload</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">guild_id</span><span class="p">)</span> <span class="k">for</span> <span class="n">member_payload</span> <span class="ow">in</span> <span class="n">response</span>
        <span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_member</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">nick</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">roles</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">mute</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">deaf</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">voice_channel</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span>
            <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildVoiceChannel</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">guilds</span><span class="o">.</span><span class="n">Member</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_GUILD_MEMBER</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;nick&quot;</span><span class="p">,</span> <span class="n">nick</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;mute&quot;</span><span class="p">,</span> <span class="n">mute</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;deaf&quot;</span><span class="p">,</span> <span class="n">deaf</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake_array</span><span class="p">(</span><span class="s2">&quot;roles&quot;</span><span class="p">,</span> <span class="n">roles</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">voice_channel</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;channel_id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">voice_channel</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;channel_id&quot;</span><span class="p">,</span> <span class="n">voice_channel</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_member</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">))</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_my_member</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">nickname</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">guilds</span><span class="o">.</span><span class="n">Member</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_MY_GUILD_MEMBER</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;nick&quot;</span><span class="p">,</span> <span class="n">nickname</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_member</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">))</span>

    <span class="nd">@deprecation</span><span class="o">.</span><span class="n">deprecated</span><span class="p">(</span><span class="s2">&quot;2.0.0.dev104&quot;</span><span class="p">,</span> <span class="s2">&quot;Use `edit_my_member`&#39;s `nick` argument instead.&quot;</span><span class="p">)</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_my_nick</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">Guild</span><span class="p">],</span>
        <span class="n">nick</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">edit_my_member</span><span class="p">(</span><span class="n">guild</span><span class="p">,</span> <span class="n">nickname</span><span class="o">=</span><span class="n">nick</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">add_role_to_member</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span>
        <span class="n">role</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PUT_GUILD_MEMBER_ROLE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="n">role</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">remove_role_from_member</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span>
        <span class="n">role</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_GUILD_MEMBER_ROLE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="n">role</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">kick_user</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_GUILD_MEMBER</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">kick_member</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Coroutine</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">kick_user</span><span class="p">(</span><span class="n">guild</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">ban_user</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">delete_message_days</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;delete_message_days&quot;</span><span class="p">,</span> <span class="n">delete_message_days</span><span class="p">)</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PUT_GUILD_BAN</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">ban_member</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">delete_message_days</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Coroutine</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ban_user</span><span class="p">(</span><span class="n">guild</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">delete_message_days</span><span class="o">=</span><span class="n">delete_message_days</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">unban_user</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_GUILD_BAN</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">unban_member</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Coroutine</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">unban_user</span><span class="p">(</span><span class="n">guild</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_ban</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">guilds</span><span class="o">.</span><span class="n">GuildBan</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_BAN</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_guild_member_ban</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_bans</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">GuildBan</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_BANS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_guild_member_ban</span><span class="p">(</span><span class="n">ban_payload</span><span class="p">)</span> <span class="k">for</span> <span class="n">ban_payload</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_roles</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">Role</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_ROLES</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="n">guild_id</span> <span class="o">=</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_role</span><span class="p">(</span><span class="n">role_payload</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">guild_id</span><span class="p">)</span> <span class="k">for</span> <span class="n">role_payload</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_role</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">permissions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">permissions_</span><span class="o">.</span><span class="n">Permissions</span><span class="p">]</span> <span class="o">=</span> <span class="n">permissions_</span><span class="o">.</span><span class="n">Permissions</span><span class="o">.</span><span class="n">NONE</span><span class="p">,</span>
        <span class="n">color</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">colors</span><span class="o">.</span><span class="n">Colorish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">colour</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">colors</span><span class="o">.</span><span class="n">Colorish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">hoist</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">icon</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">unicode_emoji</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">mentionable</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">guilds</span><span class="o">.</span><span class="n">Role</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">any_undefined</span><span class="p">(</span><span class="n">color</span><span class="p">,</span> <span class="n">colour</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Can not specify &#39;color&#39; and &#39;colour&#39; together.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">any_undefined</span><span class="p">(</span><span class="n">icon</span><span class="p">,</span> <span class="n">unicode_emoji</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Can not specify &#39;icon&#39; and &#39;unicode_emoji&#39; together.&quot;</span><span class="p">)</span>

        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_GUILD_ROLES</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;permissions&quot;</span><span class="p">,</span> <span class="n">permissions</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="n">colors</span><span class="o">.</span><span class="n">Color</span><span class="o">.</span><span class="n">of</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="n">colour</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="n">colors</span><span class="o">.</span><span class="n">Color</span><span class="o">.</span><span class="n">of</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;hoist&quot;</span><span class="p">,</span> <span class="n">hoist</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;unicode_emoji&quot;</span><span class="p">,</span> <span class="n">unicode_emoji</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;mentionable&quot;</span><span class="p">,</span> <span class="n">mentionable</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">icon</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">icon_resource</span> <span class="o">=</span> <span class="n">files</span><span class="o">.</span><span class="n">ensure_resource</span><span class="p">(</span><span class="n">icon</span><span class="p">)</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">icon_resource</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
                <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;icon&quot;</span><span class="p">,</span> <span class="k">await</span> <span class="n">stream</span><span class="o">.</span><span class="n">data_uri</span><span class="p">())</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_role</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">))</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">reposition_roles</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">positions</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">]],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_GUILD_ROLES</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">role</span><span class="p">)),</span> <span class="s2">&quot;position&quot;</span><span class="p">:</span> <span class="n">pos</span><span class="p">}</span> <span class="k">for</span> <span class="n">pos</span><span class="p">,</span> <span class="n">role</span> <span class="ow">in</span> <span class="n">positions</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_role</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">role</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">permissions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">permissions_</span><span class="o">.</span><span class="n">Permissions</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">color</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">colors</span><span class="o">.</span><span class="n">Colorish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">colour</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">colors</span><span class="o">.</span><span class="n">Colorish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">hoist</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">icon</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">unicode_emoji</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">mentionable</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">guilds</span><span class="o">.</span><span class="n">Role</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">any_undefined</span><span class="p">(</span><span class="n">color</span><span class="p">,</span> <span class="n">colour</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Can not specify &#39;color&#39; and &#39;colour&#39; together.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">any_undefined</span><span class="p">(</span><span class="n">icon</span><span class="p">,</span> <span class="n">unicode_emoji</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Can not specify &#39;icon&#39; and &#39;unicode_emoji&#39; together.&quot;</span><span class="p">)</span>

        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_GUILD_ROLE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="n">role</span><span class="p">)</span>

        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;permissions&quot;</span><span class="p">,</span> <span class="n">permissions</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="n">colors</span><span class="o">.</span><span class="n">Color</span><span class="o">.</span><span class="n">of</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="n">colour</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="n">colors</span><span class="o">.</span><span class="n">Color</span><span class="o">.</span><span class="n">of</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;hoist&quot;</span><span class="p">,</span> <span class="n">hoist</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;unicode_emoji&quot;</span><span class="p">,</span> <span class="n">unicode_emoji</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;mentionable&quot;</span><span class="p">,</span> <span class="n">mentionable</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">icon</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;icon&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">icon</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">icon_resource</span> <span class="o">=</span> <span class="n">files</span><span class="o">.</span><span class="n">ensure_resource</span><span class="p">(</span><span class="n">icon</span><span class="p">)</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">icon_resource</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
                <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;icon&quot;</span><span class="p">,</span> <span class="k">await</span> <span class="n">stream</span><span class="o">.</span><span class="n">data_uri</span><span class="p">())</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_role</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">))</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_role</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">role</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_GUILD_ROLE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="n">role</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">estimate_guild_prune_count</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">days</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">include_roles</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_PRUNE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">StringMapBuilder</span><span class="p">()</span>
        <span class="n">query</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;days&quot;</span><span class="p">,</span> <span class="n">days</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">include_roles</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">roles</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">role</span><span class="p">))</span> <span class="k">for</span> <span class="n">role</span> <span class="ow">in</span> <span class="n">include_roles</span><span class="p">)</span>
            <span class="n">query</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;include_roles&quot;</span><span class="p">,</span> <span class="n">roles</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="n">query</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">response</span><span class="p">[</span><span class="s2">&quot;pruned&quot;</span><span class="p">])</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">begin_guild_prune</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">days</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">compute_prune_count</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">include_roles</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_GUILD_PRUNE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;days&quot;</span><span class="p">,</span> <span class="n">days</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;compute_prune_count&quot;</span><span class="p">,</span> <span class="n">compute_prune_count</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake_array</span><span class="p">(</span><span class="s2">&quot;include_roles&quot;</span><span class="p">,</span> <span class="n">include_roles</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="n">pruned</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;pruned&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">pruned</span><span class="p">)</span> <span class="k">if</span> <span class="n">pruned</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_guild_voice_regions</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">voices</span><span class="o">.</span><span class="n">VoiceRegion</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_VOICE_REGIONS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_voice_region</span><span class="p">(</span><span class="n">voice_region_payload</span><span class="p">)</span> <span class="k">for</span> <span class="n">voice_region_payload</span> <span class="ow">in</span> <span class="n">response</span>
        <span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_guild_invites</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">invites</span><span class="o">.</span><span class="n">InviteWithMetadata</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_INVITES</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_invite_with_metadata</span><span class="p">(</span><span class="n">invite_payload</span><span class="p">)</span> <span class="k">for</span> <span class="n">invite_payload</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_integrations</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">Integration</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_INTEGRATIONS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="n">guild_id</span> <span class="o">=</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_integration</span><span class="p">(</span><span class="n">integration_payload</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">guild_id</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">integration_payload</span> <span class="ow">in</span> <span class="n">response</span>
        <span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_widget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">guilds</span><span class="o">.</span><span class="n">GuildWidget</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_WIDGET</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_guild_widget</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_widget</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildChannel</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">enabled</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">guilds</span><span class="o">.</span><span class="n">GuildWidget</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_GUILD_WIDGET</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>

        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;enabled&quot;</span><span class="p">,</span> <span class="n">enabled</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">channel</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;channel&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">channel</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;channel&quot;</span><span class="p">,</span> <span class="n">channel</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_guild_widget</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_welcome_screen</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">guilds</span><span class="o">.</span><span class="n">WelcomeScreen</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_WELCOME_SCREEN</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_welcome_screen</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_welcome_screen</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">enabled</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">channels</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">WelcomeChannel</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">guilds</span><span class="o">.</span><span class="n">WelcomeScreen</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_GUILD_WELCOME_SCREEN</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>

        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>

        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="n">description</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;enabled&quot;</span><span class="p">,</span> <span class="n">enabled</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">channels</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put_array</span><span class="p">(</span><span class="s2">&quot;welcome_channels&quot;</span><span class="p">,</span> <span class="n">channels</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">serialize_welcome_channel</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;welcome_channels&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_welcome_screen</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_vanity_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">invites</span><span class="o">.</span><span class="n">VanityURL</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_VANITY_URL</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_vanity_url</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_template</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">template</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">templates</span><span class="o">.</span><span class="n">Template</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">templates</span><span class="o">.</span><span class="n">Template</span><span class="p">:</span>
        <span class="n">template</span> <span class="o">=</span> <span class="n">template</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">template</span><span class="o">.</span><span class="n">code</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_TEMPLATE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">template</span><span class="o">=</span><span class="n">template</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_template</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_guild_templates</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">templates</span><span class="o">.</span><span class="n">Template</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_TEMPLATES</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_template</span><span class="p">(</span><span class="n">template_payload</span><span class="p">)</span> <span class="k">for</span> <span class="n">template_payload</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">sync_guild_template</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">template</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">templates</span><span class="o">.</span><span class="n">Template</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">templates</span><span class="o">.</span><span class="n">Template</span><span class="p">:</span>
        <span class="n">template</span> <span class="o">=</span> <span class="n">template</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">template</span><span class="o">.</span><span class="n">code</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PUT_GUILD_TEMPLATE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">template</span><span class="o">=</span><span class="n">template</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_template</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_guild_from_template</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">template</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">templates</span><span class="o">.</span><span class="n">Template</span><span class="p">],</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">icon</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">guilds</span><span class="o">.</span><span class="n">RESTGuild</span><span class="p">:</span>
        <span class="n">template</span> <span class="o">=</span> <span class="n">template</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">template</span><span class="o">.</span><span class="n">code</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_TEMPLATE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">template</span><span class="o">=</span><span class="n">template</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">icon</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">icon_resource</span> <span class="o">=</span> <span class="n">files</span><span class="o">.</span><span class="n">ensure_resource</span><span class="p">(</span><span class="n">icon</span><span class="p">)</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">icon_resource</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
                <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;icon&quot;</span><span class="p">,</span> <span class="k">await</span> <span class="n">stream</span><span class="o">.</span><span class="n">data_uri</span><span class="p">())</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_rest_guild</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_template</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">templates</span><span class="o">.</span><span class="n">Template</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_GUILD_TEMPLATES</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="n">description</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_template</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_template</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">template</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">templates</span><span class="o">.</span><span class="n">Template</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">templates</span><span class="o">.</span><span class="n">Template</span><span class="p">:</span>
        <span class="n">template</span> <span class="o">=</span> <span class="n">template</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">template</span><span class="o">.</span><span class="n">code</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_GUILD_TEMPLATE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">template</span><span class="o">=</span><span class="n">template</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="n">description</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_template</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_template</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">template</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">templates</span><span class="o">.</span><span class="n">Template</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">templates</span><span class="o">.</span><span class="n">Template</span><span class="p">:</span>
        <span class="n">template</span> <span class="o">=</span> <span class="n">template</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">template</span><span class="o">.</span><span class="n">code</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_GUILD_TEMPLATE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">template</span><span class="o">=</span><span class="n">template</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_template</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">command_builder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">special_endpoints</span><span class="o">.</span><span class="n">CommandBuilder</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">special_endpoints_impl</span><span class="o">.</span><span class="n">CommandBuilder</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_application_command</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">application</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">command</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">commands</span><span class="o">.</span><span class="n">Command</span><span class="p">],</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">commands</span><span class="o">.</span><span class="n">Command</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">guild</span> <span class="ow">is</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_APPLICATION_COMMAND</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">command</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_APPLICATION_GUILD_COMMAND</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">command</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_command</span><span class="p">(</span>
            <span class="n">response</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">)</span> <span class="k">if</span> <span class="n">guild</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_application_commands</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">application</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">commands</span><span class="o">.</span><span class="n">Command</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">guild</span> <span class="ow">is</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_APPLICATION_COMMANDS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_APPLICATION_GUILD_COMMANDS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="n">guild_id</span> <span class="o">=</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">)</span> <span class="k">if</span> <span class="n">guild</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">guild_id</span><span class="p">)</span> <span class="k">for</span> <span class="n">command</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_application_command</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">application</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">options</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">commands</span><span class="o">.</span><span class="n">CommandOption</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">default_permission</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">commands</span><span class="o">.</span><span class="n">Command</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">guild</span> <span class="ow">is</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_APPLICATION_COMMAND</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_APPLICATION_GUILD_COMMAND</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>

        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="n">description</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_array</span><span class="p">(</span><span class="s2">&quot;options&quot;</span><span class="p">,</span> <span class="n">options</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">serialize_command_option</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;default_permission&quot;</span><span class="p">,</span> <span class="n">default_permission</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_command</span><span class="p">(</span>
            <span class="n">response</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">)</span> <span class="k">if</span> <span class="n">guild</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">set_application_commands</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">application</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">commands</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">CommandBuilder</span><span class="p">],</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">commands</span><span class="o">.</span><span class="n">Command</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">guild</span> <span class="ow">is</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PUT_APPLICATION_COMMANDS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PUT_APPLICATION_GUILD_COMMANDS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="p">[</span><span class="n">command</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="p">)</span> <span class="k">for</span> <span class="n">command</span> <span class="ow">in</span> <span class="n">commands</span><span class="p">])</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="n">guild_id</span> <span class="o">=</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">)</span> <span class="k">if</span> <span class="n">guild</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_command</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">guild_id</span><span class="p">)</span> <span class="k">for</span> <span class="n">payload</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_application_command</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">application</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">command</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">commands</span><span class="o">.</span><span class="n">Command</span><span class="p">],</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">options</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">commands</span><span class="o">.</span><span class="n">CommandOption</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">commands</span><span class="o">.</span><span class="n">Command</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">guild</span> <span class="ow">is</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_APPLICATION_COMMAND</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">command</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_APPLICATION_GUILD_COMMAND</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
                <span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">command</span><span class="p">,</span> <span class="n">guild</span><span class="o">=</span><span class="n">guild</span>
            <span class="p">)</span>

        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="n">description</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_array</span><span class="p">(</span><span class="s2">&quot;options&quot;</span><span class="p">,</span> <span class="n">options</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">serialize_command_option</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_command</span><span class="p">(</span>
            <span class="n">response</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">)</span> <span class="k">if</span> <span class="n">guild</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_application_command</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">application</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">command</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">commands</span><span class="o">.</span><span class="n">Command</span><span class="p">],</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">guild</span> <span class="ow">is</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_APPLICATION_COMMAND</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">command</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_APPLICATION_GUILD_COMMAND</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
                <span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">command</span><span class="p">,</span> <span class="n">guild</span><span class="o">=</span><span class="n">guild</span>
            <span class="p">)</span>

        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_application_guild_commands_permissions</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">application</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">commands</span><span class="o">.</span><span class="n">GuildCommandPermissions</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_APPLICATION_GUILD_COMMANDS_PERMISSIONS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_guild_command_permissions</span><span class="p">(</span><span class="n">payload</span><span class="p">)</span> <span class="k">for</span> <span class="n">payload</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_application_command_permissions</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">application</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">command</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">commands</span><span class="o">.</span><span class="n">Command</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">commands</span><span class="o">.</span><span class="n">GuildCommandPermissions</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_APPLICATION_COMMAND_PERMISSIONS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
            <span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">command</span>
        <span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_guild_command_permissions</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">set_application_guild_commands_permissions</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">application</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">permissions</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
            <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">commands</span><span class="o">.</span><span class="n">Command</span><span class="p">],</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">commands</span><span class="o">.</span><span class="n">CommandPermission</span><span class="p">]</span>
        <span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">commands</span><span class="o">.</span><span class="n">GuildCommandPermissions</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PUT_APPLICATION_GUILD_COMMANDS_PERMISSIONS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">command</span><span class="p">)),</span>
                <span class="s2">&quot;permissions&quot;</span><span class="p">:</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">serialize_command_permission</span><span class="p">(</span><span class="n">permission</span><span class="p">)</span> <span class="k">for</span> <span class="n">permission</span> <span class="ow">in</span> <span class="n">perms</span><span class="p">],</span>
            <span class="p">}</span>
            <span class="k">for</span> <span class="n">command</span><span class="p">,</span> <span class="n">perms</span> <span class="ow">in</span> <span class="n">permissions</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="p">]</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_guild_command_permissions</span><span class="p">(</span><span class="n">payload</span><span class="p">)</span> <span class="k">for</span> <span class="n">payload</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">set_application_command_permissions</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">application</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">command</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">commands</span><span class="o">.</span><span class="n">Command</span><span class="p">],</span>
        <span class="n">permissions</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">commands</span><span class="o">.</span><span class="n">CommandPermission</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">commands</span><span class="o">.</span><span class="n">GuildCommandPermissions</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PUT_APPLICATION_COMMAND_PERMISSIONS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
            <span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">command</span>
        <span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_array</span><span class="p">(</span><span class="s2">&quot;permissions&quot;</span><span class="p">,</span> <span class="n">permissions</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">serialize_command_permission</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_guild_command_permissions</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">interaction_deferred_builder</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">type_</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">base_interactions</span><span class="o">.</span><span class="n">ResponseType</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> <span class="o">/</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">special_endpoints</span><span class="o">.</span><span class="n">InteractionDeferredBuilder</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">special_endpoints_impl</span><span class="o">.</span><span class="n">InteractionDeferredBuilder</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="n">type_</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">interaction_message_builder</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">type_</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">base_interactions</span><span class="o">.</span><span class="n">ResponseType</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> <span class="o">/</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">special_endpoints</span><span class="o">.</span><span class="n">InteractionMessageBuilder</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">special_endpoints_impl</span><span class="o">.</span><span class="n">InteractionMessageBuilder</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="n">type_</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_interaction_response</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">application</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span> <span class="n">token</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_INTERACTION_RESPONSE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">webhook</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">no_auth</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_message</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_interaction_response</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">interaction</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">base_interactions</span><span class="o">.</span><span class="n">PartialInteraction</span><span class="p">],</span>
        <span class="n">token</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">response_type</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">base_interactions</span><span class="o">.</span><span class="n">ResponseType</span><span class="p">],</span>
        <span class="n">content</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">flags</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">messages_</span><span class="o">.</span><span class="n">MessageFlag</span><span class="p">,</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedType</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">tts</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">component</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">components</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">embed</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">embeds</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">mentions_everyone</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">user_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">role_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">any_undefined</span><span class="p">(</span><span class="n">component</span><span class="p">,</span> <span class="n">components</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;You may only specify one of &#39;component&#39; or &#39;components&#39;, not both&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">any_undefined</span><span class="p">(</span><span class="n">embed</span><span class="p">,</span> <span class="n">embeds</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;You may only specify one of &#39;embed&#39; or &#39;embeds&#39;, not both&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">components</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">components</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Collection</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s2">&quot;You passed a non-collection to &#39;components&#39;, but this expects a collection. Maybe you meant to &quot;</span>
                <span class="s2">&quot;use &#39;component&#39; (singular) instead?&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">embeds</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">_NONE_OR_UNDEFINED</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">embeds</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Collection</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s2">&quot;You passed a non-collection to &#39;embeds&#39;, but this expects a collection. Maybe you meant to &quot;</span>
                <span class="s2">&quot;use &#39;embed&#39; (singular) instead?&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">undefined</span><span class="o">.</span><span class="n">all_undefined</span><span class="p">(</span><span class="n">embed</span><span class="p">,</span> <span class="n">embeds</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">):</span>
            <span class="c1"># Syntactic sugar, common mistake to accidentally send an embed</span>
            <span class="c1"># as the content, so lets detect this and fix it for the user.</span>
            <span class="n">embed</span> <span class="o">=</span> <span class="n">content</span>
            <span class="n">content</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span>

        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_INTERACTION_RESPONSE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">interaction</span><span class="o">=</span><span class="n">interaction</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">)</span>

        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="n">response_type</span><span class="p">)</span>

        <span class="n">data</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">data</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;content&quot;</span><span class="p">,</span> <span class="n">content</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">data</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;flags&quot;</span><span class="p">,</span> <span class="n">flags</span><span class="p">)</span>
        <span class="n">data</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;tts&quot;</span><span class="p">,</span> <span class="n">tts</span><span class="p">)</span>
        <span class="n">data</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
            <span class="s2">&quot;allowed_mentions&quot;</span><span class="p">,</span>
            <span class="n">mentions</span><span class="o">.</span><span class="n">generate_allowed_mentions</span><span class="p">(</span><span class="n">mentions_everyone</span><span class="p">,</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span> <span class="n">user_mentions</span><span class="p">,</span> <span class="n">role_mentions</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">component</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">data</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;components&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">component</span><span class="o">.</span><span class="n">build</span><span class="p">()])</span>

        <span class="k">elif</span> <span class="n">components</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">data</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;components&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">component</span><span class="o">.</span><span class="n">build</span><span class="p">()</span> <span class="k">for</span> <span class="n">component</span> <span class="ow">in</span> <span class="n">components</span><span class="p">])</span>

        <span class="k">if</span> <span class="n">embed</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">embed_payload</span><span class="p">,</span> <span class="n">attachments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">serialize_embed</span><span class="p">(</span><span class="n">embed</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">attachments</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Cannot send an embed with attachments in a slash command&#39;s initial response&quot;</span><span class="p">)</span>

            <span class="n">data</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;embeds&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">embed_payload</span><span class="p">])</span>

        <span class="k">elif</span> <span class="n">embeds</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">embed_payloads</span><span class="p">:</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONArray</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">embed</span> <span class="ow">in</span> <span class="n">embeds</span><span class="p">:</span>
                <span class="n">serialized_embed</span><span class="p">,</span> <span class="n">attachments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">serialize_embed</span><span class="p">(</span><span class="n">embed</span><span class="p">)</span>
                <span class="n">embed_payloads</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">serialized_embed</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">attachments</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Cannot send an embed with attachments in a slash command&#39;s initial response&quot;</span><span class="p">)</span>

            <span class="n">data</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;embeds&quot;</span><span class="p">,</span> <span class="n">embed_payloads</span><span class="p">)</span>

        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">no_auth</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_interaction_response</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">application</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">token</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">content</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">attachment</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">attachments</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">component</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">components</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">embed</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">embeds</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">replace_attachments</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">mentions_everyone</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">user_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">role_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_INTERACTION_RESPONSE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">webhook</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">)</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_edit_message</span><span class="p">(</span>
            <span class="n">route</span><span class="p">,</span>
            <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">(),</span>
            <span class="n">no_auth</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span>
            <span class="n">attachment</span><span class="o">=</span><span class="n">attachment</span><span class="p">,</span>
            <span class="n">attachments</span><span class="o">=</span><span class="n">attachments</span><span class="p">,</span>
            <span class="n">component</span><span class="o">=</span><span class="n">component</span><span class="p">,</span>
            <span class="n">components</span><span class="o">=</span><span class="n">components</span><span class="p">,</span>
            <span class="n">embed</span><span class="o">=</span><span class="n">embed</span><span class="p">,</span>
            <span class="n">embeds</span><span class="o">=</span><span class="n">embeds</span><span class="p">,</span>
            <span class="n">replace_attachments</span><span class="o">=</span><span class="n">replace_attachments</span><span class="p">,</span>
            <span class="n">mentions_everyone</span><span class="o">=</span><span class="n">mentions_everyone</span><span class="p">,</span>
            <span class="n">user_mentions</span><span class="o">=</span><span class="n">user_mentions</span><span class="p">,</span>
            <span class="n">role_mentions</span><span class="o">=</span><span class="n">role_mentions</span><span class="p">,</span>
            <span class="n">mentions_reply</span><span class="o">=</span><span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_interaction_response</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">application</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span> <span class="n">token</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_INTERACTION_RESPONSE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">webhook</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">no_auth</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">build_action_row</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">special_endpoints</span><span class="o">.</span><span class="n">ActionRowBuilder</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">special_endpoints_impl</span><span class="o">.</span><span class="n">ActionRowBuilder</span><span class="p">()</span>
</pre></div>

        </details>

            <div class="docstring"><p>Implementation of the V8-compatible Discord HTTP API.</p>

<p>This manages making HTTP/1.1 requests to the API and using the entity
factory within the passed application instance to deserialize JSON responses
to Pythonic data classes that are used throughout this library.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>entity_factory</strong> (<a href="../api/entity_factory.html#EntityFactory">hikari.api.entity_factory.EntityFactory</a>):
The entity factory to use.</li>
<li><strong>executor</strong> (typing.Optional[concurrent.futures.Executor]):
The executor to use for blocking IO. Defaults to the <code>asyncio</code> thread
pool if set to <code>None</code>.</li>
<li><p><strong>max_rate_limit</strong> (float):
Maximum number of seconds to sleep for when rate limited. If a rate
limit occurs that is longer than this value, then a
<code><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></code> will be raised instead of waiting.</p>

<p>This is provided since some endpoints may respond with non-sensible
rate limits.</p></li>
<li><strong>max_retries</strong> (typing.Optional[int]):
Maximum number of times a request will be retried if
it fails with a <code>5xx</code> status. Defaults to 3 if set to <code>None</code>.</li>
<li><strong>token</strong> (typing.Union[str, None, <a href="../api/rest.html#TokenStrategy">hikari.api.rest.TokenStrategy</a>]):
The bot or bearer token. If no token is to be used,
this can be undefined.</li>
<li><p><strong>token_type</strong> (typing.Union[str, <a href="../applications.html#TokenType">hikari.applications.TokenType</a>, None]):
The type of token in use. This must be passed when a <code>str</code> is
passed for <code>token</code> but and can be <code>"Bot"</code> or <code>"Bearer"</code>.</p>

<p>This should be left as <code>None</code> when either
<code><a href="../api/rest.html#TokenStrategy">hikari.api.rest.TokenStrategy</a></code> or <code>None</code> is passed for
<code>token</code>.</p></li>
<li><strong>rest_url</strong> (str):
The HTTP API base URL. This can contain format-string specifiers to
interpolate information such as API version in use.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong>ValueError</strong>: * If <code><a href="#RESTClientImpl.token_type">token_type</a></code> is provided when a token strategy is passed for <code>token</code>.
<ul>
<li>if <code><a href="#RESTClientImpl.token_type">token_type</a></code> is left as <code>None</code> when a string is passed for <code>token</code>.</li>
<li>If the a value more than 5 is provided for <code>max_retries</code></li>
</ul></li>
</ul>
</div>


                        <div id="RESTClientImpl.__init__" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.__init__">#&nbsp;&nbsp</a>

        
            <span class="name">RESTClientImpl</span><span class="signature">(
    *,
    cache: Union[<a href="../api/cache.html#MutableCache">hikari.api.cache.MutableCache</a>, NoneType],
    entity_factory: <a href="../api/entity_factory.html#EntityFactory">hikari.api.entity_factory.EntityFactory</a>,
    executor: Union[concurrent.futures._base.Executor, NoneType],
    http_settings: <a href="../config.html#HTTPSettings">hikari.config.HTTPSettings</a>,
    max_rate_limit: float,
    max_retries: int = 3,
    proxy_settings: <a href="../config.html#ProxySettings">hikari.config.ProxySettings</a>,
    token: Union[str, NoneType, <a href="../api/rest.html#TokenStrategy">hikari.api.rest.TokenStrategy</a>],
    token_type: Union[<a href="../applications.html#TokenType">hikari.applications.TokenType</a>, str, NoneType],
    rest_url: Union[str, NoneType]
)</span>
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">cache</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">cache_api</span><span class="o">.</span><span class="n">MutableCache</span><span class="p">],</span>
        <span class="n">entity_factory</span><span class="p">:</span> <span class="n">entity_factory_</span><span class="o">.</span><span class="n">EntityFactory</span><span class="p">,</span>
        <span class="n">executor</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">concurrent</span><span class="o">.</span><span class="n">futures</span><span class="o">.</span><span class="n">Executor</span><span class="p">],</span>
        <span class="n">http_settings</span><span class="p">:</span> <span class="n">config</span><span class="o">.</span><span class="n">HTTPSettings</span><span class="p">,</span>
        <span class="n">max_rate_limit</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">max_retries</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
        <span class="n">proxy_settings</span><span class="p">:</span> <span class="n">config</span><span class="o">.</span><span class="n">ProxySettings</span><span class="p">,</span>
        <span class="n">token</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">rest_api</span><span class="o">.</span><span class="n">TokenStrategy</span><span class="p">],</span>
        <span class="n">token_type</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">applications</span><span class="o">.</span><span class="n">TokenType</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span>
        <span class="n">rest_url</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">max_retries</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;max_retries&#39; must be below or equal to 5&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_cache</span> <span class="o">=</span> <span class="n">cache</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span> <span class="o">=</span> <span class="n">entity_factory</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_executor</span> <span class="o">=</span> <span class="n">executor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_http_settings</span> <span class="o">=</span> <span class="n">http_settings</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_live_attributes</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">_LiveAttributes</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_max_rate_limit</span> <span class="o">=</span> <span class="n">max_rate_limit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_max_retries</span> <span class="o">=</span> <span class="n">max_retries</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_proxy_settings</span> <span class="o">=</span> <span class="n">proxy_settings</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">rest_api</span><span class="o">.</span><span class="n">TokenStrategy</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_token_type</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">token_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Token type required when a str is passed for `token`&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">token_type</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">token</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_token_type</span> <span class="o">=</span> <span class="n">applications</span><span class="o">.</span><span class="n">TokenType</span><span class="p">(</span><span class="n">token_type</span><span class="o">.</span><span class="n">title</span><span class="p">())</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">rest_api</span><span class="o">.</span><span class="n">TokenStrategy</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">token_type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Token type should be handled by the token strategy&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="o">=</span> <span class="n">token</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_token_type</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">token_type</span>

        <span class="c1"># While passing files.URL for rest_url is not officially supported, this is still</span>
        <span class="c1"># casted to string here to avoid confusing issues passing a URL here could lead to.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rest_url</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">rest_url</span><span class="p">)</span> <span class="k">if</span> <span class="n">rest_url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">urls</span><span class="o">.</span><span class="n">REST_API_URL</span>
</pre></div>

        </details>

    

                        </div>
                        <div id="RESTClientImpl.is_alive" class="classattr">
                                
            <div class="attr variable"><a class="headerlink" href="#RESTClientImpl.is_alive">#&nbsp;&nbsp</a>

        <span class="name">is_alive</span><span class="annotation">: bool</span>
    </div>

            <div class="docstring"><p>Whether this component is alive.</p>
</div>


                        </div>
                        <div id="RESTClientImpl.http_settings" class="classattr">
                                
            <div class="attr variable"><a class="headerlink" href="#RESTClientImpl.http_settings">#&nbsp;&nbsp</a>

        <span class="name">http_settings</span><span class="annotation">: <a href="../config.html#HTTPSettings">hikari.config.HTTPSettings</a></span>
    </div>

            <div class="docstring"><p>HTTP settings in use by this component.</p>
</div>


                        </div>
                        <div id="RESTClientImpl.proxy_settings" class="classattr">
                                
            <div class="attr variable"><a class="headerlink" href="#RESTClientImpl.proxy_settings">#&nbsp;&nbsp</a>

        <span class="name">proxy_settings</span><span class="annotation">: <a href="../config.html#ProxySettings">hikari.config.ProxySettings</a></span>
    </div>

            <div class="docstring"><p>Proxy settings in use by this component.</p>
</div>


                        </div>
                        <div id="RESTClientImpl.entity_factory" class="classattr">
                                
            <div class="attr variable"><a class="headerlink" href="#RESTClientImpl.entity_factory">#&nbsp;&nbsp</a>

        <span class="name">entity_factory</span><span class="annotation">: <a href="../api/entity_factory.html#EntityFactory">hikari.api.entity_factory.EntityFactory</a></span>
    </div>

            <div class="docstring"><p>Entity factory used by this REST client.</p>
</div>


                        </div>
                        <div id="RESTClientImpl.token_type" class="classattr">
                                
            <div class="attr variable"><a class="headerlink" href="#RESTClientImpl.token_type">#&nbsp;&nbsp</a>

        <span class="name">token_type</span><span class="annotation">: Union[str, <a href="../applications.html#TokenType">hikari.applications.TokenType</a>, NoneType]</span>
    </div>

            <div class="docstring"><p>Type of token this client is using for most requests.</p>

<p>If this is <code>None</code> then this client will likely only work
for some endpoints such as public and webhook ones.</p>
</div>


                        </div>
                        <div id="RESTClientImpl.close" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.close">#&nbsp;&nbsp</a>

                <div class="decorator">@typing.final</div>

            <span class="def">async def</span>
            <span class="name">close</span><span class="signature">(self) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="nd">@typing</span><span class="o">.</span><span class="n">final</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Close the HTTP client and any open HTTP connections.&quot;&quot;&quot;</span>
        <span class="n">live_attributes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_live_attributes</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_live_attributes</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">await</span> <span class="n">live_attributes</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>

        </details>

            <div class="docstring"><p>Close the HTTP client and any open HTTP connections.</p>
</div>


                        </div>
                        <div id="RESTClientImpl.start" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.start">#&nbsp;&nbsp</a>

                <div class="decorator">@typing.final</div>

            <span class="def">def</span>
            <span class="name">start</span><span class="signature">(self) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="nd">@typing</span><span class="o">.</span><span class="n">final</span>
    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Start the HTTP client.</span>

<span class="sd">        .. note::</span>
<span class="sd">            This must be called within an active event loop.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        RuntimeError</span>
<span class="sd">            If this is called in an environment without an active event loop.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_live_attributes</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">errors</span><span class="o">.</span><span class="n">ComponentStateConflictError</span><span class="p">(</span><span class="s2">&quot;Cannot start a REST Client which is already alive&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_live_attributes</span> <span class="o">=</span> <span class="n">_LiveAttributes</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_max_rate_limit</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_http_settings</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_proxy_settings</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Start the HTTP client.</p>

<p><em>Note:</em>
This must be called within an active event loop.</p>

<h6 id="raises">Raises</h6>

<ul>
<li><strong>RuntimeError</strong>: If this is called in an environment without an active event loop.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_channel" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_channel">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_channel</span><span class="signature">(
    self,
    channel: Union[<a href="../channels.html#PartialChannel">hikari.channels.PartialChannel</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]
) -&gt; <a href="../channels.html#PartialChannel">hikari.channels.PartialChannel</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_channel</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">PartialChannel</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">channels_</span><span class="o">.</span><span class="n">PartialChannel</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_CHANNEL</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_channel</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cache</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">channels_</span><span class="o">.</span><span class="n">DMChannel</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_cache</span><span class="o">.</span><span class="n">set_dm_channel_id</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">recipient</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch a channel.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>channel</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#PartialChannel">hikari.channels.PartialChannel</a>]):
The channel to fetch. This may be the object or the ID of an
existing channel.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../channels.html#PartialChannel">hikari.channels.PartialChannel</a></strong>: The channel. This will be a _derivative_ of
<code><a href="../channels.html#PartialChannel">hikari.channels.PartialChannel</a></code>, depending on the type of
channel you request for.</li>
</ul>

<p>This means that you may get one of
<code><a href="../channels.html#DMChannel">hikari.channels.DMChannel</a></code>,
<code><a href="../channels.html#GroupDMChannel">hikari.channels.GroupDMChannel</a></code>,
<code><a href="../channels.html#GuildTextChannel">hikari.channels.GuildTextChannel</a></code>,
<code><a href="../channels.html#GuildVoiceChannel">hikari.channels.GuildVoiceChannel</a></code>,
<code><a href="../channels.html#GuildStoreChannel">hikari.channels.GuildStoreChannel</a></code>,
<code><a href="../channels.html#GuildNewsChannel">hikari.channels.GuildNewsChannel</a></code>.</p>

<p>Likewise, the <code><a href="../channels.html#GuildChannel">hikari.channels.GuildChannel</a></code> can be used to
determine if a channel is guild-bound, and
<code><a href="../channels.html#TextableChannel">hikari.channels.TextableChannel</a></code> can be used to determine
if the channel provides textual functionality to the application.</p>

<p>You can check for these using the <code>isinstance</code>
builtin function.</p>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>READ_MESSAGES</code> permission in the channel.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the channel is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.edit_channel" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.edit_channel">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">edit_channel</span><span class="signature">(
    self,
    channel: Union[<a href="../channels.html#GuildChannel">hikari.channels.GuildChannel</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    /,
    *,
    name: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    position: Union[int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    topic: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    nsfw: Union[bool, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    bitrate: Union[int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    video_quality_mode: Union[<a href="../channels.html#VideoQualityMode">hikari.channels.VideoQualityMode</a>, int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    user_limit: Union[int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    rate_limit_per_user: Union[int, float, datetime.timedelta, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    region: Union[<a href="../voices.html#VoiceRegion">hikari.voices.VoiceRegion</a>, str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>, NoneType] = UNDEFINED,
    permission_overwrites: Union[Sequence[<a href="../channels.html#PermissionOverwrite">hikari.channels.PermissionOverwrite</a>], <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    parent_category: Union[<a href="../channels.html#GuildCategory">hikari.channels.GuildCategory</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    reason: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; <a href="../channels.html#PartialChannel">hikari.channels.PartialChannel</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_channel</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildChannel</span><span class="p">],</span>
        <span class="o">/</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">topic</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">nsfw</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">bitrate</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">video_quality_mode</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">VideoQualityMode</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">user_limit</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">rate_limit_per_user</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">time</span><span class="o">.</span><span class="n">Intervalish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">region</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">voices</span><span class="o">.</span><span class="n">VoiceRegion</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">permission_overwrites</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">PermissionOverwrite</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">parent_category</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildCategory</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">channels_</span><span class="o">.</span><span class="n">PartialChannel</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_CHANNEL</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;position&quot;</span><span class="p">,</span> <span class="n">position</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;topic&quot;</span><span class="p">,</span> <span class="n">topic</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;nsfw&quot;</span><span class="p">,</span> <span class="n">nsfw</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;bitrate&quot;</span><span class="p">,</span> <span class="n">bitrate</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;video_quality_mode&quot;</span><span class="p">,</span> <span class="n">video_quality_mode</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;user_limit&quot;</span><span class="p">,</span> <span class="n">user_limit</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;rate_limit_per_user&quot;</span><span class="p">,</span> <span class="n">rate_limit_per_user</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">timespan_to_int</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;rtc_region&quot;</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;parent_id&quot;</span><span class="p">,</span> <span class="n">parent_category</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_array</span><span class="p">(</span>
            <span class="s2">&quot;permission_overwrites&quot;</span><span class="p">,</span>
            <span class="n">permission_overwrites</span><span class="p">,</span>
            <span class="n">conversion</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">serialize_permission_overwrite</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_channel</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Edit a channel.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>channel</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#GuildChannel">hikari.channels.GuildChannel</a>]):
The channel to edit. This may be the object or the ID of an
existing channel.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>name</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[[str]):
If provided, the new name for the channel.</li>
<li><strong>position</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[[int]):
If provided, the new position for the channel.</li>
<li><strong>topic</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the new topic for the channel.</li>
<li><strong>nsfw</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[bool]):
If provided, whether the channel should be marked as NSFW or not.</li>
<li><strong>bitrate</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[int]):
If provided, the new bitrate for the channel.</li>
<li><strong>video_quality_mode</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Union[<a href="../channels.html#VideoQualityMode">hikari.channels.VideoQualityMode</a>, int]]):
If provided, the new video quality mode for the channel.</li>
<li><strong>user_limit</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[int]):
If provided, the new user limit in the channel.</li>
<li><strong>rate_limit_per_user</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../internal/time.html#Intervalish">hikari.internal.time.Intervalish</a>]):
If provided, the new rate limit per user in the channel.</li>
<li><strong>region</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Union[str, <a href="../voices.html#VoiceRegion">hikari.voices.VoiceRegion</a>]]):
If provided, the voice region to set for this channel. Passing
<code>None</code> here will set it to "auto" mode where the used
region will be decided based on the first person who connects to it
when it's empty.</li>
<li><strong>permission_overwrites</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Sequence[<a href="../channels.html#PermissionOverwrite">hikari.channels.PermissionOverwrite</a>]]):
If provided, the new permission overwrites for the channel.</li>
<li><strong>parent_category</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#GuildCategory">hikari.channels.GuildCategory</a>]]):
If provided, the new guild category for the channel.</li>
<li><strong>reason</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the reason that will be recorded in the audit logs.
Maximum of 512 characters.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../channels.html#PartialChannel">hikari.channels.PartialChannel</a></strong>: The edited channel.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If any of the fields that are passed have an invalid value.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing permissions to edit the channel.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the channel is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.follow_channel" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.follow_channel">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">follow_channel</span><span class="signature">(
    self,
    news_channel: Union[<a href="../channels.html#GuildNewsChannel">hikari.channels.GuildNewsChannel</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    target_channel: Union[<a href="../channels.html#GuildChannel">hikari.channels.GuildChannel</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    *,
    reason: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; <a href="../channels.html#ChannelFollow">hikari.channels.ChannelFollow</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">follow_channel</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">news_channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildNewsChannel</span><span class="p">],</span>
        <span class="n">target_channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildChannel</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">channels_</span><span class="o">.</span><span class="n">ChannelFollow</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_CHANNEL_FOLLOWERS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">news_channel</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;webhook_channel_id&quot;</span><span class="p">,</span> <span class="n">target_channel</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_channel_follow</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Follow a news channel to send messages to a target channel.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>news_channel</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#GuildNewsChannel">hikari.channels.GuildNewsChannel</a>]):
The object or ID of the news channel to follow.</li>
<li><strong>target_channel</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#GuildChannel">hikari.channels.GuildChannel</a>]):
The object or ID of the channel to target.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../channels.html#ChannelFollow">hikari.channels.ChannelFollow</a></strong>: Information about the new relationship that was made.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If you try to follow a channel that's not a news channel or if the
target channel has reached it's webhook limit, which is 10 at the
time of writing.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>MANAGE_WEBHOOKS</code> permission in the target
channel or are missing the <code>VIEW_CHANNEL</code> permission in the origin
channel.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the origin or target channel is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.delete_channel" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.delete_channel">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">delete_channel</span><span class="signature">(
    self,
    channel: Union[<a href="../channels.html#PartialChannel">hikari.channels.PartialChannel</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]
) -&gt; <a href="../channels.html#PartialChannel">hikari.channels.PartialChannel</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_channel</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">PartialChannel</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">channels_</span><span class="o">.</span><span class="n">PartialChannel</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_CHANNEL</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_channel</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Delete a channel in a guild, or close a DM.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>channel</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#PartialChannel">hikari.channels.PartialChannel</a>]):
The channel to delete. This may be the object or the ID of an
existing channel.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../channels.html#PartialChannel">hikari.channels.PartialChannel</a></strong>: Object of the channel that was deleted.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>MANAGE_CHANNEL</code> permission in the channel.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the channel is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
<li><p><strong><em>Note</strong> (</em>):</p></li>
<li><p><strong>For Public servers, the set 'Rules' or 'Guidelines' channels and the</strong></p></li>
<li><strong>'Public Server Updates' channel cannot be deleted.</strong></li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.edit_my_voice_state" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.edit_my_voice_state">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">edit_my_voice_state</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    channel: Union[<a href="../channels.html#GuildStageChannel">hikari.channels.GuildStageChannel</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    *,
    suppress: Union[bool, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    request_to_speak: Union[<a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>, bool, datetime.datetime] = UNDEFINED
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_my_voice_state</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildStageChannel</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">suppress</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">request_to_speak</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedType</span><span class="p">,</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_MY_GUILD_VOICE_STATE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;channel_id&quot;</span><span class="p">,</span> <span class="n">channel</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;suppress&quot;</span><span class="p">,</span> <span class="n">suppress</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">request_to_speak</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">):</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;request_to_speak_timestamp&quot;</span><span class="p">,</span> <span class="n">request_to_speak</span><span class="o">.</span><span class="n">isoformat</span><span class="p">())</span>

        <span class="k">elif</span> <span class="n">request_to_speak</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;request_to_speak_timestamp&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">utc_datetime</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">())</span>

        <span class="k">elif</span> <span class="n">request_to_speak</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;request_to_speak_timestamp&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Edit the current user's voice state in a stage channel.</p>

<p><em>Note:</em>
The current user has to have already joined the target stage channel
before any calls can be made to this endpoint.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
Object or Id of the guild to edit a voice state in.</li>
<li><strong>channel</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#GuildStageChannel">hikari.channels.GuildStageChannel</a>]):
Object or Id of the channel to edit a voice state in.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>suppress</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[bool]):
If specified, whether the user should be allowed to become a speaker
in the target stage channel with <code>builtin.True</code> suppressing them from
becoming one.</li>
<li><p><strong>request_to_speak</strong> (typing.Union[<a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>, bool, datetime.datetime]):
Whether to request to speak. This may be one of the following:</p>

<ul>
<li><code>True</code> to indicate that the bot wants to speak.</li>
<li><code>False</code> to remove any previously set request to speak.</li>
<li><code>datetime.datetime</code> to specify when they want their request to
speak timestamp to be set to. If a datetime from the past is
passed then Discord will use the current time instead.</li>
</ul></li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If you try to target a non-staging channel.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>MUTE_MEMBERS</code> permission in the channel.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the channel, message or voice state is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.edit_voice_state" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.edit_voice_state">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">edit_voice_state</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    channel: Union[<a href="../channels.html#GuildStageChannel">hikari.channels.GuildStageChannel</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    user: Union[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    *,
    suppress: Union[bool, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_voice_state</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildStageChannel</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">suppress</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_GUILD_VOICE_STATE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;channel_id&quot;</span><span class="p">,</span> <span class="n">channel</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;suppress&quot;</span><span class="p">,</span> <span class="n">suppress</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Edit an existing voice state in a stage channel.</p>

<p><em>Note:</em>
The target user must already be present in the stage channel before
any calls are made to this endpoint.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
Object or Id of the guild to edit a voice state in.</li>
<li><strong>channel</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#GuildStageChannel">hikari.channels.GuildStageChannel</a>]):
Object or Id of the channel to edit a voice state in.</li>
<li><strong>user</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>]):
Object or Id of the user to to edit the voice state of.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>suppress</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[bool]):
If defined, whether the user should be allowed to become a speaker
in the target stage channel.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If you try to target a non-staging channel.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>MUTE_MEMBERS</code> permission in the channel.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the channel, message or voice state is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.edit_permission_overwrites" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.edit_permission_overwrites">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">edit_permission_overwrites</span><span class="signature">(
    self,
    channel: Union[<a href="../channels.html#GuildChannel">hikari.channels.GuildChannel</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    target: Union[<a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int, <a href="../users.html#PartialUser">hikari.users.PartialUser</a>, <a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a>, <a href="../channels.html#PermissionOverwrite">hikari.channels.PermissionOverwrite</a>],
    *,
    target_type: Union[<a href="../channels.html#PermissionOverwriteType">hikari.channels.PermissionOverwriteType</a>, int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    allow: Union[<a href="../permissions.html#Permissions">hikari.permissions.Permissions</a>, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    deny: Union[<a href="../permissions.html#Permissions">hikari.permissions.Permissions</a>, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    reason: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_permission_overwrites</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildChannel</span><span class="p">],</span>
        <span class="n">target</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span>
            <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflakeish</span><span class="p">,</span> <span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">,</span> <span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">,</span> <span class="n">channels_</span><span class="o">.</span><span class="n">PermissionOverwrite</span>
        <span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">target_type</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">PermissionOverwriteType</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">allow</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">permissions_</span><span class="o">.</span><span class="n">Permissions</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">deny</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">permissions_</span><span class="o">.</span><span class="n">Permissions</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">target_type</span> <span class="ow">is</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">):</span>
                <span class="n">target_type</span> <span class="o">=</span> <span class="n">channels_</span><span class="o">.</span><span class="n">PermissionOverwriteType</span><span class="o">.</span><span class="n">MEMBER</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">guilds</span><span class="o">.</span><span class="n">Role</span><span class="p">):</span>
                <span class="n">target_type</span> <span class="o">=</span> <span class="n">channels_</span><span class="o">.</span><span class="n">PermissionOverwriteType</span><span class="o">.</span><span class="n">ROLE</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">channels_</span><span class="o">.</span><span class="n">PermissionOverwrite</span><span class="p">):</span>
                <span class="n">target_type</span> <span class="o">=</span> <span class="n">target</span><span class="o">.</span><span class="n">type</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                    <span class="s2">&quot;Cannot determine the type of the target to update. Try specifying &#39;target_type&#39; manually.&quot;</span>
                <span class="p">)</span>

        <span class="n">target</span> <span class="o">=</span> <span class="n">target</span><span class="o">.</span><span class="n">id</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">channels_</span><span class="o">.</span><span class="n">PermissionOverwrite</span><span class="p">)</span> <span class="k">else</span> <span class="n">target</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PUT_CHANNEL_PERMISSIONS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="n">target</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="n">target_type</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;allow&quot;</span><span class="p">,</span> <span class="n">allow</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;deny&quot;</span><span class="p">,</span> <span class="n">deny</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Edit permissions for a specific entity in the given guild channel.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>channel</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#GuildChannel">hikari.channels.GuildChannel</a>]):
The channel to edit a permission overwrite in. This may be the
object, or the ID of an existing channel.</li>
<li><strong>target</strong> (typing.Union[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>, <a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a>, <a href="../channels.html#PermissionOverwrite">hikari.channels.PermissionOverwrite</a>, <a href="../snowflakes.html#Snowflakeish">hikari.snowflakes.Snowflakeish</a>]):
The channel overwrite to edit. This may be the object or the ID of an
existing overwrite.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>target_type</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Union[<a href="../channels.html#PermissionOverwriteType">hikari.channels.PermissionOverwriteType</a>, int]]):
If provided, the type of the target to update. If unset, will attempt to get
the type from <code>target</code>.</li>
<li><strong>allow</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../permissions.html#Permissions">hikari.permissions.Permissions</a>]):
If provided, the new vale of all allowed permissions.</li>
<li><strong>deny</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../permissions.html#Permissions">hikari.permissions.Permissions</a>]):
If provided, the new vale of all disallowed permissions.</li>
<li><strong>reason</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the reason that will be recorded in the audit logs.
Maximum of 512 characters.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong>TypeError</strong>: If <code>target_type</code> is unset and we were unable to determine the type
from <code>target</code>.</li>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If any of the fields that are passed have an invalid value.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>MANAGE_PERMISSIONS</code> permission in the channel.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the channel is not found or the target is not found if it is
a role.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.delete_permission_overwrite" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.delete_permission_overwrite">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">delete_permission_overwrite</span><span class="signature">(
    self,
    channel: Union[<a href="../channels.html#GuildChannel">hikari.channels.GuildChannel</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    target: Union[<a href="../channels.html#PermissionOverwrite">hikari.channels.PermissionOverwrite</a>, <a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a>, <a href="../users.html#PartialUser">hikari.users.PartialUser</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_permission_overwrite</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildChannel</span><span class="p">],</span>
        <span class="n">target</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span>
            <span class="n">channels_</span><span class="o">.</span><span class="n">PermissionOverwrite</span><span class="p">,</span> <span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">,</span> <span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">,</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflakeish</span>
        <span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_CHANNEL_PERMISSIONS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="n">target</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Delete a custom permission for an entity in a given guild channel.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>channel</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#GuildChannel">hikari.channels.GuildChannel</a>]):
The channel to delete a permission overwrite in. This may be the
object, or the ID of an existing channel.</li>
<li><strong>target</strong> (typing.Union[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>, <a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a>, <a href="../channels.html#PermissionOverwrite">hikari.channels.PermissionOverwrite</a>, <a href="../snowflakes.html#Snowflakeish">hikari.snowflakes.Snowflakeish</a>]):
The channel overwrite to delete.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>MANAGE_PERMISSIONS</code> permission in the channel.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the channel is not found or the target is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_channel_invites" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_channel_invites">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_channel_invites</span><span class="signature">(
    self,
    channel: Union[<a href="../channels.html#GuildChannel">hikari.channels.GuildChannel</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]
) -&gt; Sequence[<a href="../invites.html#InviteWithMetadata">hikari.invites.InviteWithMetadata</a>]</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_channel_invites</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildChannel</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">invites</span><span class="o">.</span><span class="n">InviteWithMetadata</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_CHANNEL_INVITES</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_invite_with_metadata</span><span class="p">(</span><span class="n">invite_payload</span><span class="p">)</span> <span class="k">for</span> <span class="n">invite_payload</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch all invites pointing to the given guild channel.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>channel</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#GuildChannel">hikari.channels.GuildChannel</a>]):
The channel to fetch the invites from. This may be a channel
object, or the ID of an existing channel.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>typing.Sequence[<a href="../invites.html#InviteWithMetadata">hikari.invites.InviteWithMetadata</a>]</strong>: The invites pointing to the given guild channel.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>MANAGE_CHANNEL</code> permission in the channel.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the channel is not found in any guilds you are a member of.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.create_invite" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.create_invite">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">create_invite</span><span class="signature">(
    self,
    channel: Union[<a href="../channels.html#GuildChannel">hikari.channels.GuildChannel</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    *,
    max_age: Union[int, float, datetime.timedelta, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    max_uses: Union[int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    temporary: Union[bool, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    unique: Union[bool, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    target_type: Union[<a href="../invites.html#TargetType">hikari.invites.TargetType</a>, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    target_user: Union[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    target_application: Union[<a href="../guilds.html#PartialApplication">hikari.guilds.PartialApplication</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    reason: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; <a href="../invites.html#InviteWithMetadata">hikari.invites.InviteWithMetadata</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_invite</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildChannel</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">max_age</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">time</span><span class="o">.</span><span class="n">Intervalish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">max_uses</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">temporary</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">unique</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">target_type</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">invites</span><span class="o">.</span><span class="n">TargetType</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">target_user</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">target_application</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">invites</span><span class="o">.</span><span class="n">InviteWithMetadata</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_CHANNEL_INVITES</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;max_age&quot;</span><span class="p">,</span> <span class="n">max_age</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">timespan_to_int</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;max_uses&quot;</span><span class="p">,</span> <span class="n">max_uses</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;temporary&quot;</span><span class="p">,</span> <span class="n">temporary</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;unique&quot;</span><span class="p">,</span> <span class="n">unique</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;target_type&quot;</span><span class="p">,</span> <span class="n">target_type</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;target_user_id&quot;</span><span class="p">,</span> <span class="n">target_user</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;target_application_id&quot;</span><span class="p">,</span> <span class="n">target_application</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_invite_with_metadata</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Create an invite to the given guild channel.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>channel</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#GuildChannel">hikari.channels.GuildChannel</a>]):
The channel to create a invite for. This may be the object
or the ID of an existing channel.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>max_age</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Union[datetime.timedelta, float, int]]):
If provided, the duration of the invite before expiry.</li>
<li><strong>max_uses</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[int]):
If provided, the max uses the invite can have.</li>
<li><strong>temporary</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[bool]):
If provided, whether the invite only grants temporary membership.</li>
<li><strong>unique</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[bool]):
If provided, whether the invite should be unique.</li>
<li><strong>target_type</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../invites.html#TargetType">hikari.invites.TargetType</a>]):
If provided, the target type of this invite.</li>
<li><p><strong>target_user</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>]]):
If provided, the target user id for this invite. This may be the
object or the ID of an existing user.</p>

<p><em>Note:</em>
This is required if <code>target_type</code> is <code>STREAM</code> and the targeted
user must be streaming into the channel.</p></li>
<li><p><strong>target_application</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialApplication">hikari.guilds.PartialApplication</a>]]):
If provided, the target application id for this invite. This may be
the object or the ID of an existing application.</p>

<p><em>Note:</em>
This is required if <code>target_type</code> is <code>EMBEDDED_APPLICATION</code> and
the targeted application must have the <code>EMBEDDED</code> flag.</p></li>
<li><strong>reason</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the reason that will be recorded in the audit logs.
Maximum of 512 characters.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../invites.html#InviteWithMetadata">hikari.invites.InviteWithMetadata</a></strong>: The invite to the given guild channel.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If any of the fields that are passed have an invalid value.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>MANAGE_CHANNELS</code> permission.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the channel is not found, or if the target user does not exist,
if provided.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.trigger_typing" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.trigger_typing">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">trigger_typing</span><span class="signature">(
    self,
    channel: Union[<a href="../channels.html#TextableChannel">hikari.channels.TextableChannel</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]
) -&gt; <a href="../api/special_endpoints.html#TypingIndicator">hikari.api.special_endpoints.TypingIndicator</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">trigger_typing</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">special_endpoints</span><span class="o">.</span><span class="n">TypingIndicator</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">special_endpoints_impl</span><span class="o">.</span><span class="n">TypingIndicator</span><span class="p">(</span>
            <span class="n">request_call</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span> <span class="n">rest_closed_event</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_live_attributes</span><span class="p">()</span><span class="o">.</span><span class="n">closed_event</span>
        <span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Trigger typing in a text channel.</p>

<h6 id="notes">Notes</h6>

<p>The result of this call can be awaited to trigger typing once, or
can be used as an async context manager to continually type until the
context manager is left. Any errors documented below will happen then.</p>

<h6 id="examples">Examples</h6>

<div class="codehilite"><pre><span></span><code><span class="c1"># Trigger typing just once.</span>
<span class="k">await</span> <span class="n">rest</span><span class="o">.</span><span class="n">trigger_typing</span><span class="p">(</span><span class="n">channel</span><span class="p">)</span>

<span class="c1"># Trigger typing repeatedly for 1 minute.</span>
<span class="k">async</span> <span class="k">with</span> <span class="n">rest</span><span class="o">.</span><span class="n">trigger_typing</span><span class="p">(</span><span class="n">channel</span><span class="p">):</span>
    <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span>
</code></pre></div>

<p><em>Warning:</em>
Sending a message to the channel will cause the typing indicator
to disappear until it is re-triggered.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>channel</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#TextableChannel">hikari.channels.TextableChannel</a>]):
The channel to trigger typing in. This may be the object or
the ID of an existing channel.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../api/special_endpoints.html#TypingIndicator">hikari.api.special_endpoints.TypingIndicator</a></strong>: A typing indicator to use.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>SEND_MESSAGES</code> in the channel.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the channel is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
<li><p><strong><em>Note</strong> (</em>):</p></li>
<li><p><strong>The exceptions on this endpoint will only be raised once the result</strong></p></li>
<li><strong>is awaited or iterated over. Invoking this function itself will</strong></li>
<li><strong>not raise any of the above types.</strong></li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_pins" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_pins">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_pins</span><span class="signature">(
    self,
    channel: Union[<a href="../channels.html#TextableChannel">hikari.channels.TextableChannel</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]
) -&gt; Sequence[<a href="../messages.html#Message">hikari.messages.Message</a>]</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_pins</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_CHANNEL_PINS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_message</span><span class="p">(</span><span class="n">message_pl</span><span class="p">)</span> <span class="k">for</span> <span class="n">message_pl</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch the pinned messages in this text channel.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>channel</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#TextableChannel">hikari.channels.TextableChannel</a>]):
The channel to fetch pins from. This may be the object or
the ID of an existing channel.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>typing.Sequence[<a href="../messages.html#Message">hikari.messages.Message</a>]</strong>: The pinned messages in this text channel.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>READ_MESSAGES</code> in the channel.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the channel is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.pin_message" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.pin_message">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">pin_message</span><span class="signature">(
    self,
    channel: Union[<a href="../channels.html#TextableChannel">hikari.channels.TextableChannel</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    message: Union[<a href="../messages.html#PartialMessage">hikari.messages.PartialMessage</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">pin_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">],</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PUT_CHANNEL_PINS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Pin an existing message in the given text channel.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>channel</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#TextableChannel">hikari.channels.TextableChannel</a>]):
The channel to pin a message in. This may be the object or
the ID of an existing channel.</li>
<li><strong>message</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../messages.html#PartialMessage">hikari.messages.PartialMessage</a>]):
The message to pin. This may be the object or the ID
of an existing message.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>MANAGE_MESSAGES</code> in the channel.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the channel is not found, or if the message does not exist in
the given channel.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.unpin_message" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.unpin_message">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">unpin_message</span><span class="signature">(
    self,
    channel: Union[<a href="../channels.html#TextableChannel">hikari.channels.TextableChannel</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    message: Union[<a href="../messages.html#PartialMessage">hikari.messages.PartialMessage</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">unpin_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">],</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_CHANNEL_PIN</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Unpin a given message from a given text channel.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>channel</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#TextableChannel">hikari.channels.TextableChannel</a>]):
The channel to unpin a message in. This may be the object or
the ID of an existing channel.</li>
<li><strong>message</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../messages.html#PartialMessage">hikari.messages.PartialMessage</a>]):
The message to unpin. This may be the object or the ID of an
existing message.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>MANAGE_MESSAGES</code> permission.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the channel is not found or the message is not a pinned message
in the given channel.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_messages" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_messages">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">fetch_messages</span><span class="signature">(
    self,
    channel: Union[<a href="../channels.html#TextableChannel">hikari.channels.TextableChannel</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    *,
    before: Union[<a href="../snowflakes.html#Unique">hikari.snowflakes.Unique</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int, datetime.datetime, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    after: Union[<a href="../snowflakes.html#Unique">hikari.snowflakes.Unique</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int, datetime.datetime, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    around: Union[<a href="../snowflakes.html#Unique">hikari.snowflakes.Unique</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int, datetime.datetime, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; <a href="../iterators.html#LazyIterator">hikari.iterators.LazyIterator</a>[<a href="../messages.html#Message">hikari.messages.Message</a>]</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">fetch_messages</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">before</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SearchableSnowflakeishOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Unique</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">after</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SearchableSnowflakeishOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Unique</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">around</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SearchableSnowflakeishOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Unique</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">iterators</span><span class="o">.</span><span class="n">LazyIterator</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">undefined</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">before</span><span class="p">,</span> <span class="n">after</span><span class="p">,</span> <span class="n">around</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Expected no kwargs, or a maximum of one of &#39;before&#39;, &#39;after&#39;, &#39;around&#39;&quot;</span><span class="p">)</span>

        <span class="n">timestamp</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">before</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">direction</span> <span class="o">=</span> <span class="s2">&quot;before&quot;</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">before</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">):</span>
                <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="o">.</span><span class="n">from_datetime</span><span class="p">(</span><span class="n">before</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">before</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">after</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">direction</span> <span class="o">=</span> <span class="s2">&quot;after&quot;</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">after</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">):</span>
                <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="o">.</span><span class="n">from_datetime</span><span class="p">(</span><span class="n">after</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">after</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">around</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">direction</span> <span class="o">=</span> <span class="s2">&quot;around&quot;</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">around</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">):</span>
                <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="o">.</span><span class="n">from_datetime</span><span class="p">(</span><span class="n">around</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">around</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">direction</span> <span class="o">=</span> <span class="s2">&quot;before&quot;</span>
            <span class="n">timestamp</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span>

        <span class="k">return</span> <span class="n">special_endpoints_impl</span><span class="o">.</span><span class="n">MessageIterator</span><span class="p">(</span>
            <span class="n">entity_factory</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="p">,</span>
            <span class="n">request_call</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">,</span>
            <span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span>
            <span class="n">direction</span><span class="o">=</span><span class="n">direction</span><span class="p">,</span>
            <span class="n">first_id</span><span class="o">=</span><span class="n">timestamp</span><span class="p">,</span>
        <span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Browse the message history for a given text channel.</p>

<h6 id="notes">Notes</h6>

<p>This call is not a coroutine function, it returns a special type of
lazy iterator that will perform API calls as you iterate across it,
thus any errors documented below will happen then.</p>

<p>See <code><a href="../iterators.html">hikari.iterators</a></code> for the full API for this iterator type.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>channel</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#TextableChannel">hikari.channels.TextableChannel</a>]):
The channel to fetch messages in. This may be the object or
the ID of an existing channel.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>before</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[snowflakes.SearchableSnowflakeishOr[<a href="../snowflakes.html#Unique">hikari.snowflakes.Unique</a>]]):
If provided, fetch messages before this snowflake. If you provide
a datetime object, it will be transformed into a snowflake. This
may be any other Discord entity that has an ID. In this case, the
date the object was first created will be used.</li>
<li><strong>after</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[snowflakes.SearchableSnowflakeishOr[<a href="../snowflakes.html#Unique">hikari.snowflakes.Unique</a>]]):
If provided, fetch messages after this snowflake. If you provide
a datetime object, it will be transformed into a snowflake. This
may be any other Discord entity that has an ID. In this case, the
date the object was first created will be used.</li>
<li><strong>around</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[snowflakes.SearchableSnowflakeishOr[<a href="../snowflakes.html#Unique">hikari.snowflakes.Unique</a>]]):
If provided, fetch messages around this snowflake. If you provide
a datetime object, it will be transformed into a snowflake. This
may be any other Discord entity that has an ID. In this case, the
date the object was first created will be used.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../iterators.html#LazyIterator">hikari.iterators.LazyIterator</a>[<a href="../messages.html#Message">hikari.messages.Message</a>]</strong>: An iterator to fetch the messages.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong>TypeError</strong>: If you specify more than one of <code>before</code>, <code>after</code>, <code>about</code>.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>READ_MESSAGE_HISTORY</code> in the channel.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the channel is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_message" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_message">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_message</span><span class="signature">(
    self,
    channel: Union[<a href="../channels.html#TextableChannel">hikari.channels.TextableChannel</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    message: Union[<a href="../messages.html#PartialMessage">hikari.messages.PartialMessage</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]
) -&gt; <a href="../messages.html#Message">hikari.messages.Message</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">],</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_CHANNEL_MESSAGE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_message</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch a specific message in the given text channel.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>channel</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#TextableChannel">hikari.channels.TextableChannel</a>]):
The channel to fetch messages in. This may be the object or
the ID of an existing message.</li>
<li><strong>message</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../messages.html#PartialMessage">hikari.messages.PartialMessage</a>]):
The message to fetch. This may be the object or the ID of an
existing channel.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../messages.html#Message">hikari.messages.Message</a></strong>: The requested message.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>READ_MESSAGE_HISTORY</code> in the channel.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the channel is not found or the message is not found in the
given text channel.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.create_message" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.create_message">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">create_message</span><span class="signature">(
    self,
    channel: Union[<a href="../channels.html#TextableChannel">hikari.channels.TextableChannel</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    content: Union[Any, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    *,
    attachment: Union[<a href="../files.html#Resource">hikari.files.Resource</a>[Any], os.PathLike, str, bytes, bytearray, memoryview, _io.BytesIO, _io.StringIO, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    attachments: Union[Sequence[Union[<a href="../files.html#Resource">hikari.files.Resource</a>[Any], os.PathLike, str, bytes, bytearray, memoryview, _io.BytesIO, _io.StringIO]], <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    component: Union[<a href="../api/special_endpoints.html#ComponentBuilder">hikari.api.special_endpoints.ComponentBuilder</a>, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    components: Union[Sequence[<a href="../api/special_endpoints.html#ComponentBuilder">hikari.api.special_endpoints.ComponentBuilder</a>], <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    embed: Union[<a href="../embeds.html#Embed">hikari.embeds.Embed</a>, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    embeds: Union[Sequence[<a href="../embeds.html#Embed">hikari.embeds.Embed</a>], <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    tts: Union[bool, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    nonce: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    reply: Union[<a href="../messages.html#PartialMessage">hikari.messages.PartialMessage</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    mentions_everyone: Union[bool, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    mentions_reply: Union[bool, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    user_mentions: Union[Sequence[Union[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]], bool, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    role_mentions: Union[Sequence[Union[<a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]], bool, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; <a href="../messages.html#Message">hikari.messages.Message</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">],</span>
        <span class="n">content</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">attachment</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">attachments</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">component</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">components</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">embed</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">embeds</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">tts</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">nonce</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reply</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">mentions_everyone</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">mentions_reply</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">user_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">role_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_CHANNEL_MESSAGES</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;nonce&quot;</span><span class="p">,</span> <span class="n">nonce</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;message_reference&quot;</span><span class="p">,</span> <span class="n">reply</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="k">lambda</span> <span class="n">m</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;message_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">m</span><span class="p">))})</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_message</span><span class="p">(</span>
            <span class="n">route</span><span class="p">,</span>
            <span class="n">body</span><span class="p">,</span>
            <span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span>
            <span class="n">attachment</span><span class="o">=</span><span class="n">attachment</span><span class="p">,</span>
            <span class="n">attachments</span><span class="o">=</span><span class="n">attachments</span><span class="p">,</span>
            <span class="n">component</span><span class="o">=</span><span class="n">component</span><span class="p">,</span>
            <span class="n">components</span><span class="o">=</span><span class="n">components</span><span class="p">,</span>
            <span class="n">embed</span><span class="o">=</span><span class="n">embed</span><span class="p">,</span>
            <span class="n">embeds</span><span class="o">=</span><span class="n">embeds</span><span class="p">,</span>
            <span class="n">tts</span><span class="o">=</span><span class="n">tts</span><span class="p">,</span>
            <span class="n">mentions_everyone</span><span class="o">=</span><span class="n">mentions_everyone</span><span class="p">,</span>
            <span class="n">mentions_reply</span><span class="o">=</span><span class="n">mentions_reply</span><span class="p">,</span>
            <span class="n">user_mentions</span><span class="o">=</span><span class="n">user_mentions</span><span class="p">,</span>
            <span class="n">role_mentions</span><span class="o">=</span><span class="n">role_mentions</span><span class="p">,</span>
        <span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Create a message in the given channel.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>channel</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#TextableChannel">hikari.channels.TextableChannel</a>]):
The channel to create the message in.</li>
<li><p><strong>content</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Any]):
If provided, the message contents. If
<code><a href="../undefined.html#UNDEFINED">hikari.undefined.UNDEFINED</a></code>, then nothing will be sent
in the content. Any other value here will be cast to a
<code>str</code>.</p>

<p>If this is a <code><a href="../embeds.html#Embed">hikari.embeds.Embed</a></code> and no <code>embed</code> nor <code>embeds</code> kwarg
is provided, then this will instead update the embed. This allows
for simpler syntax when sending an embed alone.</p>

<p>Likewise, if this is a <code><a href="../files.html#Resource">hikari.files.Resource</a></code>, then the
content is instead treated as an attachment if no <code>attachment</code> and
no <code>attachments</code> kwargs are provided.</p></li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><p><strong>attachment</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../files.html#Resourceish">hikari.files.Resourceish</a>],):
If provided, the message attachment. This can be a resource,
or string of a path on your computer or a URL.</p>

<p>Attachments can be passed as many different things, to aid in
convenience.</p>

<ul>
<li>If a <code>pathlib.PurePath</code> or <code>str</code> to a valid URL, the
resource at the given URL will be streamed to Discord when
sending the message. Subclasses of
<code><a href="../files.html#WebResource">hikari.files.WebResource</a></code> such as
<code><a href="../files.html#URL">hikari.files.URL</a></code>,
<code><a href="../messages.html#Attachment">hikari.messages.Attachment</a></code>,
<code><a href="../emojis.html#Emoji">hikari.emojis.Emoji</a></code>,
<code>EmbedResource</code>, etc will also be uploaded this way.
This will use bit-inception, so only a small percentage of the
resource will remain in memory at any one time, thus aiding in
scalability.</li>
<li>If a <code><a href="../files.html#Bytes">hikari.files.Bytes</a></code> is passed, or a <code>str</code>
that contains a valid data URI is passed, then this is uploaded
with a randomized file name if not provided.</li>
<li>If a <code><a href="../files.html#File">hikari.files.File</a></code>, <code>pathlib.PurePath</code> or
<code>str</code> that is an absolute or relative path to a file
on your file system is passed, then this resource is uploaded
as an attachment using non-blocking code internally and streamed
using bit-inception where possible. This depends on the
type of <code>concurrent.futures.Executor</code> that is being used for
the application (default is a thread pool which supports this
behaviour).</li>
</ul></li>
<li><strong>attachments</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Sequence[<a href="../files.html#Resourceish">hikari.files.Resourceish</a>]],):
If provided, the message attachments. These can be resources, or
strings consisting of paths on your computer or URLs.</li>
<li><strong>component</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../api/special_endpoints.html#ComponentBuilder">hikari.api.special_endpoints.ComponentBuilder</a>]):
If provided, builder object of the component to include in this message.</li>
<li><strong>components</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Sequence[<a href="../api/special_endpoints.html#ComponentBuilder">hikari.api.special_endpoints.ComponentBuilder</a>]]):
If provided, a sequence of the component builder objects to include
in this message.</li>
<li><strong>embed</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../embeds.html#Embed">hikari.embeds.Embed</a>]):
If provided, the message embed.</li>
<li><strong>embeds</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Sequence[<a href="../embeds.html#Embed">hikari.embeds.Embed</a>]]):
If provided, the message embeds.</li>
<li><strong>tts</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[bool]):
If provided, whether the message will be read out by a screen
reader using Discord's TTS (text-to-speech) system.</li>
<li><strong>nonce</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
An arbitrary identifier to associate with the message. This
can be used to identify it later in received events. If provided,
this must be less than 32 bytes. If not provided, then
a null value is placed on the message instead. All users can
see this value.</li>
<li><strong>reply</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../messages.html#PartialMessage">hikari.messages.PartialMessage</a>]]):
If provided, the message to reply to.</li>
<li><strong>mentions_everyone</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[bool]):
If provided, whether the message should parse @everyone/@here
mentions.</li>
<li><p><strong>mentions_reply</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[bool]):
If provided, whether to mention the author of the message
that is being replied to.</p>

<p>This will not do anything if not being used with <code>reply</code>.</p></li>
<li><strong>user_mentions</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Union[<a href="../snowflakes.html#SnowflakeishSequence">hikari.snowflakes.SnowflakeishSequence</a>[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>], bool]]):
If provided, and <code>True</code>, all user mentions will be detected.
If provided, and <code>False</code>, all user mentions will be ignored
if appearing in the message body.
Alternatively this may be a collection of
<code><a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a></code>, or
<code><a href="../users.html#PartialUser">hikari.users.PartialUser</a></code> derivatives to enforce mentioning
specific users.</li>
<li><strong>role_mentions</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Union[<a href="../snowflakes.html#SnowflakeishSequence">hikari.snowflakes.SnowflakeishSequence</a>[<a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a>], bool]]):
If provided, and <code>True</code>, all role mentions will be detected.
If provided, and <code>False</code>, all role mentions will be ignored
if appearing in the message body.
Alternatively this may be a collection of
<code><a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a></code>, or
<code><a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a></code> derivatives to enforce mentioning
specific roles.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../messages.html#Message">hikari.messages.Message</a></strong>: The created message.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong>ValueError</strong>: If more than 100 unique objects/entities are passed for
<code>role_mentions</code> or <code>user_mentions</code> or if both <code>attachment</code> and
<code>attachments</code>, <code>component</code> and <code>components</code> or <code>embed</code> and <code>embeds</code>
are specified.</li>
<li><strong>TypeError</strong>: If <code>attachments</code>, <code>components</code> or <code>embeds</code> is passed but is not a
sequence.</li>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: This may be raised in several discrete situations, such as messages
being empty with no attachments or embeds; messages with more than
2000 characters in them, embeds that exceed one of the many embed
limits; too many attachments; attachments that are too large;
invalid image URLs in embeds; if <code>reply</code> is not found or not in the
same channel as <code>channel</code>; too many components.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>SEND_MESSAGES</code> in the channel or the
person you are trying to message has the DM's disabled.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the channel is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.crosspost_message" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.crosspost_message">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">crosspost_message</span><span class="signature">(
    self,
    channel: Union[<a href="../channels.html#GuildNewsChannel">hikari.channels.GuildNewsChannel</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    message: Union[<a href="../messages.html#PartialMessage">hikari.messages.PartialMessage</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]
) -&gt; <a href="../messages.html#Message">hikari.messages.Message</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">crosspost_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildNewsChannel</span><span class="p">],</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_CHANNEL_CROSSPOST</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_message</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Broadcast an announcement message.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>channel</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#GuildNewsChannel">hikari.channels.GuildNewsChannel</a>]):
The object or ID of the news channel to crosspost a message in.</li>
<li><strong>message</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../messages.html#PartialMessage">hikari.messages.PartialMessage</a>]):
The object or ID of the message to crosspost.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../messages.html#Message">hikari.messages.Message</a></strong>: The message object that was crossposted.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If you tried to crosspost a message that has already been broadcast.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you try to crosspost a message by the current user without the
<code>SEND_MESSAGES</code> permission for the target news channel or try to
crosspost a message by another user without both the <code>SEND_MESSAGES</code>
and <code>MANAGE_MESSAGES</code> permissions for the target channel.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the channel or message is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.edit_message" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.edit_message">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">edit_message</span><span class="signature">(
    self,
    channel: Union[<a href="../channels.html#TextableChannel">hikari.channels.TextableChannel</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    message: Union[<a href="../messages.html#PartialMessage">hikari.messages.PartialMessage</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    content: Union[Any, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    *,
    attachment: Union[<a href="../files.html#Resource">hikari.files.Resource</a>[Any], os.PathLike, str, bytes, bytearray, memoryview, _io.BytesIO, _io.StringIO, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    attachments: Union[Sequence[Union[<a href="../files.html#Resource">hikari.files.Resource</a>[Any], os.PathLike, str, bytes, bytearray, memoryview, _io.BytesIO, _io.StringIO]], <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    component: Union[<a href="../api/special_endpoints.html#ComponentBuilder">hikari.api.special_endpoints.ComponentBuilder</a>, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>, NoneType] = UNDEFINED,
    components: Union[Sequence[<a href="../api/special_endpoints.html#ComponentBuilder">hikari.api.special_endpoints.ComponentBuilder</a>], <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>, NoneType] = UNDEFINED,
    embed: Union[<a href="../embeds.html#Embed">hikari.embeds.Embed</a>, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>, NoneType] = UNDEFINED,
    embeds: Union[Sequence[<a href="../embeds.html#Embed">hikari.embeds.Embed</a>], <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>, NoneType] = UNDEFINED,
    replace_attachments: bool = False,
    mentions_everyone: Union[bool, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    mentions_reply: Union[bool, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    user_mentions: Union[Sequence[Union[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]], bool, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    role_mentions: Union[Sequence[Union[<a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]], bool, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    flags: Union[<a href="../messages.html#MessageFlag">hikari.messages.MessageFlag</a>, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; <a href="../messages.html#Message">hikari.messages.Message</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">],</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
        <span class="n">content</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">attachment</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">attachments</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">component</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">components</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">embed</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">embeds</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">replace_attachments</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">mentions_everyone</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">mentions_reply</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">user_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">role_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">flags</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">MessageFlag</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_CHANNEL_MESSAGE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;flags&quot;</span><span class="p">,</span> <span class="n">flags</span><span class="p">)</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_edit_message</span><span class="p">(</span>
            <span class="n">route</span><span class="p">,</span>
            <span class="n">body</span><span class="p">,</span>
            <span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span>
            <span class="n">attachment</span><span class="o">=</span><span class="n">attachment</span><span class="p">,</span>
            <span class="n">attachments</span><span class="o">=</span><span class="n">attachments</span><span class="p">,</span>
            <span class="n">component</span><span class="o">=</span><span class="n">component</span><span class="p">,</span>
            <span class="n">components</span><span class="o">=</span><span class="n">components</span><span class="p">,</span>
            <span class="n">embed</span><span class="o">=</span><span class="n">embed</span><span class="p">,</span>
            <span class="n">embeds</span><span class="o">=</span><span class="n">embeds</span><span class="p">,</span>
            <span class="n">replace_attachments</span><span class="o">=</span><span class="n">replace_attachments</span><span class="p">,</span>
            <span class="n">mentions_everyone</span><span class="o">=</span><span class="n">mentions_everyone</span><span class="p">,</span>
            <span class="n">mentions_reply</span><span class="o">=</span><span class="n">mentions_reply</span><span class="p">,</span>
            <span class="n">user_mentions</span><span class="o">=</span><span class="n">user_mentions</span><span class="p">,</span>
            <span class="n">role_mentions</span><span class="o">=</span><span class="n">role_mentions</span><span class="p">,</span>
        <span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Edit an existing message in a given channel.</p>

<p><em>Warning:</em>
If the message was not sent by your user, the only parameter
you may provide to this call is the <code>flags</code> parameter. Anything
else will result in a <code><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></code> being raised.</p>

<h6 id="notes">Notes</h6>

<p>Mentioning everyone, roles, or users in message edits currently
will not send a push notification showing a new mention to people
on Discord. It will still highlight in their chat as if they
were mentioned, however.</p>

<p>Also important to note that if you specify a text <code>content</code>, <code>mentions_everyone</code>,
<code>mentions_reply</code>, <code>user_mentions</code>, and <code>role_mentions</code> will default
to <code>False</code> as the message will be re-parsed for mentions. This will
also occur if only one of the four are specified</p>

<p>This is a limitation of Discord's design. If in doubt, specify all
four of them each time.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>channel</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#TextableChannel">hikari.channels.TextableChannel</a>]):
The channel to create the message in. This may be
the object or the ID of an existing channel.</li>
<li><strong>message</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../messages.html#PartialMessage">hikari.messages.PartialMessage</a>]):
The message to edit. This may be the object or the ID
of an existing message.</li>
<li><p><strong>content</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Any]):
If provided, the message content to update with. If
<code><a href="../undefined.html#UNDEFINED">hikari.undefined.UNDEFINED</a></code>, then the content will not
be changed. If <code>None</code>, then the content will be removed.</p>

<p>Any other value will be cast to a <code>str</code> before sending.</p>

<p>If this is a <code><a href="../embeds.html#Embed">hikari.embeds.Embed</a></code> and neither the <code>embed</code> or
<code>embeds</code> kwargs are provided or if this is a
<code><a href="../files.html#Resourceish">hikari.files.Resourceish</a></code> and neither the
<code>attachment</code> or <code>attachments</code> kwargs are provided, the values will
be overwritten. This allows for simpler syntax when sending an
embed or an attachment alone.</p></li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>attachment</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../files.html#Resourceish">hikari.files.Resourceish</a>]):
If provided, the attachment to set on the message. If
<code><a href="../undefined.html#UNDEFINED">hikari.undefined.UNDEFINED</a></code>, the previous attachment, if
present, is not changed. If this is <code>None</code>, then the
attachment is removed, if present. Otherwise, the new attachment
that was provided will be attached.</li>
<li><strong>attachments</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Sequence[<a href="../files.html#Resourceish">hikari.files.Resourceish</a>]]):
If provided, the attachments to set on the message. If
<code><a href="../undefined.html#UNDEFINED">hikari.undefined.UNDEFINED</a></code>, the previous attachments, if
present, are not changed. If this is <code>None</code>, then the
attachments is removed, if present. Otherwise, the new attachments
that were provided will be attached.</li>
<li><strong>component</strong> (<a href="../undefined.html#UndefinedNoneOr">hikari.undefined.UndefinedNoneOr</a>[<a href="../api/special_endpoints.html#ComponentBuilder">hikari.api.special_endpoints.ComponentBuilder</a>]):
If provided, builder object of the component to set for this message.
This component will replace any previously set components and passing
<code>None</code> will remove all components.</li>
<li><strong>components</strong> (<a href="../undefined.html#UndefinedNoneOr">hikari.undefined.UndefinedNoneOr</a>[typing.Sequence[<a href="../api/special_endpoints.html#ComponentBuilder">hikari.api.special_endpoints.ComponentBuilder</a>]]):
If provided, a sequence of the component builder objects set for
this message. These components will replace any previously set
components and passing <code>None</code> or an empty sequence will
remove all components.</li>
<li><strong>embed</strong> (<a href="../undefined.html#UndefinedNoneOr">hikari.undefined.UndefinedNoneOr</a>[<a href="../embeds.html#Embed">hikari.embeds.Embed</a>]):
If provided, the embed to set on the message. If
<code><a href="../undefined.html#UNDEFINED">hikari.undefined.UNDEFINED</a></code>, the previous embed(s) are not changed.
If this is <code>None</code> then any present embeds are removed.
Otherwise, the new embed that was provided will be used as the
replacement.</li>
<li><strong>embeds</strong> (<a href="../undefined.html#UndefinedNoneOr">hikari.undefined.UndefinedNoneOr</a>[typing.Sequence[<a href="../embeds.html#Embed">hikari.embeds.Embed</a>]]):
If provided, the embeds to set on the message. If
<code><a href="../undefined.html#UNDEFINED">hikari.undefined.UNDEFINED</a></code>, the previous embed(s) are not changed.
If this is <code>None</code> then any present embeds are removed.
Otherwise, the new embeds that were provided will be used as the
replacement.</li>
<li><p><strong>replace_attachments</strong> (bool):
Whether to replace the attachments with the provided ones. Defaults
to <code>False</code>.</p>

<p>Note this will also overwrite the embed attachments.</p></li>
<li><strong>mentions_everyone</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[bool]):
If provided, sanitation for <code>@everyone</code> mentions. If
<code><a href="../undefined.html#UNDEFINED">hikari.undefined.UNDEFINED</a></code>, then the previous setting is
not changed. If <code>True</code>, then <code>@everyone</code>/<code>@here</code> mentions
in the message content will show up as mentioning everyone that can
view the chat.</li>
<li><p><strong>mentions_reply</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[bool]):
If provided, whether to mention the author of the message
that is being replied to.</p>

<p>This will not do anything if <code>message</code> is not a reply message.</p></li>
<li><p><strong>user_mentions</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Union[<a href="../snowflakes.html#SnowflakeishSequence">hikari.snowflakes.SnowflakeishSequence</a>[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>], bool]]):
If provided, sanitation for user mentions. If
<code><a href="../undefined.html#UNDEFINED">hikari.undefined.UNDEFINED</a></code>, then the previous setting is
not changed. If <code>True</code>, all valid user mentions will behave
as mentions. If <code>False</code>, all valid user mentions will not
behave as mentions.</p>

<p>You may alternatively pass a collection of
<code><a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a></code> user IDs, or
<code><a href="../users.html#PartialUser">hikari.users.PartialUser</a></code>-derived objects.</p></li>
<li><p><strong>role_mentions</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Union[<a href="../snowflakes.html#SnowflakeishSequence">hikari.snowflakes.SnowflakeishSequence</a>[<a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a>], bool]]):
If provided, sanitation for role mentions. If
<code><a href="../undefined.html#UNDEFINED">hikari.undefined.UNDEFINED</a></code>, then the previous setting is
not changed. If <code>True</code>, all valid role mentions will behave
as mentions. If <code>False</code>, all valid role mentions will not
behave as mentions.</p>

<p>You may alternatively pass a collection of
<code><a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a></code> role IDs, or
<code><a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a></code>-derived objects.</p></li>
<li><p><strong>flags</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../messages.html#MessageFlag">hikari.messages.MessageFlag</a>]):
If provided, optional flags to set on the message. If
<code><a href="../undefined.html#UNDEFINED">hikari.undefined.UNDEFINED</a></code>, then nothing is changed.</p>

<p>Note that some flags may not be able to be set. Currently the only
flags that can be set are <code>NONE</code> and <code>SUPPRESS_EMBEDS</code>. If you
have <code>MANAGE_MESSAGES</code> permissions, you can use this call to
suppress embeds on another user's message.</p></li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../messages.html#Message">hikari.messages.Message</a></strong>: The edited message.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong>ValueError</strong>: If both <code>attachment</code> and <code>attachments</code>, <code>component</code> and <code>components</code>
or <code>embed</code> and <code>embeds</code> are specified.</li>
<li><strong>TypeError</strong>: If <code>attachments</code>, <code>components</code> or <code>embeds</code> is passed but is not a
sequence.</li>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: This may be raised in several discrete situations, such as messages
being empty with no embeds; messages with more than 2000 characters
in them, embeds that exceed one of the many embed
limits; invalid image URLs in embeds.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>SEND_MESSAGES</code> in the channel; if you try to
change the contents of another user's message; or if you try to edit
the flags on another user's message without the <code>MANAGE_MESSAGES</code>
permission.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the channel or message is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.delete_message" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.delete_message">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">delete_message</span><span class="signature">(
    self,
    channel: Union[<a href="../channels.html#TextableChannel">hikari.channels.TextableChannel</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    message: Union[<a href="../messages.html#PartialMessage">hikari.messages.PartialMessage</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">],</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_CHANNEL_MESSAGE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Delete a given message in a given channel.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>channel</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#TextableChannel">hikari.channels.TextableChannel</a>]):
The channel to delete the message in. This may be
the object or the ID of an existing channel.</li>
<li><strong>message</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../messages.html#PartialMessage">hikari.messages.PartialMessage</a>]):
The message to delete. This may be the object or the ID of
an existing message.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>MANAGE_MESSAGES</code>, and the message is
not sent by you.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the channel or message is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.delete_messages" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.delete_messages">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">delete_messages</span><span class="signature">(
    self,
    channel: Union[<a href="../channels.html#TextableChannel">hikari.channels.TextableChannel</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    messages: Union[<a href="../messages.html#PartialMessage">hikari.messages.PartialMessage</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int, Iterable[Union[<a href="../messages.html#PartialMessage">hikari.messages.PartialMessage</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]]],
    /,
    *other_messages: Union[<a href="../messages.html#PartialMessage">hikari.messages.PartialMessage</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_messages</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">],</span>
        <span class="n">messages</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span>
            <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
            <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishIterable</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
        <span class="p">],</span>
        <span class="o">/</span><span class="p">,</span>
        <span class="o">*</span><span class="n">other_messages</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_DELETE_CHANNEL_MESSAGES_BULK</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">)</span>

        <span class="n">pending</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">deleted</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">):</span>  <span class="c1"># Syntactic sugar. Allows to use iterables</span>
            <span class="n">pending</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">pending</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>

        <span class="c1"># This maintains the order in-order to keep a predictable deletion order.</span>
        <span class="n">pending</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">other_messages</span><span class="p">)</span>

        <span class="k">while</span> <span class="n">pending</span><span class="p">:</span>
            <span class="c1"># Discord only allows 2-100 messages in the BULK_DELETE endpoint. Because of that,</span>
            <span class="c1"># if the user wants 101 messages deleted, we will post 100 messages in bulk delete</span>
            <span class="c1"># and then the last message in a normal delete.</span>
            <span class="c1"># Along with this, the bucket size for v6 and v7 seems to be a bit restrictive. As of</span>
            <span class="c1"># 30th July 2020, this endpoint returned the following headers when being ratelimited:</span>
            <span class="c1">#       x-ratelimit-bucket         b05c0d8c2ab83895085006a8eae073a3</span>
            <span class="c1">#       x-ratelimit-limit          1</span>
            <span class="c1">#       x-ratelimit-remaining      0</span>
            <span class="c1">#       x-ratelimit-reset          1596033974.096</span>
            <span class="c1">#       x-ratelimit-reset-after    3.000</span>
            <span class="c1"># This kind of defeats the point of asynchronously gathering any of these</span>
            <span class="c1"># in the first place really. To save clogging up the event loop</span>
            <span class="c1"># (albeit at a cost of maybe a couple-dozen milliseconds per call),</span>
            <span class="c1"># I am just gonna invoke these sequentially instead.</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">pending</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">message</span> <span class="o">=</span> <span class="n">pending</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">delete_message</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
                    <span class="k">except</span> <span class="n">errors</span><span class="o">.</span><span class="n">NotFoundError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
                        <span class="c1"># If the message is not found then this error should be suppressed</span>
                        <span class="c1"># to keep consistency with how the bulk delete endpoint functions.</span>
                        <span class="k">if</span> <span class="n">exc</span><span class="o">.</span><span class="n">code</span> <span class="o">!=</span> <span class="mi">10008</span><span class="p">:</span>  <span class="c1"># Unknown Message</span>
                            <span class="k">raise</span>

                    <span class="n">deleted</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
                    <span class="n">chunk</span> <span class="o">=</span> <span class="n">pending</span><span class="p">[:</span><span class="mi">100</span><span class="p">]</span>
                    <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake_array</span><span class="p">(</span><span class="s2">&quot;messages&quot;</span><span class="p">,</span> <span class="n">chunk</span><span class="p">)</span>
                    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>
                    <span class="n">deleted</span> <span class="o">+=</span> <span class="n">chunk</span>

                <span class="n">pending</span> <span class="o">=</span> <span class="n">pending</span><span class="p">[</span><span class="mi">100</span><span class="p">:]</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">errors</span><span class="o">.</span><span class="n">BulkDeleteError</span><span class="p">(</span><span class="n">deleted</span><span class="p">,</span> <span class="n">pending</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">ex</span>
</pre></div>

        </details>

            <div class="docstring"><p>Bulk-delete messages from the channel.</p>

<p><em>Note:</em>
This API endpoint will only be able to delete 100 messages
at a time. For anything more than this, multiple requests will
be executed one-after-the-other, since the rate limits for this
endpoint do not favour more than one request per bucket.</p>

<p>If one message is left over from chunking per 100 messages, or
only one message is passed to this coroutine function, then the
logic is expected to defer to <code><a href="#RESTClientImpl.delete_message">delete_message</a></code>. The implication
of this is that the <code><a href="#RESTClientImpl.delete_message">delete_message</a></code> endpoint is rate limited
by a different bucket with different usage rates.</p>

<p><em>Warning:</em>
This endpoint is not atomic. If an error occurs midway through
a bulk delete, you will <strong>not</strong> be able to revert any changes made
up to this point.</p>

<p><em>Warning:</em>
Specifying any messages more than 14 days old will cause the call
to fail, potentially with partial completion.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>channel</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#TextableChannel">hikari.channels.TextableChannel</a>]):
The channel to bulk delete the messages in. This may be
the object or the ID of an existing channel.</li>
<li><strong>messages</strong> (typing.Union[<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../messages.html#PartialMessage">hikari.messages.PartialMessage</a>], <a href="../snowflakes.html#SnowflakeishIterable">hikari.snowflakes.SnowflakeishIterable</a>[<a href="../messages.html#PartialMessage">hikari.messages.PartialMessage</a>]]):
Either the object/ID of an existing message to delete or an iterable
of the objects and/or IDs of existing messages to delete.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>*other_messages</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../messages.html#PartialMessage">hikari.messages.PartialMessage</a>]):
The objects and/or IDs of other existing messages to delete.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#BulkDeleteError">hikari.errors.BulkDeleteError</a></strong>: An error containing the messages successfully deleted, and the
messages that were not removed. The
<code>BaseException.__cause__</code> of the exception will be the
original error that terminated this process.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.add_reaction" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.add_reaction">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">add_reaction</span><span class="signature">(
    self,
    channel: Union[<a href="../channels.html#TextableChannel">hikari.channels.TextableChannel</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    message: Union[<a href="../messages.html#PartialMessage">hikari.messages.PartialMessage</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    emoji: Union[str, <a href="../emojis.html#Emoji">hikari.emojis.Emoji</a>],
    emoji_id: Union[<a href="../emojis.html#CustomEmoji">hikari.emojis.CustomEmoji</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">add_reaction</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">],</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
        <span class="n">emoji</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">emojis</span><span class="o">.</span><span class="n">Emoji</span><span class="p">],</span>
        <span class="n">emoji_id</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">emojis</span><span class="o">.</span><span class="n">CustomEmoji</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PUT_MY_REACTION</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
            <span class="n">emoji</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_transform_emoji_to_url_format</span><span class="p">(</span><span class="n">emoji</span><span class="p">,</span> <span class="n">emoji_id</span><span class="p">),</span>
            <span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span>
            <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Add a reaction emoji to a message in a given channel.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>channel</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#TextableChannel">hikari.channels.TextableChannel</a>]):
The channel where the message to add the reaction to is. This
may be a <code><a href="../channels.html#TextableChannel">hikari.channels.TextableChannel</a></code> or the ID of an existing
channel.</li>
<li><strong>message</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../messages.html#PartialMessage">hikari.messages.PartialMessage</a>]):
The message to add a reaction to. This may be the
object or the ID of an existing message.</li>
<li><strong>emoji</strong> (typing.Union[str, <a href="../emojis.html#Emoji">hikari.emojis.Emoji</a>]):
Object or name of the emoji to react with.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>emoji_id</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../emojis.html#CustomEmoji">hikari.emojis.CustomEmoji</a>]]):
ID of the custom emoji to react with.
This should only be provided when a custom emoji's name is passed
for <code>emoji</code>.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If an invalid unicode emoji is given, or if the given custom emoji
does not exist.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>ADD_REACTIONS</code> (this is only necessary if you
are the first person to add the reaction).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the channel or message is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.delete_my_reaction" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.delete_my_reaction">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">delete_my_reaction</span><span class="signature">(
    self,
    channel: Union[<a href="../channels.html#TextableChannel">hikari.channels.TextableChannel</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    message: Union[<a href="../messages.html#PartialMessage">hikari.messages.PartialMessage</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    emoji: Union[str, <a href="../emojis.html#Emoji">hikari.emojis.Emoji</a>],
    emoji_id: Union[<a href="../emojis.html#CustomEmoji">hikari.emojis.CustomEmoji</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_my_reaction</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">],</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
        <span class="n">emoji</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">emojis</span><span class="o">.</span><span class="n">Emoji</span><span class="p">],</span>
        <span class="n">emoji_id</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">emojis</span><span class="o">.</span><span class="n">CustomEmoji</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_MY_REACTION</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
            <span class="n">emoji</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_transform_emoji_to_url_format</span><span class="p">(</span><span class="n">emoji</span><span class="p">,</span> <span class="n">emoji_id</span><span class="p">),</span>
            <span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span>
            <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Delete a reaction that your application user created.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>channel</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#TextableChannel">hikari.channels.TextableChannel</a>]):
The channel where the message to delete the reaction from is.
This may be the object or the ID of an existing channel.</li>
<li><strong>message</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../messages.html#PartialMessage">hikari.messages.PartialMessage</a>]):
The message to delete a reaction from. This may be the
object or the ID of an existing message.</li>
<li><strong>emoji</strong> (typing.Union[str, <a href="../emojis.html#Emoji">hikari.emojis.Emoji</a>]):
Object or name of the emoji to remove your reaction for.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>emoji_id</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../emojis.html#CustomEmoji">hikari.emojis.CustomEmoji</a>]]):
ID of the custom emoji to remove your reaction for.
This should only be provided when a custom emoji's name is passed
for <code>emoji</code>.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If an invalid unicode emoji is given, or if the given custom emoji
does not exist.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the channel or message is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.delete_all_reactions_for_emoji" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.delete_all_reactions_for_emoji">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">delete_all_reactions_for_emoji</span><span class="signature">(
    self,
    channel: Union[<a href="../channels.html#TextableChannel">hikari.channels.TextableChannel</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    message: Union[<a href="../messages.html#PartialMessage">hikari.messages.PartialMessage</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    emoji: Union[str, <a href="../emojis.html#Emoji">hikari.emojis.Emoji</a>],
    emoji_id: Union[<a href="../emojis.html#CustomEmoji">hikari.emojis.CustomEmoji</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_all_reactions_for_emoji</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">],</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
        <span class="n">emoji</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">emojis</span><span class="o">.</span><span class="n">Emoji</span><span class="p">],</span>
        <span class="n">emoji_id</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">emojis</span><span class="o">.</span><span class="n">CustomEmoji</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_REACTION_EMOJI</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
            <span class="n">emoji</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_transform_emoji_to_url_format</span><span class="p">(</span><span class="n">emoji</span><span class="p">,</span> <span class="n">emoji_id</span><span class="p">),</span>
            <span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span>
            <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Delete all reactions for a single emoji on a given message.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>channel</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#TextableChannel">hikari.channels.TextableChannel</a>]):
The channel where the message to delete the reactions from is.
This may be the object or the ID of an existing channel.</li>
<li><strong>message</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../messages.html#PartialMessage">hikari.messages.PartialMessage</a>]):
The message to delete a reactions from. This may be the
object or the ID of an existing message.</li>
<li><strong>emoji</strong> (typing.Union[str, <a href="../emojis.html#Emoji">hikari.emojis.Emoji</a>]):
Object or name of the emoji to remove all the reactions for.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>emoji_id</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../emojis.html#CustomEmoji">hikari.emojis.CustomEmoji</a>]]):
ID of the custom emoji to remove all the reactions for.
This should only be provided when a custom emoji's name is passed
for <code>emoji</code>.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If an invalid unicode emoji is given, or if the given custom emoji
does not exist.</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>MANAGE_MESSAGES</code> permission.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the channel or message is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.delete_reaction" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.delete_reaction">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">delete_reaction</span><span class="signature">(
    self,
    channel: Union[<a href="../channels.html#TextableChannel">hikari.channels.TextableChannel</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    message: Union[<a href="../messages.html#PartialMessage">hikari.messages.PartialMessage</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    user: Union[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    emoji: Union[str, <a href="../emojis.html#Emoji">hikari.emojis.Emoji</a>],
    emoji_id: Union[<a href="../emojis.html#CustomEmoji">hikari.emojis.CustomEmoji</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_reaction</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">],</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span>
        <span class="n">emoji</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">emojis</span><span class="o">.</span><span class="n">Emoji</span><span class="p">],</span>
        <span class="n">emoji_id</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">emojis</span><span class="o">.</span><span class="n">CustomEmoji</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_REACTION_USER</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
            <span class="n">emoji</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_transform_emoji_to_url_format</span><span class="p">(</span><span class="n">emoji</span><span class="p">,</span> <span class="n">emoji_id</span><span class="p">),</span>
            <span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span>
            <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span>
            <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Delete a reaction from a message.</p>

<p>If you are looking to delete your own applications reaction, use
<code><a href="#RESTClientImpl.delete_my_reaction">delete_my_reaction</a></code>.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>channel</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#TextableChannel">hikari.channels.TextableChannel</a>]):
The channel where the message to delete the reaction from is.
This may be the object or the ID of an existing channel.</li>
<li><strong>message</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../messages.html#PartialMessage">hikari.messages.PartialMessage</a>]):
The message to delete a reaction from. This may be the
object or the ID of an existing message.</li>
<li><strong>user</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>]):
Object or ID of the user to remove the reaction of.</li>
<li><strong>emoji</strong> (typing.Union[str, <a href="../emojis.html#Emoji">hikari.emojis.Emoji</a>]):
Object or name of the emoji to react with.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>emoji_id</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../emojis.html#CustomEmoji">hikari.emojis.CustomEmoji</a>]]):
ID of the custom emoji to react with.
This should only be provided when a custom emoji's name is passed
for <code>emoji</code>.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If an invalid unicode emoji is given, or if the given custom emoji
does not exist.</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>MANAGE_MESSAGES</code> permission.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the channel or message is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.delete_all_reactions" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.delete_all_reactions">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">delete_all_reactions</span><span class="signature">(
    self,
    channel: Union[<a href="../channels.html#TextableChannel">hikari.channels.TextableChannel</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    message: Union[<a href="../messages.html#PartialMessage">hikari.messages.PartialMessage</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_all_reactions</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">],</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_ALL_REACTIONS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Delete all reactions from a message.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>channel</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#TextableChannel">hikari.channels.TextableChannel</a>]):
The channel where the message to delete all reactions from is.
This may be the object or the ID of an existing channel.</li>
<li><strong>message</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../messages.html#PartialMessage">hikari.messages.PartialMessage</a>]):
The message to delete all reaction from. This may be the
object or the ID of an existing message.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If an invalid unicode emoji is given, or if the given custom emoji
does not exist.</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>MANAGE_MESSAGES</code> permission.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the channel or message is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_reactions_for_emoji" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_reactions_for_emoji">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">fetch_reactions_for_emoji</span><span class="signature">(
    self,
    channel: Union[<a href="../channels.html#TextableChannel">hikari.channels.TextableChannel</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    message: Union[<a href="../messages.html#PartialMessage">hikari.messages.PartialMessage</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    emoji: Union[str, <a href="../emojis.html#Emoji">hikari.emojis.Emoji</a>],
    emoji_id: Union[<a href="../emojis.html#CustomEmoji">hikari.emojis.CustomEmoji</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; <a href="../iterators.html#LazyIterator">hikari.iterators.LazyIterator</a>[<a href="../users.html#User">hikari.users.User</a>]</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">fetch_reactions_for_emoji</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">TextableChannel</span><span class="p">],</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
        <span class="n">emoji</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">emojis</span><span class="o">.</span><span class="n">Emoji</span><span class="p">],</span>
        <span class="n">emoji_id</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">emojis</span><span class="o">.</span><span class="n">CustomEmoji</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">iterators</span><span class="o">.</span><span class="n">LazyIterator</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">User</span><span class="p">]:</span>
        <span class="k">return</span> <span class="n">special_endpoints_impl</span><span class="o">.</span><span class="n">ReactorIterator</span><span class="p">(</span>
            <span class="n">entity_factory</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="p">,</span>
            <span class="n">request_call</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">,</span>
            <span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span>
            <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span>
            <span class="n">emoji</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_transform_emoji_to_url_format</span><span class="p">(</span><span class="n">emoji</span><span class="p">,</span> <span class="n">emoji_id</span><span class="p">),</span>
        <span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch reactions for an emoji from a message.</p>

<h6 id="notes">Notes</h6>

<p>This call is not a coroutine function, it returns a special type of
lazy iterator that will perform API calls as you iterate across it,
thus any errors documented below will happen then.</p>

<p>See <code><a href="../iterators.html">hikari.iterators</a></code> for the full API for this iterator type.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>channel</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#TextableChannel">hikari.channels.TextableChannel</a>]):
The channel where the message to delete all reactions from is.
This may be the object or the ID of an existing channel.</li>
<li><strong>message</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../messages.html#PartialMessage">hikari.messages.PartialMessage</a>]):
The message to delete all reaction from. This may be the
object or the ID of an existing message.</li>
<li><strong>emoji</strong> (typing.Union[str, <a href="../emojis.html#Emoji">hikari.emojis.Emoji</a>]):
Object or name of the emoji to get the reactions for.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>emoji_id</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../emojis.html#CustomEmoji">hikari.emojis.CustomEmoji</a>]]):
ID of the custom emoji to get the reactions for.
This should only be provided when a custom emoji's name is passed
for <code>emoji</code>.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../iterators.html#LazyIterator">hikari.iterators.LazyIterator</a>[<a href="../users.html#User">hikari.users.User</a>]</strong>: An iterator to fetch the users.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If an invalid unicode emoji is given, or if the given custom emoji
does not exist.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the channel or message is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.create_webhook" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.create_webhook">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">create_webhook</span><span class="signature">(
    self,
    channel: Union[<a href="../channels.html#GuildTextChannel">hikari.channels.GuildTextChannel</a>, <a href="../channels.html#GuildNewsChannel">hikari.channels.GuildNewsChannel</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    name: str,
    *,
    avatar: Union[<a href="../files.html#Resource">hikari.files.Resource</a>[Any], os.PathLike, str, bytes, bytearray, memoryview, _io.BytesIO, _io.StringIO, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    reason: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; <a href="../webhooks.html#IncomingWebhook">hikari.webhooks.IncomingWebhook</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_webhook</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">WebhookChannelT</span><span class="p">],</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">avatar</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">webhooks</span><span class="o">.</span><span class="n">IncomingWebhook</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_CHANNEL_WEBHOOKS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">avatar</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">avatar_resource</span> <span class="o">=</span> <span class="n">files</span><span class="o">.</span><span class="n">ensure_resource</span><span class="p">(</span><span class="n">avatar</span><span class="p">)</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">avatar_resource</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
                <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;avatar&quot;</span><span class="p">,</span> <span class="k">await</span> <span class="n">stream</span><span class="o">.</span><span class="n">data_uri</span><span class="p">())</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_incoming_webhook</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Create webhook in a channel.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>channel</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#WebhookChannelT">hikari.channels.WebhookChannelT</a>]):
The channel where the webhook will be created. This may be
the object or the ID of an existing channel.</li>
<li><strong>name</strong> (str):
The name for the webhook. This cannot be <code>clyde</code>.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>avatar</strong> (typing.Optional[<a href="../files.html#Resourceish">hikari.files.Resourceish</a>]):
If provided, the avatar for the webhook.</li>
<li><strong>reason</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the reason that will be recorded in the audit logs.
Maximum of 512 characters.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../webhooks.html#IncomingWebhook">hikari.webhooks.IncomingWebhook</a></strong>: The created webhook.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If <code>name</code> doesn't follow the restrictions enforced by discord.</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>MANAGE_WEBHOOKS</code> permission.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the channel is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_webhook" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_webhook">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_webhook</span><span class="signature">(
    self,
    webhook: Union[<a href="../webhooks.html#PartialWebhook">hikari.webhooks.PartialWebhook</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    *,
    token: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; <a href="../webhooks.html#PartialWebhook">hikari.webhooks.PartialWebhook</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_webhook</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">webhook</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">webhooks</span><span class="o">.</span><span class="n">PartialWebhook</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">token</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">webhooks</span><span class="o">.</span><span class="n">PartialWebhook</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">token</span> <span class="ow">is</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_WEBHOOK</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">webhook</span><span class="o">=</span><span class="n">webhook</span><span class="p">)</span>
            <span class="n">no_auth</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_WEBHOOK_WITH_TOKEN</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">webhook</span><span class="o">=</span><span class="n">webhook</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">)</span>
            <span class="n">no_auth</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">no_auth</span><span class="o">=</span><span class="n">no_auth</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_webhook</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch an existing webhook.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>webhook</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../webhooks.html#PartialWebhook">hikari.webhooks.PartialWebhook</a>]):
The webhook to fetch. This may be the object or the ID
of an existing webhook.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>token</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the webhoook token that will be used to fetch
the webhook instead of the token the client was initialized with.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../webhooks.html#PartialWebhook">hikari.webhooks.PartialWebhook</a></strong>: The requested webhook.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>MANAGE_WEBHOOKS</code> permission when not
using a token.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the webhook is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_channel_webhooks" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_channel_webhooks">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_channel_webhooks</span><span class="signature">(
    self,
    channel: Union[<a href="../channels.html#GuildTextChannel">hikari.channels.GuildTextChannel</a>, <a href="../channels.html#GuildNewsChannel">hikari.channels.GuildNewsChannel</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]
) -&gt; Sequence[<a href="../webhooks.html#PartialWebhook">hikari.webhooks.PartialWebhook</a>]</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_channel_webhooks</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">WebhookChannelT</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">webhooks</span><span class="o">.</span><span class="n">PartialWebhook</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_CHANNEL_WEBHOOKS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_webhook</span><span class="p">(</span><span class="n">webhook_pl</span><span class="p">)</span> <span class="k">for</span> <span class="n">webhook_pl</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch all channel webhooks.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>channel</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#WebhookChannelT">hikari.channels.WebhookChannelT</a>]):
The channel to fetch the webhooks for. This may be an instance of any
of the classes which are valid for <code><a href="../channels.html#WebhookChannelT">hikari.channels.WebhookChannelT</a></code>
or the ID of an existing channel.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>typing.Sequence[<a href="../webhooks.html#PartialWebhook">hikari.webhooks.PartialWebhook</a>]</strong>: The fetched webhooks.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>MANAGE_WEBHOOKS</code> permission.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the channel is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_guild_webhooks" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_guild_webhooks">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_guild_webhooks</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]
) -&gt; Sequence[<a href="../webhooks.html#PartialWebhook">hikari.webhooks.PartialWebhook</a>]</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_guild_webhooks</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">webhooks</span><span class="o">.</span><span class="n">PartialWebhook</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_WEBHOOKS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_webhook</span><span class="p">(</span><span class="n">webhook_payload</span><span class="p">)</span> <span class="k">for</span> <span class="n">webhook_payload</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch all guild webhooks.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to fetch the webhooks for. This may be the object
or the ID of an existing guild.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>typing.Sequence[<a href="../webhooks.html#PartialWebhook">hikari.webhooks.PartialWebhook</a>]</strong>: The fetched webhooks.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>MANAGE_WEBHOOKS</code> permission.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.edit_webhook" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.edit_webhook">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">edit_webhook</span><span class="signature">(
    self,
    webhook: Union[<a href="../webhooks.html#PartialWebhook">hikari.webhooks.PartialWebhook</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    *,
    token: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    name: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    avatar: Union[<a href="../files.html#Resource">hikari.files.Resource</a>[Any], os.PathLike, str, bytes, bytearray, memoryview, _io.BytesIO, _io.StringIO, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>, NoneType] = UNDEFINED,
    channel: Union[<a href="../channels.html#GuildTextChannel">hikari.channels.GuildTextChannel</a>, <a href="../channels.html#GuildNewsChannel">hikari.channels.GuildNewsChannel</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    reason: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; <a href="../webhooks.html#PartialWebhook">hikari.webhooks.PartialWebhook</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_webhook</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">webhook</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">webhooks</span><span class="o">.</span><span class="n">PartialWebhook</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">token</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">avatar</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">WebhookChannelT</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">webhooks</span><span class="o">.</span><span class="n">PartialWebhook</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">token</span> <span class="ow">is</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_WEBHOOK</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">webhook</span><span class="o">=</span><span class="n">webhook</span><span class="p">)</span>
            <span class="n">no_auth</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_WEBHOOK_WITH_TOKEN</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">webhook</span><span class="o">=</span><span class="n">webhook</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">)</span>
            <span class="n">no_auth</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;channel&quot;</span><span class="p">,</span> <span class="n">channel</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">avatar</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;avatar&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">avatar</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">avatar_resource</span> <span class="o">=</span> <span class="n">files</span><span class="o">.</span><span class="n">ensure_resource</span><span class="p">(</span><span class="n">avatar</span><span class="p">)</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">avatar_resource</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
                <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;avatar&quot;</span><span class="p">,</span> <span class="k">await</span> <span class="n">stream</span><span class="o">.</span><span class="n">data_uri</span><span class="p">())</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">,</span> <span class="n">no_auth</span><span class="o">=</span><span class="n">no_auth</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_webhook</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Edit a webhook.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>webhook</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../webhooks.html#PartialWebhook">hikari.webhooks.PartialWebhook</a>]):
The webhook to edit. This may be the object or the
ID of an existing webhook.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>token</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the webhoook token that will be used to edit
the webhook instead of the token the client was initialized with.</li>
<li><strong>name</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the new webhook name.</li>
<li><strong>avatar</strong> (<a href="../undefined.html#UndefinedNoneOr">hikari.undefined.UndefinedNoneOr</a>[<a href="../files.html#Resourceish">hikari.files.Resourceish</a>]):
If provided, the new webhook avatar. If <code>None</code>, will
remove the webhook avatar.</li>
<li><strong>channel</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#WebhookChannelT">hikari.channels.WebhookChannelT</a>]]):
If provided, the text channel to move the webhook to.</li>
<li><strong>reason</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the reason that will be recorded in the audit logs.
Maximum of 512 characters.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../webhooks.html#PartialWebhook">hikari.webhooks.PartialWebhook</a></strong>: The edited webhook.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>MANAGE_WEBHOOKS</code> permission when not
using a token.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the webhook is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.delete_webhook" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.delete_webhook">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">delete_webhook</span><span class="signature">(
    self,
    webhook: Union[<a href="../webhooks.html#PartialWebhook">hikari.webhooks.PartialWebhook</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    *,
    token: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_webhook</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">webhook</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">webhooks</span><span class="o">.</span><span class="n">PartialWebhook</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">token</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">token</span> <span class="ow">is</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_WEBHOOK</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">webhook</span><span class="o">=</span><span class="n">webhook</span><span class="p">)</span>
            <span class="n">no_auth</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_WEBHOOK_WITH_TOKEN</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">webhook</span><span class="o">=</span><span class="n">webhook</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">)</span>
            <span class="n">no_auth</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">no_auth</span><span class="o">=</span><span class="n">no_auth</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Delete a webhook.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>webhook</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../webhooks.html#PartialWebhook">hikari.webhooks.PartialWebhook</a>]):
The webhook to delete. This may be the object or the
ID of an existing webhook.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>token</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the webhoook token that will be used to delete
the webhook instead of the token the client was initialized with.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>MANAGE_WEBHOOKS</code> permission when not
using a token.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the webhoook is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.execute_webhook" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.execute_webhook">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">execute_webhook</span><span class="signature">(
    self,
    webhook: Union[<a href="../webhooks.html#ExecutableWebhook">hikari.webhooks.ExecutableWebhook</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    token: str,
    content: Union[Any, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    *,
    username: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    avatar_url: Union[<a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>, str, <a href="../files.html#URL">hikari.files.URL</a>] = UNDEFINED,
    attachment: Union[<a href="../files.html#Resource">hikari.files.Resource</a>[Any], os.PathLike, str, bytes, bytearray, memoryview, _io.BytesIO, _io.StringIO, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    attachments: Union[Sequence[Union[<a href="../files.html#Resource">hikari.files.Resource</a>[Any], os.PathLike, str, bytes, bytearray, memoryview, _io.BytesIO, _io.StringIO]], <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    component: Union[<a href="../api/special_endpoints.html#ComponentBuilder">hikari.api.special_endpoints.ComponentBuilder</a>, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    components: Union[Sequence[<a href="../api/special_endpoints.html#ComponentBuilder">hikari.api.special_endpoints.ComponentBuilder</a>], <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    embed: Union[<a href="../embeds.html#Embed">hikari.embeds.Embed</a>, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    embeds: Union[Sequence[<a href="../embeds.html#Embed">hikari.embeds.Embed</a>], <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    tts: Union[bool, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    mentions_everyone: Union[bool, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    user_mentions: Union[Sequence[Union[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]], bool, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    role_mentions: Union[Sequence[Union[<a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]], bool, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    flags: Union[<a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>, int, <a href="../messages.html#MessageFlag">hikari.messages.MessageFlag</a>] = UNDEFINED
) -&gt; <a href="../messages.html#Message">hikari.messages.Message</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">execute_webhook</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">webhook</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">webhooks</span><span class="o">.</span><span class="n">ExecutableWebhook</span><span class="p">,</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflakeish</span><span class="p">],</span>
        <span class="n">token</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">content</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">username</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">avatar_url</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedType</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">files</span><span class="o">.</span><span class="n">URL</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">attachment</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">attachments</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">component</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">components</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">embed</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">embeds</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">tts</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">mentions_everyone</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">user_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">role_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">flags</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedType</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="n">messages_</span><span class="o">.</span><span class="n">MessageFlag</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">:</span>
        <span class="c1"># int(ExecutableWebhook) isn&#39;t guaranteed to be valid nor the ID used to execute this entity as a webhook.</span>
        <span class="n">webhook_id</span> <span class="o">=</span> <span class="n">webhook</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">webhook</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="k">else</span> <span class="n">webhook</span><span class="o">.</span><span class="n">webhook_id</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_WEBHOOK_WITH_TOKEN</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">webhook</span><span class="o">=</span><span class="n">webhook_id</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">)</span>

        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;username&quot;</span><span class="p">,</span> <span class="n">username</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;avatar_url&quot;</span><span class="p">,</span> <span class="n">avatar_url</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;flags&quot;</span><span class="p">,</span> <span class="n">flags</span><span class="p">)</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">StringMapBuilder</span><span class="p">()</span>
        <span class="n">query</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;wait&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_message</span><span class="p">(</span>
            <span class="n">route</span><span class="p">,</span>
            <span class="n">body</span><span class="p">,</span>
            <span class="n">query</span><span class="p">,</span>
            <span class="n">no_auth</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span>
            <span class="n">attachment</span><span class="o">=</span><span class="n">attachment</span><span class="p">,</span>
            <span class="n">attachments</span><span class="o">=</span><span class="n">attachments</span><span class="p">,</span>
            <span class="n">component</span><span class="o">=</span><span class="n">component</span><span class="p">,</span>
            <span class="n">components</span><span class="o">=</span><span class="n">components</span><span class="p">,</span>
            <span class="n">embed</span><span class="o">=</span><span class="n">embed</span><span class="p">,</span>
            <span class="n">embeds</span><span class="o">=</span><span class="n">embeds</span><span class="p">,</span>
            <span class="n">tts</span><span class="o">=</span><span class="n">tts</span><span class="p">,</span>
            <span class="n">mentions_everyone</span><span class="o">=</span><span class="n">mentions_everyone</span><span class="p">,</span>
            <span class="n">user_mentions</span><span class="o">=</span><span class="n">user_mentions</span><span class="p">,</span>
            <span class="n">role_mentions</span><span class="o">=</span><span class="n">role_mentions</span><span class="p">,</span>
            <span class="n">mentions_reply</span><span class="o">=</span><span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Execute a webhook.</p>

<p><em>Warning:</em>
As of writing, <code>username</code> and <code>avatar_url</code> are ignored for
interaction webhooks.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>webhook</strong> (typing.Union[<a href="../snowflakes.html#Snowflakeish">hikari.snowflakes.Snowflakeish</a>, <a href="../webhooks.html#ExecutableWebhook">hikari.webhooks.ExecutableWebhook</a>]):
The webhook to execute. This may be the object
or the ID of an existing webhook.</li>
<li><strong>token</strong> (str):
The webhook token.</li>
<li><p><strong>content</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Any]):
If provided, the message contents. If
<code><a href="../undefined.html#UNDEFINED">hikari.undefined.UNDEFINED</a></code>, then nothing will be sent
in the content. Any other value here will be cast to a
<code>str</code>.</p>

<p>If this is a <code><a href="../embeds.html#Embed">hikari.embeds.Embed</a></code> and no <code>embed</code> nor
no <code>embeds</code> kwarg is provided, then this will instead
update the embed. This allows for simpler syntax when
sending an embed alone.</p>

<p>Likewise, if this is a <code><a href="../files.html#Resource">hikari.files.Resource</a></code>, then the
content is instead treated as an attachment if no <code>attachment</code> and
no <code>attachments</code> kwargs are provided.</p></li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>username</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the username to override the webhook's username
for this request.</li>
<li><strong>avatar_url</strong> (typing.Union[<a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>, <a href="../files.html#URL">hikari.files.URL</a>, str]):
If provided, the url of an image to override the webhook's
avatar with for this request.</li>
<li><p><strong>attachment</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../files.html#Resourceish">hikari.files.Resourceish</a>],):
If provided, the message attachment. This can be a resource,
or string of a path on your computer or a URL.</p>

<p>Attachments can be passed as many different things, to aid in
convenience.</p>

<ul>
<li>If a <code>pathlib.PurePath</code> or <code>str</code> to a valid URL, the
resource at the given URL will be streamed to Discord when
sending the message. Subclasses of
<code><a href="../files.html#WebResource">hikari.files.WebResource</a></code> such as
<code><a href="../files.html#URL">hikari.files.URL</a></code>,
<code><a href="../messages.html#Attachment">hikari.messages.Attachment</a></code>,
<code><a href="../emojis.html#Emoji">hikari.emojis.Emoji</a></code>,
<code>EmbedResource</code>, etc will also be uploaded this way.
This will use bit-inception, so only a small percentage of the
resource will remain in memory at any one time, thus aiding in
scalability.</li>
<li>If a <code><a href="../files.html#Bytes">hikari.files.Bytes</a></code> is passed, or a <code>str</code>
that contains a valid data URI is passed, then this is uploaded
with a randomized file name if not provided.</li>
<li>If a <code><a href="../files.html#File">hikari.files.File</a></code>, <code>pathlib.PurePath</code> or
<code>str</code> that is an absolute or relative path to a file
on your file system is passed, then this resource is uploaded
as an attachment using non-blocking code internally and streamed
using bit-inception where possible. This depends on the
type of <code>concurrent.futures.Executor</code> that is being used for
the application (default is a thread pool which supports this
behaviour).</li>
</ul></li>
<li><strong>attachments</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Sequence[<a href="../files.html#Resourceish">hikari.files.Resourceish</a>]],):
If provided, the message attachments. These can be resources, or
strings consisting of paths on your computer or URLs.</li>
<li><strong>component</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../api/special_endpoints.html#ComponentBuilder">hikari.api.special_endpoints.ComponentBuilder</a>]):
If provided, builder object of the component to include in this message.</li>
<li><strong>components</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Sequence[<a href="../api/special_endpoints.html#ComponentBuilder">hikari.api.special_endpoints.ComponentBuilder</a>]]):
If provided, a sequence of the component builder objects to include
in this message.</li>
<li><strong>embed</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../embeds.html#Embed">hikari.embeds.Embed</a>]):
If provided, the message embed.</li>
<li><strong>embeds</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Sequence[<a href="../embeds.html#Embed">hikari.embeds.Embed</a>]]):
If provided, the message embeds.</li>
<li><strong>tts</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[bool]):
If provided, whether the message will be read out by a screen
reader using Discord's TTS (text-to-speech) system.</li>
<li><strong>mentions_everyone</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[bool]):
If provided, whether the message should parse @everyone/@here
mentions.</li>
<li><strong>user_mentions</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Union[<a href="../snowflakes.html#SnowflakeishSequence">hikari.snowflakes.SnowflakeishSequence</a>[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>], bool]]):
If provided, and <code>True</code>, all user mentions will be detected.
If provided, and <code>False</code>, all user mentions will be ignored
if appearing in the message body.
Alternatively this may be a collection of
<code><a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a></code>, or
<code><a href="../users.html#PartialUser">hikari.users.PartialUser</a></code> derivatives to enforce mentioning
specific users.</li>
<li><strong>role_mentions</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Union[<a href="../snowflakes.html#SnowflakeishSequence">hikari.snowflakes.SnowflakeishSequence</a>[<a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a>], bool]]):
If provided, and <code>True</code>, all role mentions will be detected.
If provided, and <code>False</code>, all role mentions will be ignored
if appearing in the message body.
Alternatively this may be a collection of
<code><a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a></code>, or
<code><a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a></code> derivatives to enforce mentioning
specific roles.</li>
<li><p><strong>flags</strong> (typing.Union[<a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>, int, <a href="../messages.html#MessageFlag">hikari.messages.MessageFlag</a>]):
The flags to set for this webhook message.</p>

<p><em>Warning:</em>
As of writing this can only be set for interaction webhooks
and the only settable flag is EPHEMERAL; this field is just
ignored for non-interaction webhooks.</p></li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../messages.html#Message">hikari.messages.Message</a></strong>: The created message.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong>ValueError</strong>: If more than 100 unique objects/entities are passed for
<code>role_mentions</code> or <code>user_mentions</code> or if both <code>attachment</code> and
<code>attachments</code> or <code>embed</code> and <code>embeds</code> are specified.</li>
<li><strong>TypeError</strong>: If <code>attachments</code>, or <code>embeds</code> is passed but is not a sequence.</li>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: This may be raised in several discrete situations, such as messages
being empty with no attachments or embeds; messages with more than
2000 characters in them, embeds that exceed one of the many embed
limits; too many attachments; attachments that are too large;
invalid image URLs in embeds; too many components.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the webhook is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_webhook_message" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_webhook_message">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_webhook_message</span><span class="signature">(
    self,
    webhook: Union[<a href="../webhooks.html#ExecutableWebhook">hikari.webhooks.ExecutableWebhook</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    token: str,
    message: Union[<a href="../messages.html#PartialMessage">hikari.messages.PartialMessage</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]
) -&gt; <a href="../messages.html#Message">hikari.messages.Message</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_webhook_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">webhook</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">webhooks</span><span class="o">.</span><span class="n">ExecutableWebhook</span><span class="p">,</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflakeish</span><span class="p">],</span>
        <span class="n">token</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">PartialMessage</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">:</span>
        <span class="c1"># int(ExecutableWebhook) isn&#39;t guaranteed to be valid nor the ID used to execute this entity as a webhook.</span>
        <span class="n">webhook_id</span> <span class="o">=</span> <span class="n">webhook</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">webhook</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="k">else</span> <span class="n">webhook</span><span class="o">.</span><span class="n">webhook_id</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_WEBHOOK_MESSAGE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">webhook</span><span class="o">=</span><span class="n">webhook_id</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">no_auth</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_message</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch an old message sent by the webhook.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>webhook</strong> (typing.Union[<a href="../snowflakes.html#Snowflakeish">hikari.snowflakes.Snowflakeish</a>, <a href="../webhooks.html#ExecutableWebhook">hikari.webhooks.ExecutableWebhook</a>]):
The webhook to execute. This may be the object
or the ID of an existing webhook.</li>
<li><strong>token</strong> (str):
The webhook token.</li>
<li><strong>message</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../messages.html#PartialMessage">hikari.messages.PartialMessage</a>]):
The message to fetch. This may be the object or the ID of an
existing channel.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../messages.html#Message">hikari.messages.Message</a></strong>: The requested message.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the webhook is not found or the webhook's message wasn't found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.edit_webhook_message" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.edit_webhook_message">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">edit_webhook_message</span><span class="signature">(
    self,
    webhook: Union[<a href="../webhooks.html#ExecutableWebhook">hikari.webhooks.ExecutableWebhook</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    token: str,
    message: Union[<a href="../messages.html#Message">hikari.messages.Message</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    content: Union[Any, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>, NoneType] = UNDEFINED,
    *,
    attachment: Union[<a href="../files.html#Resource">hikari.files.Resource</a>[Any], os.PathLike, str, bytes, bytearray, memoryview, _io.BytesIO, _io.StringIO, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    attachments: Union[Sequence[Union[<a href="../files.html#Resource">hikari.files.Resource</a>[Any], os.PathLike, str, bytes, bytearray, memoryview, _io.BytesIO, _io.StringIO]], <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    component: Union[<a href="../api/special_endpoints.html#ComponentBuilder">hikari.api.special_endpoints.ComponentBuilder</a>, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>, NoneType] = UNDEFINED,
    components: Union[Sequence[<a href="../api/special_endpoints.html#ComponentBuilder">hikari.api.special_endpoints.ComponentBuilder</a>], <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>, NoneType] = UNDEFINED,
    embed: Union[<a href="../embeds.html#Embed">hikari.embeds.Embed</a>, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>, NoneType] = UNDEFINED,
    embeds: Union[Sequence[<a href="../embeds.html#Embed">hikari.embeds.Embed</a>], <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>, NoneType] = UNDEFINED,
    replace_attachments: bool = False,
    mentions_everyone: Union[bool, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    user_mentions: Union[Sequence[Union[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]], bool, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    role_mentions: Union[Sequence[Union[<a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]], bool, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; <a href="../messages.html#Message">hikari.messages.Message</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_webhook_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">webhook</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">webhooks</span><span class="o">.</span><span class="n">ExecutableWebhook</span><span class="p">,</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflakeish</span><span class="p">],</span>
        <span class="n">token</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">],</span>
        <span class="n">content</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">attachment</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">attachments</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">component</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">components</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">embed</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">embeds</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">replace_attachments</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">mentions_everyone</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">user_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">role_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">:</span>
        <span class="c1"># int(ExecutableWebhook) isn&#39;t guaranteed to be valid nor the ID used to execute this entity as a webhook.</span>
        <span class="n">webhook_id</span> <span class="o">=</span> <span class="n">webhook</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">webhook</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="k">else</span> <span class="n">webhook</span><span class="o">.</span><span class="n">webhook_id</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_WEBHOOK_MESSAGE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">webhook</span><span class="o">=</span><span class="n">webhook_id</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">)</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_edit_message</span><span class="p">(</span>
            <span class="n">route</span><span class="p">,</span>
            <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">(),</span>
            <span class="n">no_auth</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span>
            <span class="n">attachment</span><span class="o">=</span><span class="n">attachment</span><span class="p">,</span>
            <span class="n">attachments</span><span class="o">=</span><span class="n">attachments</span><span class="p">,</span>
            <span class="n">component</span><span class="o">=</span><span class="n">component</span><span class="p">,</span>
            <span class="n">components</span><span class="o">=</span><span class="n">components</span><span class="p">,</span>
            <span class="n">embed</span><span class="o">=</span><span class="n">embed</span><span class="p">,</span>
            <span class="n">embeds</span><span class="o">=</span><span class="n">embeds</span><span class="p">,</span>
            <span class="n">replace_attachments</span><span class="o">=</span><span class="n">replace_attachments</span><span class="p">,</span>
            <span class="n">mentions_everyone</span><span class="o">=</span><span class="n">mentions_everyone</span><span class="p">,</span>
            <span class="n">mentions_reply</span><span class="o">=</span><span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
            <span class="n">user_mentions</span><span class="o">=</span><span class="n">user_mentions</span><span class="p">,</span>
            <span class="n">role_mentions</span><span class="o">=</span><span class="n">role_mentions</span><span class="p">,</span>
        <span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Edit a message sent by a webhook.</p>

<h6 id="notes">Notes</h6>

<p>Mentioning everyone, roles, or users in message edits currently
will not send a push notification showing a new mention to people
on Discord. It will still highlight in their chat as if they
were mentioned, however.</p>

<p>Also important to note that if you specify a text <code>content</code>, <code>mentions_everyone</code>,
<code>mentions_reply</code>, <code>user_mentions</code>, and <code>role_mentions</code> will default
to <code>False</code> as the message will be re-parsed for mentions. This will
also occur if only one of the four are specified</p>

<p>This is a limitation of Discord's design. If in doubt, specify all
four of them each time.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>webhook</strong> (typing.Union[<a href="../snowflakes.html#Snowflakeish">hikari.snowflakes.Snowflakeish</a>, <a href="../webhooks.html#ExecutableWebhook">hikari.webhooks.ExecutableWebhook</a>]):
The webhook to execute. This may be the object
or the ID of an existing webhook.</li>
<li><strong>token</strong> (str):
The webhook token.</li>
<li><strong>message</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../messages.html#PartialMessage">hikari.messages.PartialMessage</a>]):
The message to delete. This may be the object or the ID of
an existing message.</li>
<li><p><strong>content</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Any]):
If provided, the message content to update with. If
<code><a href="../undefined.html#UNDEFINED">hikari.undefined.UNDEFINED</a></code>, then the content will not
be changed. If <code>None</code>, then the content will be removed.</p>

<p>Any other value will be cast to a <code>str</code> before sending.</p>

<p>If this is a <code><a href="../embeds.html#Embed">hikari.embeds.Embed</a></code> and neither the
<code>embed</code> or <code>embeds</code> kwargs are provided or if this is a
<code><a href="../files.html#Resourceish">hikari.files.Resourceish</a></code> and neither the <code>attachment</code> or
<code>attachments</code> kwargs are provided, the values will be overwritten.
This allows for simpler syntax when sending an embed or an
attachment alone.</p></li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>attachment</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../files.html#Resourceish">hikari.files.Resourceish</a>]):
If provided, the attachment to set on the message. If
<code><a href="../undefined.html#UNDEFINED">hikari.undefined.UNDEFINED</a></code>, the previous attachment, if
present, is not changed. If this is <code>None</code>, then the
attachment is removed, if present. Otherwise, the new attachment
that was provided will be attached.</li>
<li><strong>attachments</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Sequence[<a href="../files.html#Resourceish">hikari.files.Resourceish</a>]]):
If provided, the attachments to set on the message. If
<code><a href="../undefined.html#UNDEFINED">hikari.undefined.UNDEFINED</a></code>, the previous attachments, if
present, are not changed. If this is <code>None</code>, then the
attachments is removed, if present. Otherwise, the new attachments
that were provided will be attached.</li>
<li><strong>component</strong> (<a href="../undefined.html#UndefinedNoneOr">hikari.undefined.UndefinedNoneOr</a>[<a href="../api/special_endpoints.html#ComponentBuilder">hikari.api.special_endpoints.ComponentBuilder</a>]):
If provided, builder object of the component to set for this message.
This component will replace any previously set components and passing
<code>None</code> will remove all components.</li>
<li><strong>components</strong> (<a href="../undefined.html#UndefinedNoneOr">hikari.undefined.UndefinedNoneOr</a>[typing.Sequence[<a href="../api/special_endpoints.html#ComponentBuilder">hikari.api.special_endpoints.ComponentBuilder</a>]]):
If provided, a sequence of the component builder objects set for
this message. These components will replace any previously set
components and passing <code>None</code> or an empty sequence will
remove all components.</li>
<li><strong>embed</strong> (<a href="../undefined.html#UndefinedNoneOr">hikari.undefined.UndefinedNoneOr</a>[<a href="../embeds.html#Embed">hikari.embeds.Embed</a>]):
If provided, the embed to set on the message. If
<code><a href="../undefined.html#UNDEFINED">hikari.undefined.UNDEFINED</a></code>, the previous embed(s) are not changed.
If this is <code>None</code> then any present embeds are removed.
Otherwise, the new embed that was provided will be used as the
replacement.</li>
<li><strong>embeds</strong> (<a href="../undefined.html#UndefinedNoneOr">hikari.undefined.UndefinedNoneOr</a>[typing.Sequence[<a href="../embeds.html#Embed">hikari.embeds.Embed</a>]]):
If provided, the embeds to set on the message. If
<code><a href="../undefined.html#UNDEFINED">hikari.undefined.UNDEFINED</a></code>, the previous embed(s) are not changed.
If this is <code>None</code> then any present embeds are removed.
Otherwise, the new embeds that were provided will be used as the
replacement.</li>
<li><p><strong>replace_attachments</strong> (bool):
Whether to replace the attachments with the provided ones. Defaults
to <code>False</code>.</p>

<p>Note this will also overwrite the embed attachments.</p></li>
<li><strong>mentions_everyone</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[bool]):
If provided, sanitation for <code>@everyone</code> mentions. If
<code><a href="../undefined.html#UNDEFINED">hikari.undefined.UNDEFINED</a></code>, then the previous setting is
not changed. If <code>True</code>, then <code>@everyone</code>/<code>@here</code> mentions
in the message content will show up as mentioning everyone that can
view the chat.</li>
<li><strong>user_mentions</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Union[<a href="../snowflakes.html#SnowflakeishSequence">hikari.snowflakes.SnowflakeishSequence</a>[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>], bool]]):
If provided, and <code>True</code>, all user mentions will be detected.
If provided, and <code>False</code>, all user mentions will be ignored
if appearing in the message body.
Alternatively this may be a collection of
<code><a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a></code>, or
<code><a href="../users.html#PartialUser">hikari.users.PartialUser</a></code> derivatives to enforce mentioning
specific users.</li>
<li><strong>role_mentions</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Union[<a href="../snowflakes.html#SnowflakeishSequence">hikari.snowflakes.SnowflakeishSequence</a>[<a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a>], bool]]):
If provided, and <code>True</code>, all role mentions will be detected.
If provided, and <code>False</code>, all role mentions will be ignored
if appearing in the message body.
Alternatively this may be a collection of
<code><a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a></code>, or
<code><a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a></code> derivatives to enforce mentioning
specific roles.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../messages.html#Message">hikari.messages.Message</a></strong>: The edited message.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong>ValueError</strong>: If both <code>attachment</code> and <code>attachments</code>, <code>component</code> and <code>components</code>
or <code>embed</code> and <code>embeds</code> are specified.</li>
<li><strong>TypeError</strong>: If <code>attachments</code>, <code>components</code> or <code>embeds</code> is passed but is not a
sequence.</li>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: This may be raised in several discrete situations, such as messages
being empty with no attachments or embeds; messages with more than
2000 characters in them, embeds that exceed one of the many embed
limits; too many attachments; attachments that are too large;
invalid image URLs in embeds; too many components.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the webhook or the message are not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.delete_webhook_message" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.delete_webhook_message">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">delete_webhook_message</span><span class="signature">(
    self,
    webhook: Union[<a href="../webhooks.html#ExecutableWebhook">hikari.webhooks.ExecutableWebhook</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    token: str,
    message: Union[<a href="../messages.html#Message">hikari.messages.Message</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_webhook_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">webhook</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">webhooks</span><span class="o">.</span><span class="n">ExecutableWebhook</span><span class="p">,</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflakeish</span><span class="p">],</span>
        <span class="n">token</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># int(ExecutableWebhook) isn&#39;t guaranteed to be valid nor the ID used to execute this entity as a webhook.</span>
        <span class="n">webhook_id</span> <span class="o">=</span> <span class="n">webhook</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">webhook</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="k">else</span> <span class="n">webhook</span><span class="o">.</span><span class="n">webhook_id</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_WEBHOOK_MESSAGE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">webhook</span><span class="o">=</span><span class="n">webhook_id</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">no_auth</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Delete a given message in a given channel.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>webhook</strong> (typing.Union[<a href="../snowflakes.html#Snowflakeish">hikari.snowflakes.Snowflakeish</a>, <a href="../webhooks.html#ExecutableWebhook">hikari.webhooks.ExecutableWebhook</a>]):
The webhook to execute. This may be the object
or the ID of an existing webhook.</li>
<li><strong>token</strong> (str):
The webhook token.</li>
<li><strong>message</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../messages.html#PartialMessage">hikari.messages.PartialMessage</a>]):
The message to delete. This may be the object or the ID of
an existing message.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the webhook or the message are not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_gateway_url" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_gateway_url">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_gateway_url</span><span class="signature">(self) -&gt; str</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_gateway_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GATEWAY</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="c1"># This doesn&#39;t need authorization.</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">no_auth</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">]</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">url</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch the gateway url.</p>

<p><em>Note:</em>
This endpoint does not require any valid authorization.</p>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_gateway_bot_info" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_gateway_bot_info">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_gateway_bot_info</span><span class="signature">(self) -&gt; <a href="../sessions.html#GatewayBotInfo">hikari.sessions.GatewayBotInfo</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_gateway_bot_info</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">sessions</span><span class="o">.</span><span class="n">GatewayBotInfo</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GATEWAY_BOT</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_gateway_bot_info</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch the gateway gateway info for the bot.</p>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../sessions.html#GatewayBotInfo">hikari.sessions.GatewayBotInfo</a></strong>: The gateway bot information.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_invite" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_invite">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_invite</span><span class="signature">(
    self,
    invite: Union[<a href="../invites.html#InviteCode">hikari.invites.InviteCode</a>, str]
) -&gt; <a href="../invites.html#Invite">hikari.invites.Invite</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_invite</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">invite</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">invites</span><span class="o">.</span><span class="n">InviteCode</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">invites</span><span class="o">.</span><span class="n">Invite</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_INVITE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">invite_code</span><span class="o">=</span><span class="n">invite</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">invite</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">invite</span><span class="o">.</span><span class="n">code</span><span class="p">)</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">StringMapBuilder</span><span class="p">()</span>
        <span class="n">query</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;with_counts&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="n">query</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;with_expiration&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="n">query</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_invite</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch an existing invite.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>invite</strong> (typing.Union[<a href="../invites.html#InviteCode">hikari.invites.InviteCode</a>, str]):
The invite to fetch. This may be an invite object or
the code of an existing invite.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../invites.html#Invite">hikari.invites.Invite</a></strong>: The requested invite.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the invite is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.delete_invite" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.delete_invite">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">delete_invite</span><span class="signature">(
    self,
    invite: Union[<a href="../invites.html#InviteCode">hikari.invites.InviteCode</a>, str]
) -&gt; <a href="../invites.html#Invite">hikari.invites.Invite</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_invite</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">invite</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">invites</span><span class="o">.</span><span class="n">InviteCode</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">invites</span><span class="o">.</span><span class="n">Invite</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_INVITE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">invite_code</span><span class="o">=</span><span class="n">invite</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">invite</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">invite</span><span class="o">.</span><span class="n">code</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_invite</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Delete an existing invite.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>invite</strong> (typing.Union[<a href="../invites.html#InviteCode">hikari.invites.InviteCode</a>, str]):
The invite to delete. This may be an invite object or
the code of an existing invite.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../invites.html#Invite">hikari.invites.Invite</a></strong>: Object of the invite that was deleted.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>MANAGE_GUILD</code> permission in the guild
the invite is from or if you are missing the <code>MANAGE_CHANNELS</code>
permission in the channel the invite is from.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the invite is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_my_user" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_my_user">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_my_user</span><span class="signature">(self) -&gt; <a href="../users.html#OwnUser">hikari.users.OwnUser</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_my_user</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">users</span><span class="o">.</span><span class="n">OwnUser</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_MY_USER</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_my_user</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch the token's associated user.</p>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../users.html#OwnUser">hikari.users.OwnUser</a></strong>: The token's associated user.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.edit_my_user" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.edit_my_user">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">edit_my_user</span><span class="signature">(
    self,
    *,
    username: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    avatar: Union[<a href="../files.html#Resource">hikari.files.Resource</a>[Any], os.PathLike, str, bytes, bytearray, memoryview, _io.BytesIO, _io.StringIO, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>, NoneType] = UNDEFINED
) -&gt; <a href="../users.html#OwnUser">hikari.users.OwnUser</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_my_user</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">username</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">avatar</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">users</span><span class="o">.</span><span class="n">OwnUser</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_MY_USER</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;username&quot;</span><span class="p">,</span> <span class="n">username</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">avatar</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;avatar&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">avatar</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">avatar_resource</span> <span class="o">=</span> <span class="n">files</span><span class="o">.</span><span class="n">ensure_resource</span><span class="p">(</span><span class="n">avatar</span><span class="p">)</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">avatar_resource</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
                <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;avatar&quot;</span><span class="p">,</span> <span class="k">await</span> <span class="n">stream</span><span class="o">.</span><span class="n">data_uri</span><span class="p">())</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_my_user</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Edit the token's associated user.</p>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>username</strong> (undefined.UndefinedOr[str]):
If provided, the new username.</li>
<li><strong>avatar</strong> (undefined.UndefinedNoneOr[<a href="../files.html#Resourceish">hikari.files.Resourceish</a>]):
If provided, the new avatar. If <code>None</code>,
the avatar will be removed.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../users.html#OwnUser">hikari.users.OwnUser</a></strong>: The edited token's associated user.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If any of the fields that are passed have an invalid value.</li>
</ul>

<p>Discord also returns this on a rate limit:
<a href="https://github.com/discord/discord-api-docs/issues/1462">https://github.com/discord/discord-api-docs/issues/1462</a></p>

<ul>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_my_connections" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_my_connections">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_my_connections</span><span class="signature">(self) -&gt; Sequence[<a href="../applications.html#OwnConnection">hikari.applications.OwnConnection</a>]</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_my_connections</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">applications</span><span class="o">.</span><span class="n">OwnConnection</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_MY_CONNECTIONS</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_own_connection</span><span class="p">(</span><span class="n">connection_payload</span><span class="p">)</span> <span class="k">for</span> <span class="n">connection_payload</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch the token's associated connections.</p>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../applications.html#OwnConnection">hikari.applications.OwnConnection</a></strong>: The token's associated connections.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_my_guilds" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_my_guilds">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">fetch_my_guilds</span><span class="signature">(
    self,
    *,
    newest_first: bool = False,
    start_at: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int, datetime.datetime, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; <a href="../iterators.html#LazyIterator">hikari.iterators.LazyIterator</a>[<a href="../applications.html#OwnGuild">hikari.applications.OwnGuild</a>]</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">fetch_my_guilds</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">newest_first</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">start_at</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SearchableSnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">iterators</span><span class="o">.</span><span class="n">LazyIterator</span><span class="p">[</span><span class="n">applications</span><span class="o">.</span><span class="n">OwnGuild</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">start_at</span> <span class="ow">is</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">start_at</span> <span class="o">=</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="k">if</span> <span class="n">newest_first</span> <span class="k">else</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">start_at</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">):</span>
            <span class="n">start_at</span> <span class="o">=</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="o">.</span><span class="n">from_datetime</span><span class="p">(</span><span class="n">start_at</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">start_at</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">start_at</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">special_endpoints_impl</span><span class="o">.</span><span class="n">OwnGuildIterator</span><span class="p">(</span>
            <span class="n">entity_factory</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="p">,</span>
            <span class="n">request_call</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">,</span>
            <span class="n">newest_first</span><span class="o">=</span><span class="n">newest_first</span><span class="p">,</span>
            <span class="n">first_id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">start_at</span><span class="p">),</span>
        <span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch the token's associated guilds.</p>

<h6 id="notes">Notes</h6>

<p>This call is not a coroutine function, it returns a special type of
lazy iterator that will perform API calls as you iterate across it,
thus any errors documented below will happen then.</p>

<p>See <code><a href="../iterators.html">hikari.iterators</a></code> for the full API for this iterator type.</p>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>newest_first</strong> (bool):
Whether to fetch the newest first or the olders first.
Defaults to <code>False</code>.</li>
<li><strong>start_at</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../snowflakes.html#SearchableSnowflakeishOr">hikari.snowflakes.SearchableSnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]]):
If provided, will start at this snowflake. If you provide
a datetime object, it will be transformed into a snowflake. This
may also be a guild object. In this case, the
date the object was first created will be used.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../iterators.html#LazyIterator">hikari.iterators.LazyIterator</a>[<a href="../applications.html#OwnGuild">hikari.applications.OwnGuild</a>]</strong>: The token's associated guilds.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If any of the fields that are passed have an invalid value.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.leave_guild" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.leave_guild">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">leave_guild</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    /
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">leave_guild</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_MY_GUILD</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Leave a guild.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to leave. This may be the object or
the ID of an existing guild.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild is not found or you own the guild.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.create_dm_channel" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.create_dm_channel">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">create_dm_channel</span><span class="signature">(
    self,
    user: Union[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    /
) -&gt; <a href="../channels.html#DMChannel">hikari.channels.DMChannel</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_dm_channel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">channels_</span><span class="o">.</span><span class="n">DMChannel</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_MY_CHANNELS</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;recipient_id&quot;</span><span class="p">,</span> <span class="n">user</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="n">channel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_dm</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cache</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_cache</span><span class="o">.</span><span class="n">set_dm_channel_id</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">channel</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">channel</span>
</pre></div>

        </details>

            <div class="docstring"><p>Create a DM channel with a user.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>user</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>]):
The user to create the DM channel with. This may be the
object or the ID of an existing user.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../channels.html#DMChannel">hikari.channels.DMChannel</a></strong>: The created DM channel.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If the user is not found.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_application" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_application">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_application</span><span class="signature">(self) -&gt; <a href="../applications.html#Application">hikari.applications.Application</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_application</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">applications</span><span class="o">.</span><span class="n">Application</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_MY_APPLICATION</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_application</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch the token's associated application.</p>

<p><em>Warning:</em>
This endpoint can only be used with a Bot token. Using this with a
Bearer token will result in a <code><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></code>.</p>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../applications.html#Application">hikari.applications.Application</a></strong>: The token's associated application.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_authorization" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_authorization">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_authorization</span><span class="signature">(self) -&gt; <a href="../applications.html#AuthorizationInformation">hikari.applications.AuthorizationInformation</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_authorization</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">applications</span><span class="o">.</span><span class="n">AuthorizationInformation</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_MY_AUTHORIZATION</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_authorization_information</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch the token's authorization information.</p>

<p><em>Warning:</em>
This endpoint can only be used with a Bearer token. Using this
with a Bot token will result in a <code><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></code>.</p>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../applications.html#AuthorizationInformation">hikari.applications.AuthorizationInformation</a></strong>: The token's authorization information.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.authorize_client_credentials_token" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.authorize_client_credentials_token">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">authorize_client_credentials_token</span><span class="signature">(
    self,
    client: Union[<a href="../guilds.html#PartialApplication">hikari.guilds.PartialApplication</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    client_secret: str,
    scopes: Sequence[Union[<a href="../applications.html#OAuth2Scope">hikari.applications.OAuth2Scope</a>, str]]
) -&gt; <a href="../applications.html#PartialOAuth2Token">hikari.applications.PartialOAuth2Token</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">authorize_client_credentials_token</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">client</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">client_secret</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">scopes</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">applications</span><span class="o">.</span><span class="n">OAuth2Scope</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">applications</span><span class="o">.</span><span class="n">PartialOAuth2Token</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_TOKEN</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="n">form</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">URLEncodedFormBuilder</span><span class="p">()</span>
        <span class="n">form</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">&quot;grant_type&quot;</span><span class="p">,</span> <span class="s2">&quot;client_credentials&quot;</span><span class="p">)</span>
        <span class="n">form</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">&quot;scope&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">scopes</span><span class="p">))</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">form_builder</span><span class="o">=</span><span class="n">form</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_gen_oauth2_token</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">client_secret</span><span class="p">))</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_partial_token</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Authorize a client credentials token for an application.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>client</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialApplication">hikari.guilds.PartialApplication</a>]):
Object or ID of the application to authorize as.</li>
<li><strong>client_secret</strong> (str):
Secret of the application to authorize as.</li>
<li><strong>scopes</strong> (typing.Sequence[typing.Union[<a href="../applications.html#OAuth2Scope">hikari.applications.OAuth2Scope</a>, str]]):
The scopes to authorize for.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../applications.html#PartialOAuth2Token">hikari.applications.PartialOAuth2Token</a></strong>: Object of the authorized partial OAuth2 token.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If invalid any invalid or malformed scopes are passed.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: When an client or client secret is passed.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.authorize_access_token" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.authorize_access_token">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">authorize_access_token</span><span class="signature">(
    self,
    client: Union[<a href="../guilds.html#PartialApplication">hikari.guilds.PartialApplication</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    client_secret: str,
    code: str,
    redirect_uri: str
) -&gt; <a href="../applications.html#OAuth2AuthorizationToken">hikari.applications.OAuth2AuthorizationToken</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">authorize_access_token</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">client</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">client_secret</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">code</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">redirect_uri</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">applications</span><span class="o">.</span><span class="n">OAuth2AuthorizationToken</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_TOKEN</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="n">form</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">URLEncodedFormBuilder</span><span class="p">()</span>
        <span class="n">form</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">&quot;grant_type&quot;</span><span class="p">,</span> <span class="s2">&quot;authorization_code&quot;</span><span class="p">)</span>
        <span class="n">form</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">&quot;code&quot;</span><span class="p">,</span> <span class="n">code</span><span class="p">)</span>
        <span class="n">form</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">&quot;redirect_uri&quot;</span><span class="p">,</span> <span class="n">redirect_uri</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">form_builder</span><span class="o">=</span><span class="n">form</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_gen_oauth2_token</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">client_secret</span><span class="p">))</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_authorization_token</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Authorize an OAuth2 token using the authorize code grant type.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>client</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialApplication">hikari.guilds.PartialApplication</a>]):
Object or ID of the application to authorize with.</li>
<li><strong>client_secret</strong> (str):
Secret of the application to authorize with.</li>
<li><strong>code</strong> (str):
The authorization code to exchange for an OAuth2 access token.</li>
<li><strong>redirect_uri</strong> (str):
The redirect uri that was included in the authorization request.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../applications.html#OAuth2AuthorizationToken">hikari.applications.OAuth2AuthorizationToken</a></strong>: Object of the authorized OAuth2 token.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If an invalid redirect uri or code is passed.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: When an client or client secret is passed.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.refresh_access_token" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.refresh_access_token">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">refresh_access_token</span><span class="signature">(
    self,
    client: Union[<a href="../guilds.html#PartialApplication">hikari.guilds.PartialApplication</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    client_secret: str,
    refresh_token: str,
    *,
    scopes: Union[Sequence[Union[<a href="../applications.html#OAuth2Scope">hikari.applications.OAuth2Scope</a>, str]], <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; <a href="../applications.html#OAuth2AuthorizationToken">hikari.applications.OAuth2AuthorizationToken</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">refresh_access_token</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">client</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">client_secret</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">refresh_token</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">scopes</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">applications</span><span class="o">.</span><span class="n">OAuth2Scope</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">applications</span><span class="o">.</span><span class="n">OAuth2AuthorizationToken</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_TOKEN</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="n">form</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">URLEncodedFormBuilder</span><span class="p">()</span>
        <span class="n">form</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">&quot;grant_type&quot;</span><span class="p">,</span> <span class="s2">&quot;refresh_token&quot;</span><span class="p">)</span>
        <span class="n">form</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">&quot;refresh_token&quot;</span><span class="p">,</span> <span class="n">refresh_token</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">scopes</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">form</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">&quot;scope&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">scopes</span><span class="p">))</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">form_builder</span><span class="o">=</span><span class="n">form</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_gen_oauth2_token</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">client_secret</span><span class="p">))</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_authorization_token</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Refresh an access token.</p>

<p><em>Warning:</em>
As of writing this Discord currently ignores any passed scopes,
therefore you should use
<code><a href="../applications.html#OAuth2AuthorizationToken.scopes">hikari.applications.OAuth2AuthorizationToken.scopes</a></code> to validate
that the expected scopes were actually authorized here.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>client</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialApplication">hikari.guilds.PartialApplication</a>]):
Object or ID of the application to authorize with.</li>
<li><strong>client_secret</strong> (str):
Secret of the application to authorize with.</li>
<li><strong>refresh_token</strong> (str):
The refresh token to use.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>scopes</strong> (typing.Sequence[typing.Union[<a href="../applications.html#OAuth2Scope">hikari.applications.OAuth2Scope</a>, str]]):
The scope of the access request.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../applications.html#OAuth2AuthorizationToken">hikari.applications.OAuth2AuthorizationToken</a></strong>: Object of the authorized OAuth2 token.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If an invalid redirect uri or refresh_token is passed.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: When an client or client secret is passed.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.revoke_access_token" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.revoke_access_token">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">revoke_access_token</span><span class="signature">(
    self,
    client: Union[<a href="../guilds.html#PartialApplication">hikari.guilds.PartialApplication</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    client_secret: str,
    token: Union[str, <a href="../applications.html#PartialOAuth2Token">hikari.applications.PartialOAuth2Token</a>]
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">revoke_access_token</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">client</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">client_secret</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">token</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">applications</span><span class="o">.</span><span class="n">PartialOAuth2Token</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_TOKEN_REVOKE</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="n">form</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">URLEncodedFormBuilder</span><span class="p">()</span>
        <span class="n">form</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">&quot;token&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">token</span><span class="p">))</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">form_builder</span><span class="o">=</span><span class="n">form</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_gen_oauth2_token</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">client_secret</span><span class="p">))</span>
</pre></div>

        </details>

            <div class="docstring"><p>Revoke an OAuth2 token.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>client</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialApplication">hikari.guilds.PartialApplication</a>]):
Object or ID of the application to authorize with.</li>
<li><strong>client_secret</strong> (str):
Secret of the application to authorize with.</li>
<li><strong>token</strong> (typing.Union[str, <a href="../applications.html#PartialOAuth2Token">hikari.applications.PartialOAuth2Token</a>]):
Object or string of the access token to revoke.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: When an client or client secret is passed.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.add_user_to_guild" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.add_user_to_guild">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">add_user_to_guild</span><span class="signature">(
    self,
    access_token: Union[str, <a href="../applications.html#PartialOAuth2Token">hikari.applications.PartialOAuth2Token</a>],
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    user: Union[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    *,
    nick: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    roles: Union[Sequence[Union[<a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]], <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    mute: Union[bool, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    deaf: Union[bool, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; Union[<a href="../guilds.html#Member">hikari.guilds.Member</a>, NoneType]</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">add_user_to_guild</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">access_token</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">applications</span><span class="o">.</span><span class="n">PartialOAuth2Token</span><span class="p">],</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">nick</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">roles</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">mute</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">deaf</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">Member</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PUT_GUILD_MEMBER</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;access_token&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">access_token</span><span class="p">))</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;nick&quot;</span><span class="p">,</span> <span class="n">nick</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;mute&quot;</span><span class="p">,</span> <span class="n">mute</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;deaf&quot;</span><span class="p">,</span> <span class="n">deaf</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake_array</span><span class="p">(</span><span class="s2">&quot;roles&quot;</span><span class="p">,</span> <span class="n">roles</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">response</span> <span class="o">:=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_member</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># User already is in the guild.</span>
            <span class="k">return</span> <span class="kc">None</span>
</pre></div>

        </details>

            <div class="docstring"><p>Add a user to a guild.</p>

<p><em>Note:</em>
This requires the <code>access_token</code> to have the
<code><a href="../applications.html#OAuth2Scope.GUILDS_JOIN">hikari.applications.OAuth2Scope.GUILDS_JOIN</a></code> scope enabled along
with the authorization of a Bot which has <code>MANAGE_INVITES</code>
permission within the target guild.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>access_token</strong> (typing.Union[str, <a href="../applications.html#PartialOAuth2Token">hikari.applications.PartialOAuth2Token</a>]):
Object or string of the access token to use for this request.</li>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to add the user to. This may be the object
or the ID of an existing guild.</li>
<li><strong>user</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>]):
The user to add to the guild. This may be the object
or the ID of an existing user.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><p><strong>nick</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the nick to add to the user when he joins the guild.</p>

<p>Requires the <code>MANAGE_NICKNAMES</code> permission on the guild.</p></li>
<li><p><strong>roles</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../snowflakes.html#SnowflakeishSequence">hikari.snowflakes.SnowflakeishSequence</a>[<a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a>]]):
If provided, the roles to add to the user when he joins the guild.
This may be a collection objects or IDs of existing roles.</p>

<p>Requires the <code>MANAGE_ROLES</code> permission on the guild.</p></li>
<li><p><strong>mute</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[bool]):
If provided, the mute state to add the user when he joins the guild.</p>

<p>Requires the <code>MUTE_MEMBERS</code> permission on the guild.</p></li>
<li><p><strong>deaf</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[bool]):
If provided, the deaf state to add the user when he joins the guild.</p>

<p>Requires the <code>DEAFEN_MEMBERS</code> permission on the guild.</p></li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>typing.Optional[<a href="../guilds.html#Member">hikari.guilds.Member</a>]</strong>: <code>None</code> if the user was already part of the guild, else
<code><a href="../guilds.html#Member">hikari.guilds.Member</a></code>.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If any of the fields that are passed have an invalid value.</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are not part of the guild you want to add the user to,
if you are missing permissions to do one of the things you specified,
if you are using an access token for another user, if the token is
bound to another bot or if the access token doesn't have the
<code><a href="../applications.html#OAuth2Scope.GUILDS_JOIN">hikari.applications.OAuth2Scope.GUILDS_JOIN</a></code> scope enabled.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If you own the guild or the user is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_voice_regions" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_voice_regions">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_voice_regions</span><span class="signature">(self) -&gt; Sequence[<a href="../voices.html#VoiceRegion">hikari.voices.VoiceRegion</a>]</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_voice_regions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">voices</span><span class="o">.</span><span class="n">VoiceRegion</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_VOICE_REGIONS</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_voice_region</span><span class="p">(</span><span class="n">voice_region_payload</span><span class="p">)</span> <span class="k">for</span> <span class="n">voice_region_payload</span> <span class="ow">in</span> <span class="n">response</span>
        <span class="p">]</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch available voice regions.</p>

<p><em>Note:</em>
This endpoint doesn't return VIP voice regions.</p>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>typing.Sequence[<a href="../voices.html#VoiceRegion">hikari.voices.VoiceRegion</a>]</strong>: The available voice regions.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_user" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_user">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_user</span><span class="signature">(
    self,
    user: Union[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]
) -&gt; <a href="../users.html#User">hikari.users.User</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">users</span><span class="o">.</span><span class="n">User</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_USER</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_user</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch a user.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>user</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>]):
The user to fetch. This can be the object
or the ID of an existing user.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../users.html#User">hikari.users.User</a></strong>: The requested user</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the user is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_audit_log" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_audit_log">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">fetch_audit_log</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    *,
    before: Union[<a href="../snowflakes.html#Unique">hikari.snowflakes.Unique</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int, datetime.datetime, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    user: Union[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    event_type: Union[<a href="../audit_logs.html#AuditLogEventType">hikari.audit_logs.AuditLogEventType</a>, int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; <a href="../iterators.html#LazyIterator">hikari.iterators.LazyIterator</a>[<a href="../audit_logs.html#AuditLog">hikari.audit_logs.AuditLog</a>]</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">fetch_audit_log</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">before</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SearchableSnowflakeishOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Unique</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">event_type</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">audit_logs</span><span class="o">.</span><span class="n">AuditLogEventType</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">iterators</span><span class="o">.</span><span class="n">LazyIterator</span><span class="p">[</span><span class="n">audit_logs</span><span class="o">.</span><span class="n">AuditLog</span><span class="p">]:</span>

        <span class="n">timestamp</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">before</span> <span class="ow">is</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">timestamp</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">before</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">):</span>
            <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="o">.</span><span class="n">from_datetime</span><span class="p">(</span><span class="n">before</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">before</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">special_endpoints_impl</span><span class="o">.</span><span class="n">AuditLogIterator</span><span class="p">(</span>
            <span class="n">entity_factory</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="p">,</span>
            <span class="n">request_call</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">,</span>
            <span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span>
            <span class="n">before</span><span class="o">=</span><span class="n">timestamp</span><span class="p">,</span>
            <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">,</span>
            <span class="n">action_type</span><span class="o">=</span><span class="n">event_type</span><span class="p">,</span>
        <span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch the guild's audit log.</p>

<h6 id="notes">Notes</h6>

<p>This call is not a coroutine function, it returns a special type of
lazy iterator that will perform API calls as you iterate across it,
thus any errors documented below will happen then.</p>

<p>See <code><a href="../iterators.html">hikari.iterators</a></code> for the full API for this iterator type.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to fetch the audit logs from. This can be a
guild object or the ID of an existing guild.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>before</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../snowflakes.html#SearchableSnowflakeishOr">hikari.snowflakes.SearchableSnowflakeishOr</a>[<a href="../snowflakes.html#Unique">hikari.snowflakes.Unique</a>]]):
If provided, filter to only actions after this snowflake. If you provide
a datetime object, it will be transformed into a snowflake. This
may be any other Discord entity that has an ID. In this case, the
date the object was first created will be used.</li>
<li><strong>user</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>]]):
If provided, the user to filter for.</li>
<li><strong>event_type</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Union[<a href="../audit_logs.html#AuditLogEventType">hikari.audit_logs.AuditLogEventType</a>, int]]):
If provided, the event type to filter for.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../iterators.html#LazyIterator">hikari.iterators.LazyIterator</a>[<a href="../audit_logs.html#AuditLog">hikari.audit_logs.AuditLog</a>]</strong>: The guild's audit log.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If any of the fields that are passed have an invalid value.</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>VIEW_AUDIT_LOG</code> permission.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_emoji" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_emoji">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_emoji</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    emoji: Union[<a href="../emojis.html#CustomEmoji">hikari.emojis.CustomEmoji</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]
) -&gt; <a href="../emojis.html#KnownCustomEmoji">hikari.emojis.KnownCustomEmoji</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_emoji</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">emoji</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">emojis</span><span class="o">.</span><span class="n">CustomEmoji</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">emojis</span><span class="o">.</span><span class="n">KnownCustomEmoji</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_EMOJI</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">emoji</span><span class="o">=</span><span class="n">emoji</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_known_custom_emoji</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">))</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch a guild emoji.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to fetch the emoji from. This can be a
guild object or the ID of an existing guild.</li>
<li><strong>emoji</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../emojis.html#CustomEmoji">hikari.emojis.CustomEmoji</a>]):
The emoji to fetch. This can be a <code><a href="../emojis.html#CustomEmoji">hikari.emojis.CustomEmoji</a></code>
or the ID of an existing emoji.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../emojis.html#KnownCustomEmoji">hikari.emojis.KnownCustomEmoji</a></strong>: The requested emoji.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild or the emoji are not found.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_guild_emojis" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_guild_emojis">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_guild_emojis</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]
) -&gt; Sequence[<a href="../emojis.html#KnownCustomEmoji">hikari.emojis.KnownCustomEmoji</a>]</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_guild_emojis</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">emojis</span><span class="o">.</span><span class="n">KnownCustomEmoji</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_EMOJIS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="n">guild_id</span> <span class="o">=</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_known_custom_emoji</span><span class="p">(</span><span class="n">emoji_payload</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">guild_id</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">emoji_payload</span> <span class="ow">in</span> <span class="n">response</span>
        <span class="p">]</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch the emojis of a guild.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to fetch the emojis from. This can be a
guild object or the ID of an existing guild.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>typing.Sequence[<a href="../emojis.html#KnownCustomEmoji">hikari.emojis.KnownCustomEmoji</a>]</strong>: The requested emojis.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild is not found.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.create_emoji" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.create_emoji">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">create_emoji</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    name: str,
    image: Union[<a href="../files.html#Resource">hikari.files.Resource</a>[Any], os.PathLike, str, bytes, bytearray, memoryview, _io.BytesIO, _io.StringIO],
    *,
    roles: Union[Sequence[Union[<a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]], <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    reason: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; <a href="../emojis.html#KnownCustomEmoji">hikari.emojis.KnownCustomEmoji</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_emoji</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">image</span><span class="p">:</span> <span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">roles</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">emojis</span><span class="o">.</span><span class="n">KnownCustomEmoji</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_GUILD_EMOJIS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">image_resource</span> <span class="o">=</span> <span class="n">files</span><span class="o">.</span><span class="n">ensure_resource</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
        <span class="k">async</span> <span class="k">with</span> <span class="n">image_resource</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;image&quot;</span><span class="p">,</span> <span class="k">await</span> <span class="n">stream</span><span class="o">.</span><span class="n">data_uri</span><span class="p">())</span>

        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake_array</span><span class="p">(</span><span class="s2">&quot;roles&quot;</span><span class="p">,</span> <span class="n">roles</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_known_custom_emoji</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">))</span>
</pre></div>

        </details>

            <div class="docstring"><p>Create an emoji in a guild.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to create the emoji on. This can be a
guild object or the ID of an existing guild.</li>
<li><strong>name</strong> (str):
The name for the emoji.</li>
<li><strong>image</strong> (<a href="../files.html#Resourceish">hikari.files.Resourceish</a>):
The 128x128 image for the emoji. Maximum upload size is 256kb.
This can be a still or an animated image.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>roles</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../snowflakes.html#SnowflakeishSequence">hikari.snowflakes.SnowflakeishSequence</a>[<a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a>]]):
If provided, a collection of the roles that will be able to
use this emoji. This can be a <code><a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a></code> or
the ID of an existing role.</li>
<li><strong>reason</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the reason that will be recorded in the audit logs.
Maximum of 512 characters.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../emojis.html#KnownCustomEmoji">hikari.emojis.KnownCustomEmoji</a></strong>: The created emoji.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If any of the fields that are passed have an invalid value or
if there are no more spaces for the type of emoji in the guild.</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing <code>MANAGE_EMOJIS_AND_STICKERS</code> in the server.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild is not found.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.edit_emoji" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.edit_emoji">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">edit_emoji</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    emoji: Union[<a href="../emojis.html#CustomEmoji">hikari.emojis.CustomEmoji</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    *,
    name: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    roles: Union[Sequence[Union[<a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]], <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    reason: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; <a href="../emojis.html#KnownCustomEmoji">hikari.emojis.KnownCustomEmoji</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_emoji</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">emoji</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">emojis</span><span class="o">.</span><span class="n">CustomEmoji</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">roles</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">emojis</span><span class="o">.</span><span class="n">KnownCustomEmoji</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_GUILD_EMOJI</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">emoji</span><span class="o">=</span><span class="n">emoji</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake_array</span><span class="p">(</span><span class="s2">&quot;roles&quot;</span><span class="p">,</span> <span class="n">roles</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_known_custom_emoji</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">))</span>
</pre></div>

        </details>

            <div class="docstring"><p>Edit an emoji in a guild.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to edit the emoji on. This can be a
guild object or the ID of an existing guild.</li>
<li><strong>emoji</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../emojis.html#CustomEmoji">hikari.emojis.CustomEmoji</a>]):
The emoji to edit. This can be a <code><a href="../emojis.html#CustomEmoji">hikari.emojis.CustomEmoji</a></code>
or the ID of an existing emoji.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>name</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the new name for the emoji.</li>
<li><strong>roles</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../snowflakes.html#SnowflakeishSequence">hikari.snowflakes.SnowflakeishSequence</a>[<a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a>]]):
If provided, the new collection of roles that will be able to
use this emoji. This can be a <code><a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a></code> or
the ID of an existing role.</li>
<li><strong>reason</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the reason that will be recorded in the audit logs.
Maximum of 512 characters.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../emojis.html#KnownCustomEmoji">hikari.emojis.KnownCustomEmoji</a></strong>: The edited emoji.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If any of the fields that are passed have an invalid value.</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing <code>MANAGE_EMOJIS_AND_STICKERS</code> in the server.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild or the emoji are not found.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.delete_emoji" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.delete_emoji">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">delete_emoji</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    emoji: Union[<a href="../emojis.html#CustomEmoji">hikari.emojis.CustomEmoji</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    *,
    reason: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_emoji</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">emoji</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">emojis</span><span class="o">.</span><span class="n">CustomEmoji</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_GUILD_EMOJI</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">emoji</span><span class="o">=</span><span class="n">emoji</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Delete an emoji in a guild.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to delete the emoji on. This can be a guild object or the
ID of an existing guild.</li>
<li><strong>emoji</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../emojis.html#CustomEmoji">hikari.emojis.CustomEmoji</a>]):
The emoji to delete. This can be a <code><a href="../emojis.html#CustomEmoji">hikari.emojis.CustomEmoji</a></code>
or the ID of an existing emoji.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>reason</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the reason that will be recorded in the audit logs.
Maximum of 512 characters.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing <code>MANAGE_EMOJIS_AND_STICKERS</code> in the server.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild or the emoji are not found.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_available_sticker_packs" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_available_sticker_packs">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_available_sticker_packs</span><span class="signature">(self) -&gt; Sequence[<a href="../stickers.html#StickerPack">hikari.stickers.StickerPack</a>]</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_available_sticker_packs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">stickers</span><span class="o">.</span><span class="n">StickerPack</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_STICKER_PACKS</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">no_auth</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_sticker_pack</span><span class="p">(</span><span class="n">sticker_pack_payload</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">sticker_pack_payload</span> <span class="ow">in</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;sticker_packs&quot;</span><span class="p">]</span>
        <span class="p">]</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch the available sticker packs.</p>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>typing.Sequence[<a href="../stickers.html#StickerPack">hikari.stickers.StickerPack</a>]</strong>: The available sticker packs.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_sticker" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_sticker">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_sticker</span><span class="signature">(
    self,
    sticker: Union[<a href="../stickers.html#PartialSticker">hikari.stickers.PartialSticker</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]
) -&gt; Union[<a href="../stickers.html#StandardSticker">hikari.stickers.StandardSticker</a>, <a href="../stickers.html#GuildSticker">hikari.stickers.GuildSticker</a>]</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_sticker</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">sticker</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">stickers</span><span class="o">.</span><span class="n">PartialSticker</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">stickers</span><span class="o">.</span><span class="n">StandardSticker</span><span class="p">,</span> <span class="n">stickers</span><span class="o">.</span><span class="n">GuildSticker</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_STICKER</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">sticker</span><span class="o">=</span><span class="n">sticker</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_guild_sticker</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
            <span class="k">if</span> <span class="s2">&quot;guild_id&quot;</span> <span class="ow">in</span> <span class="n">response</span>
            <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_standard_sticker</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch a sticker.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>sticker</strong> (snowflakes.SnowflakeishOr[stickers.PartialSticker]):
The sticker to fetch. This can be a sticker object or the
ID of an existing sticker.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>typing.Union[<a href="../stickers.html#GuildSticker">hikari.stickers.GuildSticker</a>, <a href="../stickers.html#StandardSticker">hikari.stickers.StandardSticker</a>]</strong>: The requested sticker.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the sticker is not found.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_guild_stickers" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_guild_stickers">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_guild_stickers</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]
) -&gt; Sequence[<a href="../stickers.html#GuildSticker">hikari.stickers.GuildSticker</a>]</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_guild_stickers</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">stickers</span><span class="o">.</span><span class="n">GuildSticker</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_STICKERS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_guild_sticker</span><span class="p">(</span><span class="n">guild_sticker_payload</span><span class="p">)</span> <span class="k">for</span> <span class="n">guild_sticker_payload</span> <span class="ow">in</span> <span class="n">response</span>
        <span class="p">]</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch a standard sticker.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (snowflakes.SnowflakeishOr[stickers.PartialGuild]):
The guild to request stickers for. This can be a guild object or the
ID of an existing guild.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>typing.Sequence[<a href="../stickers.html#GuildSticker">hikari.stickers.GuildSticker</a>]</strong>: The requested stickers.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are not part of the server.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild is not found.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_guild_sticker" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_guild_sticker">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_guild_sticker</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    sticker: Union[<a href="../stickers.html#PartialSticker">hikari.stickers.PartialSticker</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]
) -&gt; <a href="../stickers.html#GuildSticker">hikari.stickers.GuildSticker</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_guild_sticker</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">sticker</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">stickers</span><span class="o">.</span><span class="n">PartialSticker</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">stickers</span><span class="o">.</span><span class="n">GuildSticker</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_STICKER</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">sticker</span><span class="o">=</span><span class="n">sticker</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_guild_sticker</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch a guild sticker.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (snowflakes.SnowflakeishOr[stickers.PartialGuild]):
The guild the sticker is in. This can be a guild object or the
ID of an existing guild.</li>
<li><strong>sticker</strong> (snowflakes.SnowflakeishOr[stickers.PartialSticker]):
The sticker to fetch. This can be a sticker object or the
ID of an existing sticker.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../stickers.html#GuildSticker">hikari.stickers.GuildSticker</a></strong>: The requested sticker.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are not part of the server.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild or the sticker are not found.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.create_sticker" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.create_sticker">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">create_sticker</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    name: str,
    tag: str,
    image: Union[<a href="../files.html#Resource">hikari.files.Resource</a>[Any], os.PathLike, str, bytes, bytearray, memoryview, _io.BytesIO, _io.StringIO],
    *,
    description: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    reason: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; <a href="../stickers.html#GuildSticker">hikari.stickers.GuildSticker</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_sticker</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">tag</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">image</span><span class="p">:</span> <span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">stickers</span><span class="o">.</span><span class="n">GuildSticker</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_GUILD_STICKERS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">form</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">URLEncodedFormBuilder</span><span class="p">(</span><span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">)</span>
        <span class="n">form</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">form</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">&quot;tags&quot;</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
        <span class="n">form</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="n">description</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="n">form</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="s2">&quot;file&quot;</span><span class="p">,</span> <span class="n">files</span><span class="o">.</span><span class="n">ensure_resource</span><span class="p">(</span><span class="n">image</span><span class="p">))</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">form_builder</span><span class="o">=</span><span class="n">form</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_guild_sticker</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Create a sticker in a guild.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to create the sticker on. This can be a guild object or the
ID of an existing guild.</li>
<li><strong>name</strong> (str):
The name for the sticker.</li>
<li><strong>tag</strong> (str):
The tag for the sticker.</li>
<li><p><strong>image</strong> (<a href="../files.html#Resourceish">hikari.files.Resourceish</a>):
The 320x320 image for the sticker. Maximum upload size is 500kb.
This can be a still or an animated PNG or a Lottie.</p>

<p><em>Note:</em>
Lottie support is only available for verified and partnered
servers.</p></li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>description</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the description of the sticker.</li>
<li><strong>reason</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the reason that will be recorded in the audit logs.
Maximum of 512 characters.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../stickers.html#GuildSticker">hikari.stickers.GuildSticker</a></strong>: The created sticker.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If any of the fields that are passed have an invalid value or
if there are no more spaces for the sticker in the guild.</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing <code>MANAGE_EMOJIS_AND_STICKERS</code> in the server.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild is not found.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.edit_sticker" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.edit_sticker">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">edit_sticker</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    sticker: Union[<a href="../stickers.html#PartialSticker">hikari.stickers.PartialSticker</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    *,
    name: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    description: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    tag: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    reason: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; <a href="../stickers.html#GuildSticker">hikari.stickers.GuildSticker</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_sticker</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">sticker</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">stickers</span><span class="o">.</span><span class="n">PartialSticker</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">tag</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">stickers</span><span class="o">.</span><span class="n">GuildSticker</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_GUILD_STICKER</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">sticker</span><span class="o">=</span><span class="n">sticker</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;tags&quot;</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="n">description</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_guild_sticker</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Edit a sticker in a guild.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to edit the sticker on. This can be a guild object or the
ID of an existing guild.</li>
<li><strong>sticker</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../stickers.html#PartialSticker">hikari.stickers.PartialSticker</a>]):
The sticker to edit. This can be a sticker object or the ID of an
existing sticker.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>name</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the new name for the sticker.</li>
<li><strong>description</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the new description for the sticker.</li>
<li><strong>tag</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the new sticker tag.</li>
<li><strong>reason</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the reason that will be recorded in the audit logs.
Maximum of 512 characters.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../stickers.html#GuildSticker">hikari.stickers.GuildSticker</a></strong>: The edited sticker.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If any of the fields that are passed have an invalid value.</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing <code>MANAGE_EMOJIS_AND_STICKERS</code> in the server.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild or the sticker are not found.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.delete_sticker" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.delete_sticker">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">delete_sticker</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    sticker: Union[<a href="../stickers.html#PartialSticker">hikari.stickers.PartialSticker</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    *,
    reason: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_sticker</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">sticker</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">stickers</span><span class="o">.</span><span class="n">PartialSticker</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_GUILD_STICKER</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">sticker</span><span class="o">=</span><span class="n">sticker</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Delete a sticker in a guild.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to delete the sticker on. This can be a guild object or
the ID of an existing guild.</li>
<li><strong>sticker</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../stickers.html#PartialSticker">hikari.stickers.PartialSticker</a>]):
The sticker to delete. This can be a sticker object or the ID
of an existing sticker.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>reason</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the reason that will be recorded in the audit logs.
Maximum of 512 characters.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing <code>MANAGE_EMOJIS_AND_STICKERS</code> in the server.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild or the sticker are not found.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.guild_builder" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.guild_builder">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">guild_builder</span><span class="signature">(self, name: str, /) -&gt; <a href="../api/special_endpoints.html#GuildBuilder">hikari.api.special_endpoints.GuildBuilder</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">guild_builder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">special_endpoints</span><span class="o">.</span><span class="n">GuildBuilder</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">special_endpoints_impl</span><span class="o">.</span><span class="n">GuildBuilder</span><span class="p">(</span>
            <span class="n">entity_factory</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="p">,</span> <span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">,</span> <span class="n">request_call</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span>
        <span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Make a guild builder to create a guild with.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>name</strong> (str):
The new guilds name.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../api/special_endpoints.html#GuildBuilder">hikari.api.special_endpoints.GuildBuilder</a></strong>: The guild builder to use. This will allow to create a guild
later with <code><a href="../api/special_endpoints.html#GuildBuilder.create">hikari.api.special_endpoints.GuildBuilder.create</a></code>.</li>
<li><p><strong><em>Note</strong> (</em>):</p></li>
<li><p><strong>This endpoint can only be used by bots in less than 10 guilds.</strong></p></li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If any of the fields that are passed have an invalid value or if you
call this as a bot that's in more than 10 guilds.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
<li><p><strong><em>Note</strong> (</em>):</p></li>
<li><p><strong>The exceptions on this endpoint will only be raised once</strong></p></li>
<li><strong><code><a href="../api/special_endpoints.html#GuildBuilder.create">hikari.api.special_endpoints.GuildBuilder.create</a></code> is called.</strong></li>
<li><strong>Invoking this function itself will not raise any of</strong></li>
<li><strong>the above types.</strong></li>
</ul>

<h6 id="see-also">See Also</h6>

<p><code><a href="../api/special_endpoints.html#GuildBuilder">hikari.api.special_endpoints.GuildBuilder</a></code>  </p>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_guild" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_guild">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_guild</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]
) -&gt; <a href="../guilds.html#RESTGuild">hikari.guilds.RESTGuild</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_guild</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">guilds</span><span class="o">.</span><span class="n">RESTGuild</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">StringMapBuilder</span><span class="p">()</span>
        <span class="n">query</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;with_counts&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="n">query</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_rest_guild</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch a guild.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to fetch. This can be the object
or the ID of an existing guild.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../guilds.html#RESTGuild">hikari.guilds.RESTGuild</a></strong>: The requested guild.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are not part of the guild.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild is not found.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_guild_preview" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_guild_preview">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_guild_preview</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]
) -&gt; <a href="../guilds.html#GuildPreview">hikari.guilds.GuildPreview</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_guild_preview</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">guilds</span><span class="o">.</span><span class="n">GuildPreview</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_PREVIEW</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_guild_preview</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch a guild preview.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to fetch the preview of. This can be a
guild object or the ID of an existing guild.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../guilds.html#GuildPreview">hikari.guilds.GuildPreview</a></strong>: The requested guild preview.</li>
<li><p><strong><em>Note</strong> (</em>):</p></li>
<li><p><strong>This will only work for guilds you are a part of or are public.</strong></p></li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild is not found or you are not part of the guild.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.edit_guild" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.edit_guild">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">edit_guild</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    *,
    name: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    verification_level: Union[<a href="../guilds.html#GuildVerificationLevel">hikari.guilds.GuildVerificationLevel</a>, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    default_message_notifications: Union[<a href="../guilds.html#GuildMessageNotificationsLevel">hikari.guilds.GuildMessageNotificationsLevel</a>, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    explicit_content_filter_level: Union[<a href="../guilds.html#GuildExplicitContentFilterLevel">hikari.guilds.GuildExplicitContentFilterLevel</a>, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    afk_channel: Union[<a href="../channels.html#GuildVoiceChannel">hikari.channels.GuildVoiceChannel</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    afk_timeout: Union[int, float, datetime.timedelta, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    icon: Union[<a href="../files.html#Resource">hikari.files.Resource</a>[Any], os.PathLike, str, bytes, bytearray, memoryview, _io.BytesIO, _io.StringIO, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>, NoneType] = UNDEFINED,
    owner: Union[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    splash: Union[<a href="../files.html#Resource">hikari.files.Resource</a>[Any], os.PathLike, str, bytes, bytearray, memoryview, _io.BytesIO, _io.StringIO, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>, NoneType] = UNDEFINED,
    banner: Union[<a href="../files.html#Resource">hikari.files.Resource</a>[Any], os.PathLike, str, bytes, bytearray, memoryview, _io.BytesIO, _io.StringIO, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>, NoneType] = UNDEFINED,
    system_channel: Union[<a href="../channels.html#GuildTextChannel">hikari.channels.GuildTextChannel</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>, NoneType] = UNDEFINED,
    rules_channel: Union[<a href="../channels.html#GuildTextChannel">hikari.channels.GuildTextChannel</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>, NoneType] = UNDEFINED,
    public_updates_channel: Union[<a href="../channels.html#GuildTextChannel">hikari.channels.GuildTextChannel</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>, NoneType] = UNDEFINED,
    preferred_locale: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    reason: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; <a href="../guilds.html#RESTGuild">hikari.guilds.RESTGuild</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_guild</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">verification_level</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">GuildVerificationLevel</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">default_message_notifications</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">guilds</span><span class="o">.</span><span class="n">GuildMessageNotificationsLevel</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">explicit_content_filter_level</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">guilds</span><span class="o">.</span><span class="n">GuildExplicitContentFilterLevel</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">afk_channel</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildVoiceChannel</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">afk_timeout</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">time</span><span class="o">.</span><span class="n">Intervalish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">icon</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">owner</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">splash</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">banner</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">system_channel</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span>
            <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildTextChannel</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">rules_channel</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span>
            <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildTextChannel</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">public_updates_channel</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span>
            <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildTextChannel</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">preferred_locale</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">guilds</span><span class="o">.</span><span class="n">RESTGuild</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_GUILD</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;verification_level&quot;</span><span class="p">,</span> <span class="n">verification_level</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;default_message_notifications&quot;</span><span class="p">,</span> <span class="n">default_message_notifications</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;explicit_content_filter&quot;</span><span class="p">,</span> <span class="n">explicit_content_filter_level</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;afk_timeout&quot;</span><span class="p">,</span> <span class="n">afk_timeout</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">timespan_to_int</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;preferred_locale&quot;</span><span class="p">,</span> <span class="n">preferred_locale</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;afk_channel_id&quot;</span><span class="p">,</span> <span class="n">afk_channel</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;owner_id&quot;</span><span class="p">,</span> <span class="n">owner</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;system_channel_id&quot;</span><span class="p">,</span> <span class="n">system_channel</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;rules_channel_id&quot;</span><span class="p">,</span> <span class="n">rules_channel</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;public_updates_channel_id&quot;</span><span class="p">,</span> <span class="n">public_updates_channel</span><span class="p">)</span>

        <span class="n">tasks</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">asyncio</span><span class="o">.</span><span class="n">Task</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="n">icon</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;icon&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">icon</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">icon_resource</span> <span class="o">=</span> <span class="n">files</span><span class="o">.</span><span class="n">ensure_resource</span><span class="p">(</span><span class="n">icon</span><span class="p">)</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">icon_resource</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
                <span class="n">task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">stream</span><span class="o">.</span><span class="n">data_uri</span><span class="p">())</span>
                <span class="n">task</span><span class="o">.</span><span class="n">add_done_callback</span><span class="p">(</span><span class="k">lambda</span> <span class="n">future</span><span class="p">:</span> <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;icon&quot;</span><span class="p">,</span> <span class="n">future</span><span class="o">.</span><span class="n">result</span><span class="p">()))</span>
                <span class="n">tasks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">splash</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;splash&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">splash</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">splash_resource</span> <span class="o">=</span> <span class="n">files</span><span class="o">.</span><span class="n">ensure_resource</span><span class="p">(</span><span class="n">splash</span><span class="p">)</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">splash_resource</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
                <span class="n">task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">stream</span><span class="o">.</span><span class="n">data_uri</span><span class="p">())</span>
                <span class="n">task</span><span class="o">.</span><span class="n">add_done_callback</span><span class="p">(</span><span class="k">lambda</span> <span class="n">future</span><span class="p">:</span> <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;splash&quot;</span><span class="p">,</span> <span class="n">future</span><span class="o">.</span><span class="n">result</span><span class="p">()))</span>
                <span class="n">tasks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">banner</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;banner&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">banner</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">banner_resource</span> <span class="o">=</span> <span class="n">files</span><span class="o">.</span><span class="n">ensure_resource</span><span class="p">(</span><span class="n">banner</span><span class="p">)</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">banner_resource</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
                <span class="n">task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">stream</span><span class="o">.</span><span class="n">data_uri</span><span class="p">())</span>
                <span class="n">task</span><span class="o">.</span><span class="n">add_done_callback</span><span class="p">(</span><span class="k">lambda</span> <span class="n">future</span><span class="p">:</span> <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;banner&quot;</span><span class="p">,</span> <span class="n">future</span><span class="o">.</span><span class="n">result</span><span class="p">()))</span>
                <span class="n">tasks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>

        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span><span class="o">*</span><span class="n">tasks</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_rest_guild</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Edit a guild.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to edit. This may be the object
or the ID of an existing guild.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>name</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the new name for the guild.</li>
<li><strong>verification_level</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../guilds.html#GuildVerificationLevel">hikari.guilds.GuildVerificationLevel</a>]):
If provided, the new verification level.</li>
<li><strong>default_message_notifications</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../guilds.html#GuildMessageNotificationsLevel">hikari.guilds.GuildMessageNotificationsLevel</a>]):
If provided, the new default message notifications level.</li>
<li><strong>explicit_content_filter_level</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../guilds.html#GuildExplicitContentFilterLevel">hikari.guilds.GuildExplicitContentFilterLevel</a>]):
If provided, the new explicit content filter level.</li>
<li><strong>afk_channel</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#GuildVoiceChannel">hikari.channels.GuildVoiceChannel</a>]]):
If provided, the new afk channel. Requires <code>afk_timeout</code> to
be set to work.</li>
<li><strong>afk_timeout</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../internal/time.html#Intervalish">hikari.internal.time.Intervalish</a>]):
If provided, the new afk timeout.</li>
<li><strong>icon</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../files.html#Resourceish">hikari.files.Resourceish</a>]):
If provided, the new guild icon. Must be a 1024x1024 image or can be
an animated gif when the guild has the <code>ANIMATED_ICON</code> feature.</li>
<li><p><strong>owner</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>]]]):
If provided, the new guild owner.</p>

<p><em>Warning:</em>
You need to be the owner of the server to use this.</p></li>
<li><strong>splash</strong> (<a href="../undefined.html#UndefinedNoneOr">hikari.undefined.UndefinedNoneOr</a>[<a href="../files.html#Resourceish">hikari.files.Resourceish</a>]):
If provided, the new guild splash. Must be a 16:9 image and the
guild must have the <code>INVITE_SPLASH</code> feature.</li>
<li><strong>banner</strong> (<a href="../undefined.html#UndefinedNoneOr">hikari.undefined.UndefinedNoneOr</a>[<a href="../files.html#Resourceish">hikari.files.Resourceish</a>]):
If provided, the new guild banner. Must be a 16:9 image and the
guild must have the <code>BANNER</code> feature.</li>
<li><strong>system_channel</strong> (<a href="../undefined.html#UndefinedNoneOr">hikari.undefined.UndefinedNoneOr</a>[<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#GuildTextChannel">hikari.channels.GuildTextChannel</a>]]):
If provided, the new system channel.</li>
<li><strong>rules_channel</strong> (<a href="../undefined.html#UndefinedNoneOr">hikari.undefined.UndefinedNoneOr</a>[<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#GuildTextChannel">hikari.channels.GuildTextChannel</a>]]):
If provided, the new rules channel.</li>
<li><strong>public_updates_channel</strong> (<a href="../undefined.html#UndefinedNoneOr">hikari.undefined.UndefinedNoneOr</a>[<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#GuildTextChannel">hikari.channels.GuildTextChannel</a>]]):
If provided, the new public updates channel.</li>
<li><strong>preferred_locale</strong> (<a href="../undefined.html#UndefinedNoneOr">hikari.undefined.UndefinedNoneOr</a>[str]):
If provided, the new preferred locale.</li>
<li><strong>reason</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the reason that will be recorded in the audit logs.
Maximum of 512 characters.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../guilds.html#RESTGuild">hikari.guilds.RESTGuild</a></strong>: The edited guild.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If any of the fields that are passed have an invalid value. Or
you are missing the</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>MANAGE_GUILD</code> permission or if you tried to
pass ownership without being the server owner.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.delete_guild" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.delete_guild">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">delete_guild</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_guild</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_GUILD</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Delete a guild.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to delete. This may be the object or
the ID of an existing guild.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are not the owner of the guild.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If you own the guild or if you are not in it.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_guild_channels" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_guild_channels">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_guild_channels</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]
) -&gt; Sequence[<a href="../channels.html#GuildChannel">hikari.channels.GuildChannel</a>]</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_guild_channels</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildChannel</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_CHANNELS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="n">channel_sequence</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_channel</span><span class="p">(</span><span class="n">channel_payload</span><span class="p">)</span> <span class="k">for</span> <span class="n">channel_payload</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>
        <span class="c1"># Will always be guild channels unless Discord messes up severely on something!</span>
        <span class="k">return</span> <span class="n">typing</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="s2">&quot;typing.Sequence[channels_.GuildChannel]&quot;</span><span class="p">,</span> <span class="n">channel_sequence</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch the channels in a guild.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to fetch the channels from. This may be the
object or the ID of an existing guild.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>typing.Sequence[<a href="../channels.html#GuildChannel">hikari.channels.GuildChannel</a>]</strong>: The requested channels.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.create_guild_text_channel" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.create_guild_text_channel">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">create_guild_text_channel</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    name: str,
    *,
    position: Union[int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    topic: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    nsfw: Union[bool, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    rate_limit_per_user: Union[int, float, datetime.timedelta, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    permission_overwrites: Union[Sequence[<a href="../channels.html#PermissionOverwrite">hikari.channels.PermissionOverwrite</a>], <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    category: Union[<a href="../channels.html#GuildCategory">hikari.channels.GuildCategory</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    reason: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; <a href="../channels.html#GuildTextChannel">hikari.channels.GuildTextChannel</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_guild_text_channel</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">topic</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">nsfw</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">rate_limit_per_user</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">time</span><span class="o">.</span><span class="n">Intervalish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">permission_overwrites</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">PermissionOverwrite</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">category</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildCategory</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">channels_</span><span class="o">.</span><span class="n">GuildTextChannel</span><span class="p">:</span>
        <span class="n">channel</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_guild_channel</span><span class="p">(</span>
            <span class="n">guild</span><span class="p">,</span>
            <span class="n">name</span><span class="p">,</span>
            <span class="n">channels_</span><span class="o">.</span><span class="n">ChannelType</span><span class="o">.</span><span class="n">GUILD_TEXT</span><span class="p">,</span>
            <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
            <span class="n">topic</span><span class="o">=</span><span class="n">topic</span><span class="p">,</span>
            <span class="n">nsfw</span><span class="o">=</span><span class="n">nsfw</span><span class="p">,</span>
            <span class="n">rate_limit_per_user</span><span class="o">=</span><span class="n">rate_limit_per_user</span><span class="p">,</span>
            <span class="n">permission_overwrites</span><span class="o">=</span><span class="n">permission_overwrites</span><span class="p">,</span>
            <span class="n">category</span><span class="o">=</span><span class="n">category</span><span class="p">,</span>
            <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">channels_</span><span class="o">.</span><span class="n">GuildTextChannel</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">channel</span>
</pre></div>

        </details>

            <div class="docstring"><p>Create a text channel in a guild.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to create the channel in. This may be the
object or the ID of an existing guild.</li>
<li><strong>name</strong> (str):
The channels name. Must be between 2 and 1000 characters.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>position</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[int]):
If provided, the position of the channel (relative to the
category, if any).</li>
<li><strong>topic</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the channels topic. Maximum 1024 characters.</li>
<li><strong>nsfw</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[bool]):
If provided, whether to mark the channel as NSFW.</li>
<li><strong>rate_limit_per_user</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../internal/time.html#Intervalish">hikari.internal.time.Intervalish</a>]):
If provided, the amount of seconds a user has to wait
before being able to send another message in the channel.
Maximum 21600 seconds.</li>
<li><strong>permission_overwrites</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Sequence[<a href="../channels.html#PermissionOverwrite">hikari.channels.PermissionOverwrite</a>]]):
If provided, the permission overwrites for the channel.</li>
<li><strong>category</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#GuildCategory">hikari.channels.GuildCategory</a>]]):
The category to create the channel under. This may be the
object or the ID of an existing category.</li>
<li><strong>reason</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the reason that will be recorded in the audit logs.
Maximum of 512 characters.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../channels.html#GuildTextChannel">hikari.channels.GuildTextChannel</a></strong>: The created channel.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If any of the fields that are passed have an invalid value.</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>MANAGE_CHANNEL</code> permission.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.create_guild_news_channel" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.create_guild_news_channel">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">create_guild_news_channel</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    name: str,
    *,
    position: Union[int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    topic: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    nsfw: Union[bool, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    rate_limit_per_user: Union[int, float, datetime.timedelta, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    permission_overwrites: Union[Sequence[<a href="../channels.html#PermissionOverwrite">hikari.channels.PermissionOverwrite</a>], <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    category: Union[<a href="../channels.html#GuildCategory">hikari.channels.GuildCategory</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    reason: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; <a href="../channels.html#GuildNewsChannel">hikari.channels.GuildNewsChannel</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_guild_news_channel</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">topic</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">nsfw</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">rate_limit_per_user</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">time</span><span class="o">.</span><span class="n">Intervalish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">permission_overwrites</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">PermissionOverwrite</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">category</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildCategory</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">channels_</span><span class="o">.</span><span class="n">GuildNewsChannel</span><span class="p">:</span>
        <span class="n">channel</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_guild_channel</span><span class="p">(</span>
            <span class="n">guild</span><span class="p">,</span>
            <span class="n">name</span><span class="p">,</span>
            <span class="n">channels_</span><span class="o">.</span><span class="n">ChannelType</span><span class="o">.</span><span class="n">GUILD_NEWS</span><span class="p">,</span>
            <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
            <span class="n">topic</span><span class="o">=</span><span class="n">topic</span><span class="p">,</span>
            <span class="n">nsfw</span><span class="o">=</span><span class="n">nsfw</span><span class="p">,</span>
            <span class="n">rate_limit_per_user</span><span class="o">=</span><span class="n">rate_limit_per_user</span><span class="p">,</span>
            <span class="n">permission_overwrites</span><span class="o">=</span><span class="n">permission_overwrites</span><span class="p">,</span>
            <span class="n">category</span><span class="o">=</span><span class="n">category</span><span class="p">,</span>
            <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">channels_</span><span class="o">.</span><span class="n">GuildNewsChannel</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">channel</span>
</pre></div>

        </details>

            <div class="docstring"><p>Create a news channel in a guild.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to create the channel in. This may be the
object or the ID of an existing guild.</li>
<li><strong>name</strong> (str):
The channels name. Must be between 2 and 1000 characters.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>position</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[int]):
If provided, the position of the channel (relative to the
category, if any).</li>
<li><strong>topic</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the channels topic. Maximum 1024 characters.</li>
<li><strong>nsfw</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[bool]):
If provided, whether to mark the channel as NSFW.</li>
<li><strong>rate_limit_per_user</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../internal/time.html#Intervalish">hikari.internal.time.Intervalish</a>]):
If provided, the amount of seconds a user has to wait
before being able to send another message in the channel.
Maximum 21600 seconds.</li>
<li><strong>permission_overwrites</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Sequence[<a href="../channels.html#PermissionOverwrite">hikari.channels.PermissionOverwrite</a>]]):
If provided, the permission overwrites for the channel.</li>
<li><strong>category</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#GuildCategory">hikari.channels.GuildCategory</a>]]):
The category to create the channel under. This may be the
object or the ID of an existing category.</li>
<li><strong>reason</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the reason that will be recorded in the audit logs.
Maximum of 512 characters.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../channels.html#GuildNewsChannel">hikari.channels.GuildNewsChannel</a></strong>: The created channel.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If any of the fields that are passed have an invalid value.</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>MANAGE_CHANNEL</code> permission.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.create_guild_voice_channel" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.create_guild_voice_channel">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">create_guild_voice_channel</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    name: str,
    *,
    position: Union[int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    user_limit: Union[int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    bitrate: Union[int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    video_quality_mode: Union[<a href="../channels.html#VideoQualityMode">hikari.channels.VideoQualityMode</a>, int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    permission_overwrites: Union[Sequence[<a href="../channels.html#PermissionOverwrite">hikari.channels.PermissionOverwrite</a>], <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    region: Union[str, <a href="../voices.html#VoiceRegion">hikari.voices.VoiceRegion</a>, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    category: Union[<a href="../channels.html#GuildCategory">hikari.channels.GuildCategory</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    reason: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; <a href="../channels.html#GuildVoiceChannel">hikari.channels.GuildVoiceChannel</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_guild_voice_channel</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">user_limit</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">bitrate</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">video_quality_mode</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">VideoQualityMode</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">permission_overwrites</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">PermissionOverwrite</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">region</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">voices</span><span class="o">.</span><span class="n">VoiceRegion</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">category</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildCategory</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">channels_</span><span class="o">.</span><span class="n">GuildVoiceChannel</span><span class="p">:</span>
        <span class="n">channel</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_guild_channel</span><span class="p">(</span>
            <span class="n">guild</span><span class="p">,</span>
            <span class="n">name</span><span class="p">,</span>
            <span class="n">channels_</span><span class="o">.</span><span class="n">ChannelType</span><span class="o">.</span><span class="n">GUILD_VOICE</span><span class="p">,</span>
            <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
            <span class="n">user_limit</span><span class="o">=</span><span class="n">user_limit</span><span class="p">,</span>
            <span class="n">bitrate</span><span class="o">=</span><span class="n">bitrate</span><span class="p">,</span>
            <span class="n">video_quality_mode</span><span class="o">=</span><span class="n">video_quality_mode</span><span class="p">,</span>
            <span class="n">permission_overwrites</span><span class="o">=</span><span class="n">permission_overwrites</span><span class="p">,</span>
            <span class="n">region</span><span class="o">=</span><span class="n">region</span><span class="p">,</span>
            <span class="n">category</span><span class="o">=</span><span class="n">category</span><span class="p">,</span>
            <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">channels_</span><span class="o">.</span><span class="n">GuildVoiceChannel</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">channel</span>
</pre></div>

        </details>

            <div class="docstring"><p>Create a voice channel in a guild.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to create the channel in. This may be the
object or the ID of an existing guild.</li>
<li><strong>name</strong> (str):
The channels name. Must be between 2 and 1000 characters.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>position</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[int]):
If provided, the position of the channel (relative to the
category, if any).</li>
<li><strong>user_limit</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[int]):
If provided, the maximum users in the channel at once.
Must be between 0 and 99 with 0 meaning no limit.</li>
<li><strong>bitrate</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[int]):
If provided, the bitrate for the channel. Must be
between 8000 and 96000 or 8000 and 128000 for VIP
servers.</li>
<li><strong>video_quality_mode</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Union[<a href="../channels.html#VideoQualityMode">hikari.channels.VideoQualityMode</a>, int]]):
If provided, the new video quality mode for the channel.</li>
<li><strong>permission_overwrites</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Sequence[<a href="../channels.html#PermissionOverwrite">hikari.channels.PermissionOverwrite</a>]]):
If provided, the permission overwrites for the channel.</li>
<li><strong>region</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Union[<a href="../voices.html#VoiceRegion">hikari.voices.VoiceRegion</a>, str]]):
If provided, the voice region to for this channel. Passing
<code>None</code> here will set it to "auto" mode where the used
region will be decided based on the first person who connects to it
when it's empty.</li>
<li><strong>category</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#GuildCategory">hikari.channels.GuildCategory</a>]]):
The category to create the channel under. This may be the
object or the ID of an existing category.</li>
<li><strong>reason</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the reason that will be recorded in the audit logs.
Maximum of 512 characters.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../channels.html#GuildVoiceChannel">hikari.channels.GuildVoiceChannel</a></strong>: The created channel.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If any of the fields that are passed have an invalid value.</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>MANAGE_CHANNEL</code> permission.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.create_guild_stage_channel" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.create_guild_stage_channel">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">create_guild_stage_channel</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    name: str,
    *,
    position: Union[int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    user_limit: Union[int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    bitrate: Union[int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    permission_overwrites: Union[Sequence[<a href="../channels.html#PermissionOverwrite">hikari.channels.PermissionOverwrite</a>], <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    region: Union[str, <a href="../voices.html#VoiceRegion">hikari.voices.VoiceRegion</a>, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    category: Union[<a href="../channels.html#GuildCategory">hikari.channels.GuildCategory</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    reason: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; <a href="../channels.html#GuildStageChannel">hikari.channels.GuildStageChannel</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_guild_stage_channel</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">user_limit</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">bitrate</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">permission_overwrites</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">PermissionOverwrite</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">region</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">voices</span><span class="o">.</span><span class="n">VoiceRegion</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">category</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildCategory</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">channels_</span><span class="o">.</span><span class="n">GuildStageChannel</span><span class="p">:</span>
        <span class="n">channel</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_guild_channel</span><span class="p">(</span>
            <span class="n">guild</span><span class="p">,</span>
            <span class="n">name</span><span class="p">,</span>
            <span class="n">channels_</span><span class="o">.</span><span class="n">ChannelType</span><span class="o">.</span><span class="n">GUILD_STAGE</span><span class="p">,</span>
            <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
            <span class="n">user_limit</span><span class="o">=</span><span class="n">user_limit</span><span class="p">,</span>
            <span class="n">bitrate</span><span class="o">=</span><span class="n">bitrate</span><span class="p">,</span>
            <span class="n">permission_overwrites</span><span class="o">=</span><span class="n">permission_overwrites</span><span class="p">,</span>
            <span class="n">region</span><span class="o">=</span><span class="n">region</span><span class="p">,</span>
            <span class="n">category</span><span class="o">=</span><span class="n">category</span><span class="p">,</span>
            <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">channels_</span><span class="o">.</span><span class="n">GuildStageChannel</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">channel</span>
</pre></div>

        </details>

            <div class="docstring"><p>Create a stage channel in a guild.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to create the channel in. This may be the
object or the ID of an existing guild.</li>
<li><strong>name</strong> (str):
The channel's name. Must be between 2 and 1000 characters.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>position</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[int]):
If provided, the position of the channel (relative to the
category, if any).</li>
<li><strong>user_limit</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[int]):
If provided, the maximum users in the channel at once.
Must be between 0 and 99 with 0 meaning no limit.</li>
<li><strong>bitrate</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[int]):
If provided, the bitrate for the channel. Must be
between 8000 and 96000 or 8000 and 128000 for VIP
servers.</li>
<li><strong>permission_overwrites</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Sequence[<a href="../channels.html#PermissionOverwrite">hikari.channels.PermissionOverwrite</a>]]):
If provided, the permission overwrites for the channel.</li>
<li><strong>region</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Union[<a href="../voices.html#VoiceRegion">hikari.voices.VoiceRegion</a>, str]]):
If provided, the voice region to for this channel. Passing
<code>None</code> here will set it to "auto" mode where the used
region will be decided based on the first person who connects to it
when it's empty.</li>
<li><strong>category</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#GuildCategory">hikari.channels.GuildCategory</a>]]):
The category to create the channel under. This may be the
object or the ID of an existing category.</li>
<li><strong>reason</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the reason that will be recorded in the audit logs.
Maximum of 512 characters.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../channels.html#GuildStageChannel">hikari.channels.GuildStageChannel</a></strong>: The created channel.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If any of the fields that are passed have an invalid value.</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>MANAGE_CHANNEL</code> permission.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.create_guild_category" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.create_guild_category">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">create_guild_category</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    name: str,
    *,
    position: Union[int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    permission_overwrites: Union[Sequence[<a href="../channels.html#PermissionOverwrite">hikari.channels.PermissionOverwrite</a>], <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    reason: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; <a href="../channels.html#GuildCategory">hikari.channels.GuildCategory</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_guild_category</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">permission_overwrites</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">PermissionOverwrite</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">channels_</span><span class="o">.</span><span class="n">GuildCategory</span><span class="p">:</span>
        <span class="n">channel</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_guild_channel</span><span class="p">(</span>
            <span class="n">guild</span><span class="p">,</span>
            <span class="n">name</span><span class="p">,</span>
            <span class="n">channels_</span><span class="o">.</span><span class="n">ChannelType</span><span class="o">.</span><span class="n">GUILD_CATEGORY</span><span class="p">,</span>
            <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
            <span class="n">permission_overwrites</span><span class="o">=</span><span class="n">permission_overwrites</span><span class="p">,</span>
            <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">channels_</span><span class="o">.</span><span class="n">GuildCategory</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">channel</span>
</pre></div>

        </details>

            <div class="docstring"><p>Create a category in a guild.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to create the channel in. This may be the
object or the ID of an existing guild.</li>
<li><strong>name</strong> (str):
The channels name. Must be between 2 and 1000 characters.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>position</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[int]):
If provided, the position of the category.</li>
<li><strong>permission_overwrites</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Sequence[<a href="../channels.html#PermissionOverwrite">hikari.channels.PermissionOverwrite</a>]]):
If provided, the permission overwrites for the category.</li>
<li><strong>reason</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the reason that will be recorded in the audit logs.
Maximum of 512 characters.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../channels.html#GuildCategory">hikari.channels.GuildCategory</a></strong>: The created category.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If any of the fields that are passed have an invalid value.</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>MANAGE_CHANNEL</code> permission.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.reposition_channels" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.reposition_channels">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">reposition_channels</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    positions: Mapping[int, Union[<a href="../channels.html#GuildChannel">hikari.channels.GuildChannel</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]]
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">reposition_channels</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">positions</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildChannel</span><span class="p">]],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_GUILD_CHANNELS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">channel</span><span class="p">)),</span> <span class="s2">&quot;position&quot;</span><span class="p">:</span> <span class="n">pos</span><span class="p">}</span> <span class="k">for</span> <span class="n">pos</span><span class="p">,</span> <span class="n">channel</span> <span class="ow">in</span> <span class="n">positions</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Reposition the channels in a guild.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to reposition the channels in. This may be the
object or the ID of an existing guild.</li>
<li><strong>positions</strong> (typing.Mapping[int, <a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#GuildChannel">hikari.channels.GuildChannel</a>]]):
A mapping of of the object or the ID of an existing channel to
the new position, relative to their parent category, if any.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>MANAGE_CHANNEL</code> permission.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_member" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_member">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_member</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    user: Union[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]
) -&gt; <a href="../guilds.html#Member">hikari.guilds.Member</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_member</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">guilds</span><span class="o">.</span><span class="n">Member</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_MEMBER</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_member</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">))</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch a guild member.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to get the member from. This may be the
object or the ID of an existing guild.</li>
<li><strong>user</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>]):
The user to get the member for. This may be the
object or the ID of an existing user.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../guilds.html#Member">hikari.guilds.Member</a></strong>: The requested member.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild or the user are not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_members" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_members">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">fetch_members</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]
) -&gt; <a href="../iterators.html#LazyIterator">hikari.iterators.LazyIterator</a>[<a href="../guilds.html#Member">hikari.guilds.Member</a>]</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">fetch_members</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">iterators</span><span class="o">.</span><span class="n">LazyIterator</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">Member</span><span class="p">]:</span>
        <span class="k">return</span> <span class="n">special_endpoints_impl</span><span class="o">.</span><span class="n">MemberIterator</span><span class="p">(</span>
            <span class="n">entity_factory</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="p">,</span> <span class="n">request_call</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">,</span> <span class="n">guild</span><span class="o">=</span><span class="n">guild</span>
        <span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch the members from a guild.</p>

<p><em>Warning:</em>
This endpoint requires the <code>GUILD_MEMBERS</code> intent to be enabled in
the dashboard, not necessarily authenticated with it if using the
gateway. If you don't have the intents you can use <code><a href="#RESTClientImpl.search_members">search_members</a></code>
which doesn't require any intents.</p>

<h6 id="notes">Notes</h6>

<p>This call is not a coroutine function, it returns a special type of
lazy iterator that will perform API calls as you iterate across it,
thus any errors documented below will happen then.</p>

<p>See <code><a href="../iterators.html">hikari.iterators</a></code> for the full API for this iterator type.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to fetch the members of. This may be the
object or the ID of an existing guild.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../iterators.html#LazyIterator">hikari.iterators.LazyIterator</a>[<a href="../guilds.html#Member">hikari.guilds.Member</a>]</strong>: An iterator to fetch the members.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.search_members" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.search_members">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">search_members</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    name: str
) -&gt; Sequence[<a href="../guilds.html#Member">hikari.guilds.Member</a>]</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">search_members</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">Member</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_MEMBERS_SEARCH</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">StringMapBuilder</span><span class="p">()</span>
        <span class="n">query</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;query&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">query</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;limit&quot;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="n">query</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="n">guild_id</span> <span class="o">=</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_member</span><span class="p">(</span><span class="n">member_payload</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">guild_id</span><span class="p">)</span> <span class="k">for</span> <span class="n">member_payload</span> <span class="ow">in</span> <span class="n">response</span>
        <span class="p">]</span>
</pre></div>

        </details>

            <div class="docstring"><p>Search the members in a guild by nickname and username.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The object or ID of the guild to search members in.</li>
<li><strong>name</strong> (str):
The query to match username(s) and nickname(s) against.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>typing.Sequence[<a href="../guilds.html#Member">hikari.guilds.Member</a>]</strong>: A sequence of the members who matched the provided <code>name</code>.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
<li><p><strong><em>Note</strong> (</em>):</p></li>
<li><p><strong>Unlike <code>RESTClient.fetch_members</code> this endpoint isn't paginated and</strong></p></li>
<li><strong>therefore will return all the members in one go rather than needing</strong></li>
<li><strong>to be asynchronously iterated over.</strong></li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.edit_member" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.edit_member">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">edit_member</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    user: Union[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    *,
    nick: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>, NoneType] = UNDEFINED,
    roles: Union[Sequence[Union[<a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]], <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    mute: Union[bool, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    deaf: Union[bool, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    voice_channel: Union[<a href="../channels.html#GuildVoiceChannel">hikari.channels.GuildVoiceChannel</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>, NoneType] = UNDEFINED,
    reason: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; <a href="../guilds.html#Member">hikari.guilds.Member</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_member</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">nick</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">roles</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">mute</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">deaf</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">voice_channel</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span>
            <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildVoiceChannel</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">guilds</span><span class="o">.</span><span class="n">Member</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_GUILD_MEMBER</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;nick&quot;</span><span class="p">,</span> <span class="n">nick</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;mute&quot;</span><span class="p">,</span> <span class="n">mute</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;deaf&quot;</span><span class="p">,</span> <span class="n">deaf</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake_array</span><span class="p">(</span><span class="s2">&quot;roles&quot;</span><span class="p">,</span> <span class="n">roles</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">voice_channel</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;channel_id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">voice_channel</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;channel_id&quot;</span><span class="p">,</span> <span class="n">voice_channel</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_member</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">))</span>
</pre></div>

        </details>

            <div class="docstring"><p>Edit a guild member.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to edit. This may be the object
or the ID of an existing guild.</li>
<li><strong>user</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to edit. This may be the object
or the ID of an existing guild.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><p><strong>nick</strong> (<a href="../undefined.html#UndefinedNoneOr">hikari.undefined.UndefinedNoneOr</a>[str]):
If provided, the new nick for the member. If <code>None</code>,
will remove the members nick.</p>

<p>Requires the <code>MANAGE_NICKNAMES</code> permission.</p></li>
<li><p><strong>roles</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../snowflakes.html#SnowflakeishSequence">hikari.snowflakes.SnowflakeishSequence</a>[<a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a>]]):
If provided, the new roles for the member.</p>

<p>Requires the <code>MANAGE_ROLES</code> permission.</p></li>
<li><p><strong>mute</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[bool]):
If provided, the new server mute state for the member.</p>

<p>Requires the <code>MUTE_MEMBERS</code> permission.</p></li>
<li><p><strong>deaf</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[bool]):
If provided, the new server deaf state for the member.</p>

<p>Requires the <code>DEAFEN_MEMBERS</code> permission.</p></li>
<li><p><strong>voice_channel</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#GuildVoiceChannel">hikari.channels.GuildVoiceChannel</a>]]]):
If provided, <code>None</code> or the object or the ID of
an existing voice channel to move the member to.
If <code>None</code>, will disconnect the member from voice.</p>

<p>Requires the <code>MOVE_MEMBERS</code> permission and the <code>CONNECT</code>
permission in the original voice channel and the target
voice channel.</p>

<p><em>Note:</em>
If the member is not in a voice channel, this will
take no effect.</p></li>
<li><strong>reason</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the reason that will be recorded in the audit logs.
Maximum of 512 characters.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../guilds.html#Member">hikari.guilds.Member</a></strong>: Object of the member that was updated.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If any of the fields that are passed have an invalid value.</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing a permission to do an action.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild or the user are not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.edit_my_member" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.edit_my_member">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">edit_my_member</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    *,
    nickname: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>, NoneType] = UNDEFINED,
    reason: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; <a href="../guilds.html#Member">hikari.guilds.Member</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_my_member</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">nickname</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">guilds</span><span class="o">.</span><span class="n">Member</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_MY_GUILD_MEMBER</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;nick&quot;</span><span class="p">,</span> <span class="n">nickname</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_member</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">))</span>
</pre></div>

        </details>

            <div class="docstring"><p>Edit the current user's member in a guild.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to edit the member in. This may be the object
or the ID of an existing guild.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><p><strong>nickname</strong> (<a href="../undefined.html#UndefinedNoneOr">hikari.undefined.UndefinedNoneOr</a>[str]):
If provided, the new nickname for the member. If
<code>None</code>, will remove the members nickname.</p>

<p>Requires the <code>CHANGE_NICKNAME</code> permission.
If provided, the reason that will be recorded in the audit logs.
Maximum of 512 characters.</p></li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../guilds.html#Member">hikari.guilds.Member</a></strong>: Object of the member that was updated.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If any of the fields that are passed have an invalid value.</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing a permission to do an action.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.edit_my_nick" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.edit_my_nick">#&nbsp;&nbsp</a>

                <div class="decorator">@deprecation.deprecated(&#39;2.0.0.dev104&#39;, &#34;Use `edit_my_member`&#39;s `nick` argument instead.&#34;)</div>

            <span class="def">def</span>
            <span class="name">edit_my_nick</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#Guild">hikari.guilds.Guild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    nick: Union[str, NoneType],
    *,
    reason: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="nd">@deprecation</span><span class="o">.</span><span class="n">deprecated</span><span class="p">(</span><span class="s2">&quot;2.0.0.dev104&quot;</span><span class="p">,</span> <span class="s2">&quot;Use `edit_my_member`&#39;s `nick` argument instead.&quot;</span><span class="p">)</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_my_nick</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">Guild</span><span class="p">],</span>
        <span class="n">nick</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">edit_my_member</span><span class="p">(</span><span class="n">guild</span><span class="p">,</span> <span class="n">nickname</span><span class="o">=</span><span class="n">nick</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Edit the associated token's member nick.</p>

<p><em>Deprecated since version 2.0.0.dev104:</em>
Use <code><a href="#RESTClientImpl.edit_my_member">edit_my_member</a></code>'s <code>nick</code> argument instead.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to edit. This may be the object
or the ID of an existing guild.</li>
<li><strong>nick</strong> (typing.Optional[str]):
The new nick. If <code>None</code>,
will remove the nick.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>reason</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the reason that will be recorded in the audit logs.
Maximum of 512 characters.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>CHANGE_NICKNAME</code> permission.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.add_role_to_member" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.add_role_to_member">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">add_role_to_member</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    user: Union[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    role: Union[<a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    *,
    reason: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">add_role_to_member</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span>
        <span class="n">role</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PUT_GUILD_MEMBER_ROLE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="n">role</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Add a role to a member.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild where the member is in. This may be the
object or the ID of an existing guild.</li>
<li><strong>user</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>]):
The user to add the role to. This may be the
object or the ID of an existing user.</li>
<li><strong>role</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a>]):
The role to add. This may be the object or the
ID of an existing role.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>reason</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the reason that will be recorded in the audit logs.
Maximum of 512 characters.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>MANAGE_ROLES</code> permission.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild, user or role are not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.remove_role_from_member" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.remove_role_from_member">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">remove_role_from_member</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    user: Union[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    role: Union[<a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    *,
    reason: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">remove_role_from_member</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span>
        <span class="n">role</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_GUILD_MEMBER_ROLE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="n">role</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Remove a role from a member.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild where the member is in. This may be the
object or the ID of an existing guild.</li>
<li><strong>user</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>]):
The user to remove the role from. This may be the
object or the ID of an existing user.</li>
<li><strong>role</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a>]):
The role to remove. This may be the object or the
ID of an existing role.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>reason</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the reason that will be recorded in the audit logs.
Maximum of 512 characters.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>MANAGE_ROLES</code> permission.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild, user or role are not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.kick_user" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.kick_user">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">kick_user</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    user: Union[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    *,
    reason: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">kick_user</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_GUILD_MEMBER</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Kick a member from a guild.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to kick the member from. This may be the
object or the ID of an existing guild.</li>
<li><strong>user</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>]):
The user to kick. This may be the object
or the ID of an existing user.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>reason</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the reason that will be recorded in the audit logs.
Maximum of 512 characters.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>KICK_MEMBERS</code> permission.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild or user are not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.kick_member" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.kick_member">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">kick_member</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    user: Union[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    *,
    reason: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; Coroutine[Any, Any, NoneType]</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">kick_member</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Coroutine</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">kick_user</span><span class="p">(</span><span class="n">guild</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Alias of <code>RESTClient.kick_user</code>.</p>
</div>


                        </div>
                        <div id="RESTClientImpl.ban_user" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.ban_user">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">ban_user</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    user: Union[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    *,
    delete_message_days: Union[int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    reason: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">ban_user</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">delete_message_days</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;delete_message_days&quot;</span><span class="p">,</span> <span class="n">delete_message_days</span><span class="p">)</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PUT_GUILD_BAN</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Ban a member from a guild.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to ban the member from. This may be the
object or the ID of an existing guild.</li>
<li><strong>user</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>]):
The user to kick. This may be the object
or the ID of an existing user.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>delete_message_days</strong> (<a href="../undefined.html#UndefinedNoneOr">hikari.undefined.UndefinedNoneOr</a>[int]):
If provided, the number of days to delete messages for.
This must be between 0 and 7.</li>
<li><strong>reason</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the reason that will be recorded in the audit logs.
Maximum of 512 characters.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If any of the fields that are passed have an invalid value.</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>BAN_MEMBERS</code> permission.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild or user are not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.ban_member" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.ban_member">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">ban_member</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    user: Union[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    *,
    delete_message_days: Union[int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    reason: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; Coroutine[Any, Any, NoneType]</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">ban_member</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">delete_message_days</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Coroutine</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ban_user</span><span class="p">(</span><span class="n">guild</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">delete_message_days</span><span class="o">=</span><span class="n">delete_message_days</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Alias of <code>RESTClient.ban_user</code>.</p>
</div>


                        </div>
                        <div id="RESTClientImpl.unban_user" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.unban_user">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">unban_user</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    user: Union[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    *,
    reason: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">unban_user</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_GUILD_BAN</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Unban a member from a guild.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to unban the member from. This may be the
object or the ID of an existing guild.</li>
<li><strong>user</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>]):
The user to unban. This may be the object
or the ID of an existing user.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>reason</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the reason that will be recorded in the audit logs.
Maximum of 512 characters.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>BAN_MEMBERS</code> permission.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild or user are not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.unban_member" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.unban_member">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">unban_member</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    user: Union[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    *,
    reason: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; Coroutine[Any, Any, NoneType]</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">unban_member</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Coroutine</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">unban_user</span><span class="p">(</span><span class="n">guild</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Alias of <code>RESTClient.unban_user</code>.</p>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_ban" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_ban">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_ban</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    user: Union[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]
) -&gt; <a href="../guilds.html#GuildBan">hikari.guilds.GuildBan</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_ban</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">guilds</span><span class="o">.</span><span class="n">GuildBan</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_BAN</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_guild_member_ban</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch the guild's ban info for a user.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to fetch the ban from. This may be the
object or the ID of an existing guild.</li>
<li><strong>user</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>]):
The user to fetch the ban of. This may be the
object or the ID of an existing user.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../guilds.html#GuildBan">hikari.guilds.GuildBan</a></strong>: The requested ban info.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>BAN_MEMBERS</code> permission.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild or user are not found or if the user
is not banned.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_bans" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_bans">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_bans</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]
) -&gt; Sequence[<a href="../guilds.html#GuildBan">hikari.guilds.GuildBan</a>]</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_bans</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">GuildBan</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_BANS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_guild_member_ban</span><span class="p">(</span><span class="n">ban_payload</span><span class="p">)</span> <span class="k">for</span> <span class="n">ban_payload</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch the bans of a guild.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to fetch the bans from. This may be the
object or the ID of an existing guild.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>typing.Sequence[<a href="../guilds.html#GuildBan">hikari.guilds.GuildBan</a>]</strong>: The requested bans.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>BAN_MEMBERS</code> permission.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_roles" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_roles">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_roles</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]
) -&gt; Sequence[<a href="../guilds.html#Role">hikari.guilds.Role</a>]</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_roles</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">Role</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_ROLES</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="n">guild_id</span> <span class="o">=</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_role</span><span class="p">(</span><span class="n">role_payload</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">guild_id</span><span class="p">)</span> <span class="k">for</span> <span class="n">role_payload</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch the roles of a guild.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to fetch the roles from. This may be the
object or the ID of an existing guild.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>typing.Sequence[<a href="../guilds.html#Role">hikari.guilds.Role</a>]</strong>: The requested roles.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.create_role" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.create_role">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">create_role</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    *,
    name: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    permissions: Union[<a href="../permissions.html#Permissions">hikari.permissions.Permissions</a>, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = &lt;Permissions.NONE: 0&gt;,
    color: Union[<a href="../colors.html#Color">hikari.colors.Color</a>, SupportsInt, Tuple[SupportsInt, SupportsInt, SupportsInt], Tuple[SupportsFloat, SupportsFloat, SupportsFloat], Sequence[SupportsInt], Sequence[SupportsFloat], str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    colour: Union[<a href="../colors.html#Color">hikari.colors.Color</a>, SupportsInt, Tuple[SupportsInt, SupportsInt, SupportsInt], Tuple[SupportsFloat, SupportsFloat, SupportsFloat], Sequence[SupportsInt], Sequence[SupportsFloat], str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    hoist: Union[bool, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    icon: Union[<a href="../files.html#Resource">hikari.files.Resource</a>[Any], os.PathLike, str, bytes, bytearray, memoryview, _io.BytesIO, _io.StringIO, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    unicode_emoji: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    mentionable: Union[bool, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    reason: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; <a href="../guilds.html#Role">hikari.guilds.Role</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_role</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">permissions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">permissions_</span><span class="o">.</span><span class="n">Permissions</span><span class="p">]</span> <span class="o">=</span> <span class="n">permissions_</span><span class="o">.</span><span class="n">Permissions</span><span class="o">.</span><span class="n">NONE</span><span class="p">,</span>
        <span class="n">color</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">colors</span><span class="o">.</span><span class="n">Colorish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">colour</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">colors</span><span class="o">.</span><span class="n">Colorish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">hoist</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">icon</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">unicode_emoji</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">mentionable</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">guilds</span><span class="o">.</span><span class="n">Role</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">any_undefined</span><span class="p">(</span><span class="n">color</span><span class="p">,</span> <span class="n">colour</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Can not specify &#39;color&#39; and &#39;colour&#39; together.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">any_undefined</span><span class="p">(</span><span class="n">icon</span><span class="p">,</span> <span class="n">unicode_emoji</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Can not specify &#39;icon&#39; and &#39;unicode_emoji&#39; together.&quot;</span><span class="p">)</span>

        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_GUILD_ROLES</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;permissions&quot;</span><span class="p">,</span> <span class="n">permissions</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="n">colors</span><span class="o">.</span><span class="n">Color</span><span class="o">.</span><span class="n">of</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="n">colour</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="n">colors</span><span class="o">.</span><span class="n">Color</span><span class="o">.</span><span class="n">of</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;hoist&quot;</span><span class="p">,</span> <span class="n">hoist</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;unicode_emoji&quot;</span><span class="p">,</span> <span class="n">unicode_emoji</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;mentionable&quot;</span><span class="p">,</span> <span class="n">mentionable</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">icon</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">icon_resource</span> <span class="o">=</span> <span class="n">files</span><span class="o">.</span><span class="n">ensure_resource</span><span class="p">(</span><span class="n">icon</span><span class="p">)</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">icon_resource</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
                <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;icon&quot;</span><span class="p">,</span> <span class="k">await</span> <span class="n">stream</span><span class="o">.</span><span class="n">data_uri</span><span class="p">())</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_role</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">))</span>
</pre></div>

        </details>

            <div class="docstring"><p>Create a role.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to create the role in. This may be the
object or the ID of an existing guild.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>name</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the name for the role.</li>
<li><strong>permissions</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../permissions.html#Permissions">hikari.permissions.Permissions</a>]):
The permissions to give the role. This will default to setting
NO roles if left to the default value. This is in contrast to
default behaviour on Discord where some random permissions will
be set by default.</li>
<li><strong>color</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../colors.html#Colorish">hikari.colors.Colorish</a>]):
If provided, the role's color.</li>
<li><strong>colour</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../colors.html#Colorish">hikari.colors.Colorish</a>]):
An alias for <code>color</code>.</li>
<li><strong>hoist</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[bool]):
If provided, whether to hoist the role.</li>
<li><strong>icon</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../files.html#Resourceish">hikari.files.Resourceish</a>]):
If provided, the role icon. Must be a 64x64 image under 256kb.</li>
<li><strong>unicode_emoji</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the standard emoji to set as the role icon.</li>
<li><strong>mentionable</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[bool]):
If provided, whether to make the role mentionable.</li>
<li><strong>reason</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the reason that will be recorded in the audit logs.
Maximum of 512 characters.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../guilds.html#Role">hikari.guilds.Role</a></strong>: The created role.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong>TypeError</strong>: If both <code>color</code> and <code>colour</code> are specified or if both <code>icon</code> and
<code>unicode_emoji</code> are specified.</li>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If any of the fields that are passed have an invalid value.</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>MANAGE_ROLES</code> permission.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.reposition_roles" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.reposition_roles">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">reposition_roles</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    positions: Mapping[int, Union[<a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]]
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">reposition_roles</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">positions</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">]],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_GUILD_ROLES</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">role</span><span class="p">)),</span> <span class="s2">&quot;position&quot;</span><span class="p">:</span> <span class="n">pos</span><span class="p">}</span> <span class="k">for</span> <span class="n">pos</span><span class="p">,</span> <span class="n">role</span> <span class="ow">in</span> <span class="n">positions</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Reposition the roles in a guild.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to reposition the roles in. This may be
the object or the ID of an existing guild.</li>
<li><strong>positions</strong> (typing.Mapping[int, <a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a>]]):
A mapping of the position to the role.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>MANAGE_ROLES</code> permission.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.edit_role" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.edit_role">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">edit_role</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    role: Union[<a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    *,
    name: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    permissions: Union[<a href="../permissions.html#Permissions">hikari.permissions.Permissions</a>, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    color: Union[<a href="../colors.html#Color">hikari.colors.Color</a>, SupportsInt, Tuple[SupportsInt, SupportsInt, SupportsInt], Tuple[SupportsFloat, SupportsFloat, SupportsFloat], Sequence[SupportsInt], Sequence[SupportsFloat], str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    colour: Union[<a href="../colors.html#Color">hikari.colors.Color</a>, SupportsInt, Tuple[SupportsInt, SupportsInt, SupportsInt], Tuple[SupportsFloat, SupportsFloat, SupportsFloat], Sequence[SupportsInt], Sequence[SupportsFloat], str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    hoist: Union[bool, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    icon: Union[<a href="../files.html#Resource">hikari.files.Resource</a>[Any], os.PathLike, str, bytes, bytearray, memoryview, _io.BytesIO, _io.StringIO, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>, NoneType] = UNDEFINED,
    unicode_emoji: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>, NoneType] = UNDEFINED,
    mentionable: Union[bool, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    reason: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; <a href="../guilds.html#Role">hikari.guilds.Role</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_role</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">role</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">permissions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">permissions_</span><span class="o">.</span><span class="n">Permissions</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">color</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">colors</span><span class="o">.</span><span class="n">Colorish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">colour</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">colors</span><span class="o">.</span><span class="n">Colorish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">hoist</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">icon</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">unicode_emoji</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">mentionable</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">guilds</span><span class="o">.</span><span class="n">Role</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">any_undefined</span><span class="p">(</span><span class="n">color</span><span class="p">,</span> <span class="n">colour</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Can not specify &#39;color&#39; and &#39;colour&#39; together.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">any_undefined</span><span class="p">(</span><span class="n">icon</span><span class="p">,</span> <span class="n">unicode_emoji</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Can not specify &#39;icon&#39; and &#39;unicode_emoji&#39; together.&quot;</span><span class="p">)</span>

        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_GUILD_ROLE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="n">role</span><span class="p">)</span>

        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;permissions&quot;</span><span class="p">,</span> <span class="n">permissions</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="n">colors</span><span class="o">.</span><span class="n">Color</span><span class="o">.</span><span class="n">of</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="n">colour</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="n">colors</span><span class="o">.</span><span class="n">Color</span><span class="o">.</span><span class="n">of</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;hoist&quot;</span><span class="p">,</span> <span class="n">hoist</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;unicode_emoji&quot;</span><span class="p">,</span> <span class="n">unicode_emoji</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;mentionable&quot;</span><span class="p">,</span> <span class="n">mentionable</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">icon</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;icon&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">icon</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">icon_resource</span> <span class="o">=</span> <span class="n">files</span><span class="o">.</span><span class="n">ensure_resource</span><span class="p">(</span><span class="n">icon</span><span class="p">)</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">icon_resource</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
                <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;icon&quot;</span><span class="p">,</span> <span class="k">await</span> <span class="n">stream</span><span class="o">.</span><span class="n">data_uri</span><span class="p">())</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_role</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">))</span>
</pre></div>

        </details>

            <div class="docstring"><p>Edit a role.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to edit the role in. This may be the
object or the ID of an existing guild.</li>
<li><strong>role</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a>]):
The role to edit. This may be the object or the
ID of an existing role.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>name</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the new name for the role.</li>
<li><strong>permissions</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../permissions.html#Permissions">hikari.permissions.Permissions</a>]):
If provided, the new permissions for the role.</li>
<li><strong>color</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../colors.html#Colorish">hikari.colors.Colorish</a>]):
If provided, the new color for the role.</li>
<li><strong>colour</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../colors.html#Colorish">hikari.colors.Colorish</a>]):
An alias for <code>color</code>.</li>
<li><strong>hoist</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[bool]):
If provided, whether to hoist the role.</li>
<li><strong>icon</strong> (<a href="../undefined.html#UndefinedNoneOr">hikari.undefined.UndefinedNoneOr</a>[<a href="../files.html#Resourceish">hikari.files.Resourceish</a>]):
If provided, the new role icon. Must be a 64x64 image
under 256kb.</li>
<li><strong>unicode_emoji</strong> (<a href="../undefined.html#UndefinedNoneOr">hikari.undefined.UndefinedNoneOr</a>[str]):
If provided, the new unicode emoji to set as the role icon.</li>
<li><strong>mentionable</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[bool]):
If provided, whether to make the role mentionable.</li>
<li><strong>reason</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the reason that will be recorded in the audit logs.
Maximum of 512 characters.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../guilds.html#Role">hikari.guilds.Role</a></strong>: The edited role.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong>TypeError</strong>: If both <code>color</code> and <code>colour</code> are specified or if both <code>icon</code> and
<code>unicode_emoji</code> are specified.</li>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If any of the fields that are passed have an invalid value.</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>MANAGE_ROLES</code> permission.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild or role are not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.delete_role" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.delete_role">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">delete_role</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    role: Union[<a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_role</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">role</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_GUILD_ROLE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="n">role</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Delete a role.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to delete the role in. This may be the
object or the ID of an existing guild.</li>
<li><strong>role</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a>]):
The role to delete. This may be the object or the
ID of an existing role.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>MANAGE_ROLES</code> permission.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild or role are not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.estimate_guild_prune_count" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.estimate_guild_prune_count">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">estimate_guild_prune_count</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    *,
    days: Union[int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    include_roles: Union[Sequence[Union[<a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]], <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; int</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">estimate_guild_prune_count</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">days</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">include_roles</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_PRUNE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">StringMapBuilder</span><span class="p">()</span>
        <span class="n">query</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;days&quot;</span><span class="p">,</span> <span class="n">days</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">include_roles</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">roles</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">role</span><span class="p">))</span> <span class="k">for</span> <span class="n">role</span> <span class="ow">in</span> <span class="n">include_roles</span><span class="p">)</span>
            <span class="n">query</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;include_roles&quot;</span><span class="p">,</span> <span class="n">roles</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="n">query</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">response</span><span class="p">[</span><span class="s2">&quot;pruned&quot;</span><span class="p">])</span>
</pre></div>

        </details>

            <div class="docstring"><p>Estimate the guild prune count.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to estimate the guild prune count for. This may be the object
or the ID of an existing guild.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>days</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[int]):
If provided, number of days to count prune for.</li>
<li><strong>include_roles</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../snowflakes.html#SnowflakeishSequence">hikari.snowflakes.SnowflakeishSequence</a>[<a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a>]]]):
If provided, the role(s) to include. By default, this endpoint will
not count users with roles. Providing roles using this attribute
will make members with the specified roles also get included into
the count.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>int</strong>: The estimated guild prune count.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If any of the fields that are passed have an invalid value.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>KICK_MEMBERS</code> permission.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.begin_guild_prune" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.begin_guild_prune">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">begin_guild_prune</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    *,
    days: Union[int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    compute_prune_count: Union[bool, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    include_roles: Union[Sequence[Union[<a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]], <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    reason: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; Union[int, NoneType]</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">begin_guild_prune</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">days</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">compute_prune_count</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">include_roles</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_GUILD_PRUNE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;days&quot;</span><span class="p">,</span> <span class="n">days</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;compute_prune_count&quot;</span><span class="p">,</span> <span class="n">compute_prune_count</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake_array</span><span class="p">(</span><span class="s2">&quot;include_roles&quot;</span><span class="p">,</span> <span class="n">include_roles</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="n">pruned</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;pruned&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">pruned</span><span class="p">)</span> <span class="k">if</span> <span class="n">pruned</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
</pre></div>

        </details>

            <div class="docstring"><p>Begin the guild prune.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to begin the guild prune in. This may be the object
or the ID of an existing guild.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>days</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[int]):
If provided, number of days to count prune for.</li>
<li><strong>compute_prune_count</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[bool]):
If provided, whether to return the prune count. This is discouraged
for large guilds.</li>
<li><strong>include_roles</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../snowflakes.html#SnowflakeishSequence">hikari.snowflakes.SnowflakeishSequence</a>[<a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a>]]):
If provided, the role(s) to include. By default, this endpoint will
not count users with roles. Providing roles using this attribute
will make members with the specified roles also get included into
the count.</li>
<li><strong>reason</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the reason that will be recorded in the audit logs.
Maximum of 512 characters.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>typing.Optional[int]</strong>: If <code>compute_prune_count</code> is not provided or <code>True</code>, the
number of members pruned. Else <code>None</code>.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If any of the fields that are passed have an invalid value.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>KICK_MEMBERS</code> permission.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_guild_voice_regions" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_guild_voice_regions">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_guild_voice_regions</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]
) -&gt; Sequence[<a href="../voices.html#VoiceRegion">hikari.voices.VoiceRegion</a>]</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_guild_voice_regions</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">voices</span><span class="o">.</span><span class="n">VoiceRegion</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_VOICE_REGIONS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_voice_region</span><span class="p">(</span><span class="n">voice_region_payload</span><span class="p">)</span> <span class="k">for</span> <span class="n">voice_region_payload</span> <span class="ow">in</span> <span class="n">response</span>
        <span class="p">]</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch the available voice regions for a guild.</p>

<p><em>Note:</em>
Unlike <code>RESTClient.fetch_voice_regions</code>, this will
return the VIP regions if the guild has access to them.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to fetch the voice regions for. This may be the object
or the ID of an existing guild.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>typing.Sequence[<a href="../voices.html#VoiceRegion">hikari.voices.VoiceRegion</a>]</strong>: The available voice regions for the guild.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_guild_invites" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_guild_invites">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_guild_invites</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]
) -&gt; Sequence[<a href="../invites.html#InviteWithMetadata">hikari.invites.InviteWithMetadata</a>]</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_guild_invites</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">invites</span><span class="o">.</span><span class="n">InviteWithMetadata</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_INVITES</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_invite_with_metadata</span><span class="p">(</span><span class="n">invite_payload</span><span class="p">)</span> <span class="k">for</span> <span class="n">invite_payload</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch the guild's invites.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to fetch the invites for. This may be the object
or the ID of an existing guild.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>typing.Sequence[<a href="../invites.html#InviteWithMetadata">hikari.invites.InviteWithMetadata</a>]</strong>: The invites for the guild.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>MANAGE_GUILD</code> permission.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_integrations" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_integrations">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_integrations</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]
) -&gt; Sequence[<a href="../guilds.html#Integration">hikari.guilds.Integration</a>]</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_integrations</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">Integration</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_INTEGRATIONS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="n">guild_id</span> <span class="o">=</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_integration</span><span class="p">(</span><span class="n">integration_payload</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">guild_id</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">integration_payload</span> <span class="ow">in</span> <span class="n">response</span>
        <span class="p">]</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch the guild's integrations.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to fetch the integrations for. This may be the object
or the ID of an existing guild.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>typing.Sequence[<a href="../guilds.html#Integration">hikari.guilds.Integration</a>]</strong>: The integrations for the guild.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>MANAGE_GUILD</code> permission.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_widget" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_widget">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_widget</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]
) -&gt; <a href="../guilds.html#GuildWidget">hikari.guilds.GuildWidget</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_widget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">guilds</span><span class="o">.</span><span class="n">GuildWidget</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_WIDGET</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_guild_widget</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch a guilds's widget.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to fetch the widget from. This can be the object
or the ID of an existing guild.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../guilds.html#GuildWidget">hikari.guilds.GuildWidget</a></strong>: The requested guild widget.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>MANAGE_GUILD</code> permission.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild is not found.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.edit_widget" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.edit_widget">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">edit_widget</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    *,
    channel: Union[<a href="../channels.html#GuildChannel">hikari.channels.GuildChannel</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>, NoneType] = UNDEFINED,
    enabled: Union[bool, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    reason: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; <a href="../guilds.html#GuildWidget">hikari.guilds.GuildWidget</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_widget</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">channels_</span><span class="o">.</span><span class="n">GuildChannel</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">enabled</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">guilds</span><span class="o">.</span><span class="n">GuildWidget</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_GUILD_WIDGET</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>

        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;enabled&quot;</span><span class="p">,</span> <span class="n">enabled</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">channel</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;channel&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">channel</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put_snowflake</span><span class="p">(</span><span class="s2">&quot;channel&quot;</span><span class="p">,</span> <span class="n">channel</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_guild_widget</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch a guilds's widget.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to edit the widget in. This can be the object
or the ID of an existing guild.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>channel</strong> (<a href="../undefined.html#UndefinedNoneOr">hikari.undefined.UndefinedNoneOr</a>[<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../channels.html#GuildChannel">hikari.channels.GuildChannel</a>]]):
If provided, the channel to set the widget to. If <code>None</code>,
will not set to any.</li>
<li><strong>enabled</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[bool]):
If provided, whether to enable the widget.</li>
<li><strong>reason</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
If provided, the reason that will be recorded in the audit logs.
Maximum of 512 characters.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../guilds.html#GuildWidget">hikari.guilds.GuildWidget</a></strong>: The edited guild widget.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>MANAGE_GUILD</code> permission.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild is not found.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_welcome_screen" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_welcome_screen">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_welcome_screen</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]
) -&gt; <a href="../guilds.html#WelcomeScreen">hikari.guilds.WelcomeScreen</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_welcome_screen</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">guilds</span><span class="o">.</span><span class="n">WelcomeScreen</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_WELCOME_SCREEN</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_welcome_screen</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch a guild's welcome screen.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
Object or ID of the guild to fetch the welcome screen for.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../guilds.html#WelcomeScreen">hikari.guilds.WelcomeScreen</a></strong>: The requested welcome screen.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild is not found or the welcome screen has never been set
for this guild (if the welcome screen has been set for a guild
before and then disabled you should still be able to fetch it).</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.edit_welcome_screen" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.edit_welcome_screen">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">edit_welcome_screen</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    *,
    description: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>, NoneType] = UNDEFINED,
    enabled: Union[bool, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    channels: Union[Sequence[<a href="../guilds.html#WelcomeChannel">hikari.guilds.WelcomeChannel</a>], <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>, NoneType] = UNDEFINED
) -&gt; <a href="../guilds.html#WelcomeScreen">hikari.guilds.WelcomeScreen</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_welcome_screen</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">enabled</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">channels</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">WelcomeChannel</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">guilds</span><span class="o">.</span><span class="n">WelcomeScreen</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_GUILD_WELCOME_SCREEN</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>

        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>

        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="n">description</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;enabled&quot;</span><span class="p">,</span> <span class="n">enabled</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">channels</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put_array</span><span class="p">(</span><span class="s2">&quot;welcome_channels&quot;</span><span class="p">,</span> <span class="n">channels</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">serialize_welcome_channel</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;welcome_channels&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_welcome_screen</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Edit the welcome screen of a community guild.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
ID or object of the guild to edit the welcome screen for.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>description</strong> (undefined.UndefinedNoneOr[str]):
If provided, the description to set for the guild's welcome screen.
This may be <code>None</code> to unset the description.</li>
<li><strong>enabled</strong> (undefined.UndefinedOr[bool]):
If provided, Whether the guild's welcome screen should be enabled.</li>
<li><p><strong>channels</strong> (<a href="../undefined.html#UndefinedNoneOr">hikari.undefined.UndefinedNoneOr</a>[typing.Sequence[<a href="../guilds.html#WelcomeChannel">hikari.guilds.WelcomeChannel</a>]]):
If provided, a sequence of up to 5 public channels to set in this
guild's welcome screen. This may be passed as <code>None</code> to
remove all welcome channels</p>

<p><em>Note:</em>
Custom emojis may only be included in a guild's welcome channels
if it's boost status is tier 2 or above.</p></li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../guilds.html#WelcomeScreen">hikari.guilds.WelcomeScreen</a></strong>: The edited guild welcome screen.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If more than 5 welcome channels are provided or if a custom emoji
is included on a welcome channel in a guild that doesn't have tier
2 of above boost status or if a private channel is included as a
welcome channel.</li>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are missing the <code>MANAGE_GUILD</code> permission, are not part of
the guild or the guild doesn't have access to the community welcome
screen feature.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild is not found.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_vanity_url" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_vanity_url">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_vanity_url</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]
) -&gt; <a href="../invites.html#VanityURL">hikari.invites.VanityURL</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_vanity_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">invites</span><span class="o">.</span><span class="n">VanityURL</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_VANITY_URL</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_vanity_url</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch a guild's vanity url.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to fetch the vanity url from. This can
be the object or the ID of an existing guild.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../invites.html#VanityURL">hikari.invites.VanityURL</a></strong>: The requested invite.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are not part of the guild.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild is not found.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_template" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_template">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_template</span><span class="signature">(
    self,
    template: Union[<a href="../templates.html#Template">hikari.templates.Template</a>, str]
) -&gt; <a href="../templates.html#Template">hikari.templates.Template</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_template</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">template</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">templates</span><span class="o">.</span><span class="n">Template</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">templates</span><span class="o">.</span><span class="n">Template</span><span class="p">:</span>
        <span class="n">template</span> <span class="o">=</span> <span class="n">template</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">template</span><span class="o">.</span><span class="n">code</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_TEMPLATE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">template</span><span class="o">=</span><span class="n">template</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_template</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch a guild template.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>template</strong> (typing.Union[str, <a href="../templates.html#Template">hikari.templates.Template</a>]):
The object or string code of the template to fetch.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../templates.html#Template">hikari.templates.Template</a></strong>: The object of the found template.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the template was not found.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_guild_templates" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_guild_templates">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_guild_templates</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]
) -&gt; Sequence[<a href="../templates.html#Template">hikari.templates.Template</a>]</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_guild_templates</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">templates</span><span class="o">.</span><span class="n">Template</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_GUILD_TEMPLATES</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_template</span><span class="p">(</span><span class="n">template_payload</span><span class="p">)</span> <span class="k">for</span> <span class="n">template_payload</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch the templates for a guild.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The object or ID of the guild to get the templates for.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>typing.Sequence[<a href="../templates.html#Template">hikari.templates.Template</a>]</strong>: A sequence of the found template objects.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are not part of the guild.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild is not found or are missing the <code>MANAGE_GUILD</code>
permission.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.sync_guild_template" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.sync_guild_template">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">sync_guild_template</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    template: Union[<a href="../templates.html#Template">hikari.templates.Template</a>, str]
) -&gt; <a href="../templates.html#Template">hikari.templates.Template</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">sync_guild_template</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">template</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">templates</span><span class="o">.</span><span class="n">Template</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">templates</span><span class="o">.</span><span class="n">Template</span><span class="p">:</span>
        <span class="n">template</span> <span class="o">=</span> <span class="n">template</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">template</span><span class="o">.</span><span class="n">code</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PUT_GUILD_TEMPLATE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">template</span><span class="o">=</span><span class="n">template</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_template</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Create a guild template.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to sync a template in.</li>
<li><strong>template</strong> (typing.Union[str, <a href="../templates.html#Template">hikari.templates.Template</a>]):
Object or code of the template to sync.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../templates.html#Template">hikari.templates.Template</a></strong>: The object of the synced template.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are not part of the guild or are missing the <code>MANAGE_GUILD</code>
permission.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild or template is not found.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.create_guild_from_template" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.create_guild_from_template">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">create_guild_from_template</span><span class="signature">(
    self,
    template: Union[str, <a href="../templates.html#Template">hikari.templates.Template</a>],
    name: str,
    *,
    icon: Union[<a href="../files.html#Resource">hikari.files.Resource</a>[Any], os.PathLike, str, bytes, bytearray, memoryview, _io.BytesIO, _io.StringIO, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; <a href="../guilds.html#RESTGuild">hikari.guilds.RESTGuild</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_guild_from_template</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">template</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">templates</span><span class="o">.</span><span class="n">Template</span><span class="p">],</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">icon</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">guilds</span><span class="o">.</span><span class="n">RESTGuild</span><span class="p">:</span>
        <span class="n">template</span> <span class="o">=</span> <span class="n">template</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">template</span><span class="o">.</span><span class="n">code</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_TEMPLATE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">template</span><span class="o">=</span><span class="n">template</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">icon</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">icon_resource</span> <span class="o">=</span> <span class="n">files</span><span class="o">.</span><span class="n">ensure_resource</span><span class="p">(</span><span class="n">icon</span><span class="p">)</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">icon_resource</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">executor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
                <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;icon&quot;</span><span class="p">,</span> <span class="k">await</span> <span class="n">stream</span><span class="o">.</span><span class="n">data_uri</span><span class="p">())</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_rest_guild</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Make a guild from a template.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>template</strong> (typing.Union[str, <a href="../templates.html#Template">hikari.templates.Template</a>]):
The object or string code of the template to create a guild based on.</li>
<li><strong>name</strong> (str):
The new guilds name.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>icon</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../files.html#Resourceish">hikari.files.Resourceish</a>]):
If provided, the guild icon to set. Must be a 1024x1024 image or can
be an animated gif when the guild has the <code>ANIMATED_ICON</code> feature.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../guilds.html#RESTGuild">hikari.guilds.RESTGuild</a></strong>: Object of the created guild.</li>
<li><p><strong><em>Note</strong> (</em>):</p></li>
<li><p><strong>This endpoint can only be used by bots in less than 10 guilds.</strong></p></li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If any of the fields that are passed have an invalid value or if you
call this as a bot that's in more than 10 guilds.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.create_template" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.create_template">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">create_template</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    name: str,
    *,
    description: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>, NoneType] = UNDEFINED
) -&gt; <a href="../templates.html#Template">hikari.templates.Template</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_template</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">templates</span><span class="o">.</span><span class="n">Template</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_GUILD_TEMPLATES</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="n">description</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_template</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Create a guild template.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to create a template from.</li>
<li><strong>name</strong> (str):
The name to use for the created template.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>description</strong> (<a href="../undefined.html#UndefinedNoneOr">hikari.undefined.UndefinedNoneOr</a>[str]):
The description to set for the template.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../templates.html#Template">hikari.templates.Template</a></strong>: The object of the created template.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are not part of the guild.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild is not found or you are missing the <code>MANAGE_GUILD</code>
permission.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.edit_template" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.edit_template">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">edit_template</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    template: Union[str, <a href="../templates.html#Template">hikari.templates.Template</a>],
    *,
    name: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    description: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>, NoneType] = UNDEFINED
) -&gt; <a href="../templates.html#Template">hikari.templates.Template</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_template</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">template</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">templates</span><span class="o">.</span><span class="n">Template</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">templates</span><span class="o">.</span><span class="n">Template</span><span class="p">:</span>
        <span class="n">template</span> <span class="o">=</span> <span class="n">template</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">template</span><span class="o">.</span><span class="n">code</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_GUILD_TEMPLATE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">template</span><span class="o">=</span><span class="n">template</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="n">description</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_template</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Modify a guild template.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to edit a template in.</li>
<li><strong>template</strong> (typing.Union[str, <a href="../templates.html#Template">hikari.templates.Template</a>]):
Object or string code of the template to modify.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>name</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
The name to set for this template.</li>
<li><strong>description</strong> (<a href="../undefined.html#UndefinedNoneOr">hikari.undefined.UndefinedNoneOr</a>[str]):
The description to set for the template.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../templates.html#Template">hikari.templates.Template</a></strong>: The object of the edited template.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are not part of the guild.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild is not found or you are missing the <code>MANAGE_GUILD</code>
permission.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.delete_template" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.delete_template">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">delete_template</span><span class="signature">(
    self,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    template: Union[str, <a href="../templates.html#Template">hikari.templates.Template</a>]
) -&gt; <a href="../templates.html#Template">hikari.templates.Template</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_template</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">template</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">templates</span><span class="o">.</span><span class="n">Template</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">templates</span><span class="o">.</span><span class="n">Template</span><span class="p">:</span>
        <span class="n">template</span> <span class="o">=</span> <span class="n">template</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">template</span><span class="o">.</span><span class="n">code</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_GUILD_TEMPLATE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">template</span><span class="o">=</span><span class="n">template</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_template</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Delete a guild template.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
The guild to delete a template in.</li>
<li><strong>template</strong> (typing.Union[str, <a href="../templates.html#Template">hikari.templates.Template</a>]):
Object or string code of the template to delete.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../templates.html#Template">hikari.templates.Template</a></strong>: The deleted template's object.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you are not part of the guild.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the guild is not found or you are missing the <code>MANAGE_GUILD</code>
permission.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.command_builder" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.command_builder">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">command_builder</span><span class="signature">(
    self,
    name: str,
    description: str,
    /
) -&gt; <a href="../api/special_endpoints.html#CommandBuilder">hikari.api.special_endpoints.CommandBuilder</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">command_builder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">special_endpoints</span><span class="o">.</span><span class="n">CommandBuilder</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">special_endpoints_impl</span><span class="o">.</span><span class="n">CommandBuilder</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Create a command builder for use in <code>RESTClient.set_application_commands</code>.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>name</strong> (str):
The command's name. This should match the regex <code>^[\w-]{1,32}$</code> in
Unicode mode and be lowercase.</li>
<li><strong>description</strong> (str):
The description to set for the command.
This should be inclusively between 1-100 characters in length.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../api/special_endpoints.html#CommandBuilder">hikari.api.special_endpoints.CommandBuilder</a></strong>: The created command builder object.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_application_command" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_application_command">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_application_command</span><span class="signature">(
    self,
    application: Union[<a href="../guilds.html#PartialApplication">hikari.guilds.PartialApplication</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    command: Union[<a href="../commands.html#Command">hikari.commands.Command</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; <a href="../commands.html#Command">hikari.commands.Command</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_application_command</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">application</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">command</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">commands</span><span class="o">.</span><span class="n">Command</span><span class="p">],</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">commands</span><span class="o">.</span><span class="n">Command</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">guild</span> <span class="ow">is</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_APPLICATION_COMMAND</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">command</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_APPLICATION_GUILD_COMMAND</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">command</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_command</span><span class="p">(</span>
            <span class="n">response</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">)</span> <span class="k">if</span> <span class="n">guild</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch a command set for an application.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>application</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialApplication">hikari.guilds.PartialApplication</a>]):
Object or ID of the application to fetch a command for.</li>
<li><strong>command</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../commands.html#Command">hikari.commands.Command</a>]):
Object or ID of the command to fetch.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
Object or ID of the guild to fetch the command for. If left as
<code><a href="../undefined.html#UNDEFINED">hikari.undefined.UNDEFINED</a></code> then this will return a global command,
otherwise this will return a command made for the specified guild.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../commands.html#Command">hikari.commands.Command</a></strong>: Object of the fetched command.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you cannot access the target command.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the command isn't found.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_application_commands" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_application_commands">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_application_commands</span><span class="signature">(
    self,
    application: Union[<a href="../guilds.html#PartialApplication">hikari.guilds.PartialApplication</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; Sequence[<a href="../commands.html#Command">hikari.commands.Command</a>]</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_application_commands</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">application</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">commands</span><span class="o">.</span><span class="n">Command</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">guild</span> <span class="ow">is</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_APPLICATION_COMMANDS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_APPLICATION_GUILD_COMMANDS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="n">guild_id</span> <span class="o">=</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">)</span> <span class="k">if</span> <span class="n">guild</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">guild_id</span><span class="p">)</span> <span class="k">for</span> <span class="n">command</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch the commands set for an application.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>application</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialApplication">hikari.guilds.PartialApplication</a>]):
Object or ID of the application to fetch the commands for.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
Object or ID of the guild to fetch the commands for. If left as
<code><a href="../undefined.html#UNDEFINED">hikari.undefined.UNDEFINED</a></code> then this will only return the global
commands, otherwise this will only return the commands set exclusively
for the specific guild.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>typing.Sequence[<a href="../commands.html#Command">hikari.commands.Command</a>]</strong>: A sequence of the commands declared for the provided application.
This will exclusively either contain the commands set for a specific
guild if <code>guild</code> is provided or the global commands if not.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you cannot access the target guild.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the provided application isn't found.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.create_application_command" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.create_application_command">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">create_application_command</span><span class="signature">(
    self,
    application: Union[<a href="../guilds.html#PartialApplication">hikari.guilds.PartialApplication</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    name: str,
    description: str,
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    *,
    options: Union[Sequence[<a href="../commands.html#CommandOption">hikari.commands.CommandOption</a>], <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    default_permission: Union[bool, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; <a href="../commands.html#Command">hikari.commands.Command</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_application_command</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">application</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">options</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">commands</span><span class="o">.</span><span class="n">CommandOption</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">default_permission</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">commands</span><span class="o">.</span><span class="n">Command</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">guild</span> <span class="ow">is</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_APPLICATION_COMMAND</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_APPLICATION_GUILD_COMMAND</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>

        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="n">description</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_array</span><span class="p">(</span><span class="s2">&quot;options&quot;</span><span class="p">,</span> <span class="n">options</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">serialize_command_option</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;default_permission&quot;</span><span class="p">,</span> <span class="n">default_permission</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_command</span><span class="p">(</span>
            <span class="n">response</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">)</span> <span class="k">if</span> <span class="n">guild</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Create an application command.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>application</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialApplication">hikari.guilds.PartialApplication</a>]):
Object or ID of the application to create a command for.</li>
<li><strong>name</strong> (str):
The command's name. This should match the regex <code>^[\w-]{1,32}$</code> in
Unicode mode and be lowercase.</li>
<li><strong>description</strong> (str):
The description to set for the command.
This should be inclusively between 1-100 characters in length.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
Object or ID of the specific guild this should be made for.
If left as <code><a href="../undefined.html#UNDEFINED">hikari.undefined.UNDEFINED</a></code> then this call will create
a global command rather than a guild specific one.</li>
<li><strong>options</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Sequence[<a href="../commands.html#CommandOption">hikari.commands.CommandOption</a>]]):
A sequence of up to 10 options for this command.</li>
<li><p><strong>default_permission</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[bool]):
Whether this command should be enabled by default (without any
permissions) when added to a guild.</p>

<p>Defaults to <code>True</code>.</p></li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../commands.html#Command">hikari.commands.Command</a></strong>: Object of the created command.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you cannot access the provided application's commands.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the provided application isn't found.</li>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If any of the fields that are passed have an invalid value.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.set_application_commands" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.set_application_commands">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">set_application_commands</span><span class="signature">(
    self,
    application: Union[<a href="../guilds.html#PartialApplication">hikari.guilds.PartialApplication</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    commands: Sequence[<a href="../api/special_endpoints.html#CommandBuilder">hikari.api.special_endpoints.CommandBuilder</a>],
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; Sequence[<a href="../commands.html#Command">hikari.commands.Command</a>]</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">set_application_commands</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">application</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">commands</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">CommandBuilder</span><span class="p">],</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">commands</span><span class="o">.</span><span class="n">Command</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">guild</span> <span class="ow">is</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PUT_APPLICATION_COMMANDS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PUT_APPLICATION_GUILD_COMMANDS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="p">[</span><span class="n">command</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="p">)</span> <span class="k">for</span> <span class="n">command</span> <span class="ow">in</span> <span class="n">commands</span><span class="p">])</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="n">guild_id</span> <span class="o">=</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">)</span> <span class="k">if</span> <span class="n">guild</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_command</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">guild_id</span><span class="p">)</span> <span class="k">for</span> <span class="n">payload</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>
</pre></div>

        </details>

            <div class="docstring"><p>Set the commands for an application.</p>

<p><em>Warning:</em>
Any existing commands not included in the provided commands array
will be deleted.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>application</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialApplication">hikari.guilds.PartialApplication</a>]):
Object or ID of the application to create a command for.</li>
<li><strong>commands</strong> (typing.Sequence[<a href="../api/special_endpoints.html#CommandBuilder">hikari.api.special_endpoints.CommandBuilder</a>]):
A sequence of up to 100 initialised command builder objects of the
commands to set for this the application.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]):
Object or ID of the specific guild to set the commands for.
If left as <code><a href="../undefined.html#UNDEFINED">hikari.undefined.UNDEFINED</a></code> then this set the global
commands rather than guild specific commands.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>typing.Sequence[<a href="../commands.html#Command">hikari.commands.Command</a>]</strong>: A sequence of the set command objects.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you cannot access the provided application's commands.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the provided application isn't found.</li>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If any of the fields that are passed have an invalid value.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.edit_application_command" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.edit_application_command">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">edit_application_command</span><span class="signature">(
    self,
    application: Union[<a href="../guilds.html#PartialApplication">hikari.guilds.PartialApplication</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    command: Union[<a href="../commands.html#Command">hikari.commands.Command</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    *,
    name: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    description: Union[str, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    options: Union[Sequence[<a href="../commands.html#CommandOption">hikari.commands.CommandOption</a>], <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; <a href="../commands.html#Command">hikari.commands.Command</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_application_command</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">application</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">command</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">commands</span><span class="o">.</span><span class="n">Command</span><span class="p">],</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">options</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">commands</span><span class="o">.</span><span class="n">CommandOption</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">commands</span><span class="o">.</span><span class="n">Command</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">guild</span> <span class="ow">is</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_APPLICATION_COMMAND</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">command</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_APPLICATION_GUILD_COMMAND</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
                <span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">command</span><span class="p">,</span> <span class="n">guild</span><span class="o">=</span><span class="n">guild</span>
            <span class="p">)</span>

        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="n">description</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_array</span><span class="p">(</span><span class="s2">&quot;options&quot;</span><span class="p">,</span> <span class="n">options</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">serialize_command_option</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_command</span><span class="p">(</span>
            <span class="n">response</span><span class="p">,</span> <span class="n">guild_id</span><span class="o">=</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">guild</span><span class="p">)</span> <span class="k">if</span> <span class="n">guild</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Edit a registered application command.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>application</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialApplication">hikari.guilds.PartialApplication</a>]):
Object or ID of the application to edit a command for.</li>
<li><strong>command</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../commands.html#Command">hikari.commands.Command</a>]):
Object or ID of the command to modify.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]]):
Object or ID of the guild to edit a command for if this is a guild
specific command. Leave this as <code><a href="../undefined.html#UNDEFINED">hikari.undefined.UNDEFINED</a></code> to delete
a global command.</li>
<li><strong>name</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
The name to set for the command. Leave as <code><a href="../undefined.html#UNDEFINED">hikari.undefined.UNDEFINED</a></code>
to not change.</li>
<li><strong>description</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[str]):
The description to set for the command. Leave as <code><a href="../undefined.html#UNDEFINED">hikari.undefined.UNDEFINED</a></code>
to not change.</li>
<li><strong>options</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Sequence[<a href="../commands.html#CommandOption">hikari.commands.CommandOption</a>]]):
A sequence of up to 10 options to set for this command. Leave this as
<code><a href="../undefined.html#UNDEFINED">hikari.undefined.UNDEFINED</a></code> to not change.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../commands.html#Command">hikari.commands.Command</a></strong>: The edited command object.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you cannot access the provided application's commands.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the provided application or command isn't found.</li>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: If any of the fields that are passed have an invalid value.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.delete_application_command" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.delete_application_command">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">delete_application_command</span><span class="signature">(
    self,
    application: Union[<a href="../guilds.html#PartialApplication">hikari.guilds.PartialApplication</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    command: Union[<a href="../commands.html#Command">hikari.commands.Command</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_application_command</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">application</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">command</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">commands</span><span class="o">.</span><span class="n">Command</span><span class="p">],</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">guild</span> <span class="ow">is</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_APPLICATION_COMMAND</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">command</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_APPLICATION_GUILD_COMMAND</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
                <span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">command</span><span class="p">,</span> <span class="n">guild</span><span class="o">=</span><span class="n">guild</span>
            <span class="p">)</span>

        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Delete a registered application command.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>application</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialApplication">hikari.guilds.PartialApplication</a>]):
Object or ID of the application to delete a command for.</li>
<li><strong>command</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../commands.html#Command">hikari.commands.Command</a>]):
Object or ID of the command to delete.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><strong>guild</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]]):
Object or ID of the guild to delete a command for if this is a guild
specific command. Leave this as <code><a href="../undefined.html#UNDEFINED">hikari.undefined.UNDEFINED</a></code> to
delete a global command.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you cannot access the provided application's commands.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the provided application or command isn't found.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_application_guild_commands_permissions" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_application_guild_commands_permissions">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_application_guild_commands_permissions</span><span class="signature">(
    self,
    application: Union[<a href="../guilds.html#PartialApplication">hikari.guilds.PartialApplication</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]
) -&gt; Sequence[<a href="../commands.html#GuildCommandPermissions">hikari.commands.GuildCommandPermissions</a>]</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_application_guild_commands_permissions</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">application</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">commands</span><span class="o">.</span><span class="n">GuildCommandPermissions</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_APPLICATION_GUILD_COMMANDS_PERMISSIONS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_guild_command_permissions</span><span class="p">(</span><span class="n">payload</span><span class="p">)</span> <span class="k">for</span> <span class="n">payload</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch the command permissions registered in a guild.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>application</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialApplication">hikari.guilds.PartialApplication</a>]):
Object or ID of the application to fetch the command permissions for.</li>
<li><strong>guild</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]]):
Object or ID of the guild to fetch the command permissions for.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>typing.Sequence[<a href="../commands.html#GuildCommandPermissions">hikari.commands.GuildCommandPermissions</a>]</strong>: Sequence of the guild command permissions set for the specified guild.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you cannot access the provided application's commands or guild.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the provided application isn't found.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_application_command_permissions" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_application_command_permissions">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_application_command_permissions</span><span class="signature">(
    self,
    application: Union[<a href="../guilds.html#PartialApplication">hikari.guilds.PartialApplication</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    command: Union[<a href="../commands.html#Command">hikari.commands.Command</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]
) -&gt; <a href="../commands.html#GuildCommandPermissions">hikari.commands.GuildCommandPermissions</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_application_command_permissions</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">application</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">command</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">commands</span><span class="o">.</span><span class="n">Command</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">commands</span><span class="o">.</span><span class="n">GuildCommandPermissions</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_APPLICATION_COMMAND_PERMISSIONS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
            <span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">command</span>
        <span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_guild_command_permissions</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch the permissions registered for a specific command in a guild.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>application</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialApplication">hikari.guilds.PartialApplication</a>]):
Object or ID of the application to fetch the command permissions for.</li>
<li><strong>guild</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]]):
Object or ID of the guild to fetch the command permissions for.</li>
<li><strong>command</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../commands.html#Command">hikari.commands.Command</a>]):
Objecr or ID of the command to fetch the command permissions for.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../commands.html#GuildCommandPermissions">hikari.commands.GuildCommandPermissions</a></strong>: Object of the command permissions set for the specified command.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you cannot access the provided application's commands or guild.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the provided application or command isn't found.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.set_application_guild_commands_permissions" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.set_application_guild_commands_permissions">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">set_application_guild_commands_permissions</span><span class="signature">(
    self,
    application: Union[<a href="../guilds.html#PartialApplication">hikari.guilds.PartialApplication</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    permissions: Mapping[Union[<a href="../commands.html#Command">hikari.commands.Command</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int], Sequence[<a href="../commands.html#CommandPermission">hikari.commands.CommandPermission</a>]]
) -&gt; Sequence[<a href="../commands.html#GuildCommandPermissions">hikari.commands.GuildCommandPermissions</a>]</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">set_application_guild_commands_permissions</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">application</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">permissions</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
            <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">commands</span><span class="o">.</span><span class="n">Command</span><span class="p">],</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">commands</span><span class="o">.</span><span class="n">CommandPermission</span><span class="p">]</span>
        <span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">commands</span><span class="o">.</span><span class="n">GuildCommandPermissions</span><span class="p">]:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PUT_APPLICATION_GUILD_COMMANDS_PERMISSIONS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">Snowflake</span><span class="p">(</span><span class="n">command</span><span class="p">)),</span>
                <span class="s2">&quot;permissions&quot;</span><span class="p">:</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">serialize_command_permission</span><span class="p">(</span><span class="n">permission</span><span class="p">)</span> <span class="k">for</span> <span class="n">permission</span> <span class="ow">in</span> <span class="n">perms</span><span class="p">],</span>
            <span class="p">}</span>
            <span class="k">for</span> <span class="n">command</span><span class="p">,</span> <span class="n">perms</span> <span class="ow">in</span> <span class="n">permissions</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="p">]</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_guild_command_permissions</span><span class="p">(</span><span class="n">payload</span><span class="p">)</span> <span class="k">for</span> <span class="n">payload</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>
</pre></div>

        </details>

            <div class="docstring"><p>Set permissions in a guild for multiple commands.</p>

<p><em>Note:</em>
This overwrites any previously set permissions for the specified
commands.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>application</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialApplication">hikari.guilds.PartialApplication</a>]):
Object or ID of the application to set the command permissions for.</li>
<li><strong>guild</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]]):
Object or ID of the guild to set the command permissions for.</li>
<li><p><strong>permissions</strong> (typing.Mapping[<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../commands.html#Command">hikari.commands.Command</a>], typing.Sequence[<a href="../commands.html#CommandPermission">hikari.commands.CommandPermission</a>]]):
Mapping of objects and/or IDs of commands to sequences of the commands
to set for the specified guild.</p>

<p><em>Warning:</em>
Only a maximum of up to 10 permissions can be set per command.</p></li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>typing.Sequence[<a href="../commands.html#GuildCommandPermissions">hikari.commands.GuildCommandPermissions</a>]</strong>: Sequence of the set guild command permissions.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you cannot access the provided application's commands or guild.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the provided application or command isn't found.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.set_application_command_permissions" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.set_application_command_permissions">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">set_application_command_permissions</span><span class="signature">(
    self,
    application: Union[<a href="../guilds.html#PartialApplication">hikari.guilds.PartialApplication</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    guild: Union[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    command: Union[<a href="../commands.html#Command">hikari.commands.Command</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    permissions: Sequence[<a href="../commands.html#CommandPermission">hikari.commands.CommandPermission</a>]
) -&gt; <a href="../commands.html#GuildCommandPermissions">hikari.commands.GuildCommandPermissions</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">set_application_command_permissions</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">application</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">guild</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialGuild</span><span class="p">],</span>
        <span class="n">command</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">commands</span><span class="o">.</span><span class="n">Command</span><span class="p">],</span>
        <span class="n">permissions</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">commands</span><span class="o">.</span><span class="n">CommandPermission</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">commands</span><span class="o">.</span><span class="n">GuildCommandPermissions</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PUT_APPLICATION_COMMAND_PERMISSIONS</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
            <span class="n">application</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">guild</span><span class="o">=</span><span class="n">guild</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">command</span>
        <span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put_array</span><span class="p">(</span><span class="s2">&quot;permissions&quot;</span><span class="p">,</span> <span class="n">permissions</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">serialize_command_permission</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_guild_command_permissions</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Set permissions for a specific command.</p>

<p><em>Note:</em>
This overwrites any previously set permissions.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>application</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialApplication">hikari.guilds.PartialApplication</a>]):
Object or ID of the application to set the command permissions for.</li>
<li><strong>guild</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialGuild">hikari.guilds.PartialGuild</a>]]):
Object or ID of the guild to set the command permissions for.</li>
<li><strong>command</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../commands.html#Command">hikari.commands.Command</a>]):
Object or ID of the command to set the permissions for.</li>
<li><strong>permissions</strong> (typing.Sequence[<a href="../commands.html#CommandPermission">hikari.commands.CommandPermission</a>]):
Sequence of up to 10 of the permission objects to set.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../commands.html#GuildCommandPermissions">hikari.commands.GuildCommandPermissions</a></strong>: Object of the set permissions.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you cannot access the provided application's commands or guild.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the provided application or command isn't found.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.interaction_deferred_builder" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.interaction_deferred_builder">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">interaction_deferred_builder</span><span class="signature">(
    self,
    type_: Union[<a href="../interactions/base_interactions.html#ResponseType">hikari.interactions.base_interactions.ResponseType</a>, int],
    /
) -&gt; <a href="../api/special_endpoints.html#InteractionDeferredBuilder">hikari.api.special_endpoints.InteractionDeferredBuilder</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">interaction_deferred_builder</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">type_</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">base_interactions</span><span class="o">.</span><span class="n">ResponseType</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> <span class="o">/</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">special_endpoints</span><span class="o">.</span><span class="n">InteractionDeferredBuilder</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">special_endpoints_impl</span><span class="o">.</span><span class="n">InteractionDeferredBuilder</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="n">type_</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Create a builder for a deferred message interaction response.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>type</strong> (typing.Union[<a href="../interactions/base_interactions.html#ResponseType">hikari.interactions.base_interactions.ResponseType</a>, int]):
The type of deferred message response this builder is for.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../api/special_endpoints.html#InteractionDeferredBuilder">hikari.api.special_endpoints.InteractionDeferredBuilder</a></strong>: The deferred message interaction response builder object.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.interaction_message_builder" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.interaction_message_builder">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">interaction_message_builder</span><span class="signature">(
    self,
    type_: Union[<a href="../interactions/base_interactions.html#ResponseType">hikari.interactions.base_interactions.ResponseType</a>, int],
    /
) -&gt; <a href="../api/special_endpoints.html#InteractionMessageBuilder">hikari.api.special_endpoints.InteractionMessageBuilder</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">interaction_message_builder</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">type_</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">base_interactions</span><span class="o">.</span><span class="n">ResponseType</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> <span class="o">/</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">special_endpoints</span><span class="o">.</span><span class="n">InteractionMessageBuilder</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">special_endpoints_impl</span><span class="o">.</span><span class="n">InteractionMessageBuilder</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="n">type_</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Create a builder for a message interaction response.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>type</strong> (typing.Union[<a href="../interactions/base_interactions.html#ResponseType">hikari.interactions.base_interactions.ResponseType</a>, int]):
The type of message response this builder is for.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../api/special_endpoints.html#InteractionMessageBuilder">hikari.api.special_endpoints.InteractionMessageBuilder</a></strong>: The interaction message response builder object.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.fetch_interaction_response" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.fetch_interaction_response">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">fetch_interaction_response</span><span class="signature">(
    self,
    application: Union[<a href="../guilds.html#PartialApplication">hikari.guilds.PartialApplication</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    token: str
) -&gt; <a href="../messages.html#Message">hikari.messages.Message</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_interaction_response</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">application</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span> <span class="n">token</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">GET_INTERACTION_RESPONSE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">webhook</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">no_auth</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">deserialize_message</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Fetch the initial response for an interaction.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>application</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialApplication">hikari.guilds.PartialApplication</a>]):
Object or ID of the application to fetch a command for.</li>
<li><strong>token</strong> (str):
Token of the interaction to get the initial response for.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../messages.html#Message">hikari.messages.Message</a></strong>: Message object of the initial response.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#ForbiddenError">hikari.errors.ForbiddenError</a></strong>: If you cannot access the target interaction.</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the initial response isn't found.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.create_interaction_response" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.create_interaction_response">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">create_interaction_response</span><span class="signature">(
    self,
    interaction: Union[<a href="../interactions/base_interactions.html#PartialInteraction">hikari.interactions.base_interactions.PartialInteraction</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    token: str,
    response_type: Union[int, <a href="../interactions/base_interactions.html#ResponseType">hikari.interactions.base_interactions.ResponseType</a>],
    content: Union[Any, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    *,
    flags: Union[int, <a href="../messages.html#MessageFlag">hikari.messages.MessageFlag</a>, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    tts: Union[bool, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    component: Union[<a href="../api/special_endpoints.html#ComponentBuilder">hikari.api.special_endpoints.ComponentBuilder</a>, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    components: Union[Sequence[<a href="../api/special_endpoints.html#ComponentBuilder">hikari.api.special_endpoints.ComponentBuilder</a>], <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    embed: Union[<a href="../embeds.html#Embed">hikari.embeds.Embed</a>, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    embeds: Union[Sequence[<a href="../embeds.html#Embed">hikari.embeds.Embed</a>], <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    mentions_everyone: Union[bool, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    user_mentions: Union[Sequence[Union[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]], bool, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    role_mentions: Union[Sequence[Union[<a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]], bool, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_interaction_response</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">interaction</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">base_interactions</span><span class="o">.</span><span class="n">PartialInteraction</span><span class="p">],</span>
        <span class="n">token</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">response_type</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">base_interactions</span><span class="o">.</span><span class="n">ResponseType</span><span class="p">],</span>
        <span class="n">content</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">flags</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">messages_</span><span class="o">.</span><span class="n">MessageFlag</span><span class="p">,</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedType</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">tts</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">component</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">components</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">embed</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">embeds</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">mentions_everyone</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">user_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">role_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">any_undefined</span><span class="p">(</span><span class="n">component</span><span class="p">,</span> <span class="n">components</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;You may only specify one of &#39;component&#39; or &#39;components&#39;, not both&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">any_undefined</span><span class="p">(</span><span class="n">embed</span><span class="p">,</span> <span class="n">embeds</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;You may only specify one of &#39;embed&#39; or &#39;embeds&#39;, not both&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">components</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">components</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Collection</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s2">&quot;You passed a non-collection to &#39;components&#39;, but this expects a collection. Maybe you meant to &quot;</span>
                <span class="s2">&quot;use &#39;component&#39; (singular) instead?&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">embeds</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">_NONE_OR_UNDEFINED</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">embeds</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Collection</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s2">&quot;You passed a non-collection to &#39;embeds&#39;, but this expects a collection. Maybe you meant to &quot;</span>
                <span class="s2">&quot;use &#39;embed&#39; (singular) instead?&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">undefined</span><span class="o">.</span><span class="n">all_undefined</span><span class="p">(</span><span class="n">embed</span><span class="p">,</span> <span class="n">embeds</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">):</span>
            <span class="c1"># Syntactic sugar, common mistake to accidentally send an embed</span>
            <span class="c1"># as the content, so lets detect this and fix it for the user.</span>
            <span class="n">embed</span> <span class="o">=</span> <span class="n">content</span>
            <span class="n">content</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span>

        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">POST_INTERACTION_RESPONSE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">interaction</span><span class="o">=</span><span class="n">interaction</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">)</span>

        <span class="n">body</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="n">response_type</span><span class="p">)</span>

        <span class="n">data</span> <span class="o">=</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">()</span>
        <span class="n">data</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;content&quot;</span><span class="p">,</span> <span class="n">content</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">data</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;flags&quot;</span><span class="p">,</span> <span class="n">flags</span><span class="p">)</span>
        <span class="n">data</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;tts&quot;</span><span class="p">,</span> <span class="n">tts</span><span class="p">)</span>
        <span class="n">data</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
            <span class="s2">&quot;allowed_mentions&quot;</span><span class="p">,</span>
            <span class="n">mentions</span><span class="o">.</span><span class="n">generate_allowed_mentions</span><span class="p">(</span><span class="n">mentions_everyone</span><span class="p">,</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span> <span class="n">user_mentions</span><span class="p">,</span> <span class="n">role_mentions</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">component</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">data</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;components&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">component</span><span class="o">.</span><span class="n">build</span><span class="p">()])</span>

        <span class="k">elif</span> <span class="n">components</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">data</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;components&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">component</span><span class="o">.</span><span class="n">build</span><span class="p">()</span> <span class="k">for</span> <span class="n">component</span> <span class="ow">in</span> <span class="n">components</span><span class="p">])</span>

        <span class="k">if</span> <span class="n">embed</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">embed_payload</span><span class="p">,</span> <span class="n">attachments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">serialize_embed</span><span class="p">(</span><span class="n">embed</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">attachments</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Cannot send an embed with attachments in a slash command&#39;s initial response&quot;</span><span class="p">)</span>

            <span class="n">data</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;embeds&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">embed_payload</span><span class="p">])</span>

        <span class="k">elif</span> <span class="n">embeds</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">:</span>
            <span class="n">embed_payloads</span><span class="p">:</span> <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONArray</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">embed</span> <span class="ow">in</span> <span class="n">embeds</span><span class="p">:</span>
                <span class="n">serialized_embed</span><span class="p">,</span> <span class="n">attachments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_factory</span><span class="o">.</span><span class="n">serialize_embed</span><span class="p">(</span><span class="n">embed</span><span class="p">)</span>
                <span class="n">embed_payloads</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">serialized_embed</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">attachments</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Cannot send an embed with attachments in a slash command&#39;s initial response&quot;</span><span class="p">)</span>

            <span class="n">data</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;embeds&quot;</span><span class="p">,</span> <span class="n">embed_payloads</span><span class="p">)</span>

        <span class="n">body</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">no_auth</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Create the initial response for a interaction.</p>

<p><em>Warning:</em>
Calling this with an interaction which already has an initial
response will result in this raising a <code><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></code>.
This includes if the REST interaction server has already responded
to the request.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>interaction</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../interactions/base_interactions.html#PartialInteraction">hikari.interactions.base_interactions.PartialInteraction</a>]):
Object or ID of the interaction this response is for.</li>
<li><strong>token</strong> (str):
The command interaction's token.</li>
<li><strong>response_type</strong> (typing.Union[int, <a href="../interactions/base_interactions.html#ResponseType">hikari.interactions.base_interactions.ResponseType</a>]):
The type of interaction response this is.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><p><strong>content</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Any]):
If provided, the message contents. If
<code><a href="../undefined.html#UNDEFINED">hikari.undefined.UNDEFINED</a></code>, then nothing will be sent
in the content. Any other value here will be cast to a
<code>str</code>.</p>

<p>If this is a <code><a href="../embeds.html#Embed">hikari.embeds.Embed</a></code> and no <code>embed</code> nor
no <code>embeds</code> kwarg is provided, then this will instead
update the embed. This allows for simpler syntax when
sending an embed alone.</p></li>
<li><strong>component</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../api/special_endpoints.html#ComponentBuilder">hikari.api.special_endpoints.ComponentBuilder</a>]):
If provided, builder object of the component to include in this message.</li>
<li><strong>components</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Sequence[<a href="../api/special_endpoints.html#ComponentBuilder">hikari.api.special_endpoints.ComponentBuilder</a>]]):
If provided, a sequence of the component builder objects to include
in this message.</li>
<li><strong>embed</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../embeds.html#Embed">hikari.embeds.Embed</a>]):
If provided, the message embed.</li>
<li><strong>embeds</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Sequence[<a href="../embeds.html#Embed">hikari.embeds.Embed</a>]]):
If provided, the message embeds.</li>
<li><p><strong>flags</strong> (typing.Union[int, <a href="../messages.html#MessageFlag">hikari.messages.MessageFlag</a>, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>]):
If provided, the message flags this response should have.</p>

<p>As of writing the only message flag which can be set here is
<code><a href="../messages.html#MessageFlag.EPHEMERAL">hikari.messages.MessageFlag.EPHEMERAL</a></code>.</p></li>
<li><strong>tts</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[bool]):
If provided, whether the message will be read out by a screen
reader using Discord's TTS (text-to-speech) system.</li>
<li><strong>mentions_everyone</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[bool]):
If provided, whether the message should parse @everyone/@here
mentions.</li>
<li><strong>user_mentions</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Union[<a href="../snowflakes.html#SnowflakeishSequence">hikari.snowflakes.SnowflakeishSequence</a>[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>], bool]]):
If provided, and <code>True</code>, all user mentions will be detected.
If provided, and <code>False</code>, all user mentions will be ignored
if appearing in the message body.
Alternatively this may be a collection of
<code><a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a></code>, or
<code><a href="../users.html#PartialUser">hikari.users.PartialUser</a></code> derivatives to enforce mentioning
specific users.</li>
<li><strong>role_mentions</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Union[<a href="../snowflakes.html#SnowflakeishSequence">hikari.snowflakes.SnowflakeishSequence</a>[<a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a>], bool]]):
If provided, and <code>True</code>, all role mentions will be detected.
If provided, and <code>False</code>, all role mentions will be ignored
if appearing in the message body.
Alternatively this may be a collection of
<code><a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a></code>, or
<code><a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a></code> derivatives to enforce mentioning
specific roles.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong>ValueError</strong>: If more than 100 unique objects/entities are passed for
<code>role_mentions</code> or <code>user_mentions</code>.</li>
<li><strong>TypeError</strong>: If both <code>embed</code> and <code>embeds</code> are specified.</li>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: This may be raised in several discrete situations, such as messages
being empty with no embeds; messages with more than 2000 characters
in them, embeds that exceed one of the many embed limits
invalid image URLs in embeds.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the interaction is not found or if the interaction's initial
response has already been created.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.edit_interaction_response" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.edit_interaction_response">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">edit_interaction_response</span><span class="signature">(
    self,
    application: Union[<a href="../guilds.html#PartialApplication">hikari.guilds.PartialApplication</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    token: str,
    content: Union[Any, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>, NoneType] = UNDEFINED,
    *,
    attachment: Union[<a href="../files.html#Resource">hikari.files.Resource</a>[Any], os.PathLike, str, bytes, bytearray, memoryview, _io.BytesIO, _io.StringIO, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    attachments: Union[Sequence[Union[<a href="../files.html#Resource">hikari.files.Resource</a>[Any], os.PathLike, str, bytes, bytearray, memoryview, _io.BytesIO, _io.StringIO]], <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    component: Union[<a href="../api/special_endpoints.html#ComponentBuilder">hikari.api.special_endpoints.ComponentBuilder</a>, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>, NoneType] = UNDEFINED,
    components: Union[Sequence[<a href="../api/special_endpoints.html#ComponentBuilder">hikari.api.special_endpoints.ComponentBuilder</a>], <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>, NoneType] = UNDEFINED,
    embed: Union[<a href="../embeds.html#Embed">hikari.embeds.Embed</a>, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>, NoneType] = UNDEFINED,
    embeds: Union[Sequence[<a href="../embeds.html#Embed">hikari.embeds.Embed</a>], <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>, NoneType] = UNDEFINED,
    replace_attachments: bool = False,
    mentions_everyone: Union[bool, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    user_mentions: Union[Sequence[Union[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]], bool, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED,
    role_mentions: Union[Sequence[Union[<a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int]], bool, <a href="../undefined.html#UndefinedType">hikari.undefined.UndefinedType</a>] = UNDEFINED
) -&gt; <a href="../messages.html#Message">hikari.messages.Message</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">edit_interaction_response</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">application</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span>
        <span class="n">token</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">content</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">attachment</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">attachments</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">files</span><span class="o">.</span><span class="n">Resourceish</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">component</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">components</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">special_endpoints</span><span class="o">.</span><span class="n">ComponentBuilder</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">embed</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">embeds</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedNoneOr</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">embeds_</span><span class="o">.</span><span class="n">Embed</span><span class="p">]]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">replace_attachments</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">mentions_everyone</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">user_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">users</span><span class="o">.</span><span class="n">PartialUser</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="n">role_mentions</span><span class="p">:</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UndefinedOr</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishSequence</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialRole</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">messages_</span><span class="o">.</span><span class="n">Message</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PATCH_INTERACTION_RESPONSE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">webhook</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">)</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_edit_message</span><span class="p">(</span>
            <span class="n">route</span><span class="p">,</span>
            <span class="n">data_binding</span><span class="o">.</span><span class="n">JSONObjectBuilder</span><span class="p">(),</span>
            <span class="n">no_auth</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span>
            <span class="n">attachment</span><span class="o">=</span><span class="n">attachment</span><span class="p">,</span>
            <span class="n">attachments</span><span class="o">=</span><span class="n">attachments</span><span class="p">,</span>
            <span class="n">component</span><span class="o">=</span><span class="n">component</span><span class="p">,</span>
            <span class="n">components</span><span class="o">=</span><span class="n">components</span><span class="p">,</span>
            <span class="n">embed</span><span class="o">=</span><span class="n">embed</span><span class="p">,</span>
            <span class="n">embeds</span><span class="o">=</span><span class="n">embeds</span><span class="p">,</span>
            <span class="n">replace_attachments</span><span class="o">=</span><span class="n">replace_attachments</span><span class="p">,</span>
            <span class="n">mentions_everyone</span><span class="o">=</span><span class="n">mentions_everyone</span><span class="p">,</span>
            <span class="n">user_mentions</span><span class="o">=</span><span class="n">user_mentions</span><span class="p">,</span>
            <span class="n">role_mentions</span><span class="o">=</span><span class="n">role_mentions</span><span class="p">,</span>
            <span class="n">mentions_reply</span><span class="o">=</span><span class="n">undefined</span><span class="o">.</span><span class="n">UNDEFINED</span><span class="p">,</span>
        <span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Edit the initial response to a command interaction.</p>

<h6 id="notes">Notes</h6>

<p>Mentioning everyone, roles, or users in message edits currently
will not send a push notification showing a new mention to people
on Discord. It will still highlight in their chat as if they
were mentioned, however.</p>

<p>Also important to note that if you specify a text <code>content</code>, <code>mentions_everyone</code>,
<code>mentions_reply</code>, <code>user_mentions</code>, and <code>role_mentions</code> will default
to <code>False</code> as the message will be re-parsed for mentions. This will
also occur if only one of the four are specified</p>

<p>This is a limitation of Discord's design. If in doubt, specify all
four of them each time.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>application</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialApplication">hikari.guilds.PartialApplication</a>]):
Object or ID of the application to edit a command response for.</li>
<li><strong>token</strong> (str):
The interaction's token.</li>
</ul>

<h6 id="other-parameters">Other Parameters</h6>

<ul>
<li><p><strong>content</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Any]):
If provided, the message content to update with. If
<code><a href="../undefined.html#UNDEFINED">hikari.undefined.UNDEFINED</a></code>, then the content will not
be changed. If <code>None</code>, then the content will be removed.</p>

<p>Any other value will be cast to a <code>str</code> before sending.</p>

<p>If this is a <code><a href="../embeds.html#Embed">hikari.embeds.Embed</a></code> and neither the
<code>embed</code> or <code>embeds</code> kwargs are provided or if this is a
<code><a href="../files.html#Resourceish">hikari.files.Resourceish</a></code> and neither the <code>attachment</code> or
<code>attachments</code> kwargs are provided, the values will be overwritten.
This allows for simpler syntax when sending an embed or an
attachment alone.</p></li>
<li><strong>attachment</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[<a href="../files.html#Resourceish">hikari.files.Resourceish</a>]):
If provided, the attachment to set on the message. If
<code><a href="../undefined.html#UNDEFINED">hikari.undefined.UNDEFINED</a></code>, the previous attachment, if
present, is not changed. If this is <code>None</code>, then the
attachment is removed, if present. Otherwise, the new attachment
that was provided will be attached.</li>
<li><strong>attachments</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Sequence[<a href="../files.html#Resourceish">hikari.files.Resourceish</a>]]):
If provided, the attachments to set on the message. If
<code><a href="../undefined.html#UNDEFINED">hikari.undefined.UNDEFINED</a></code>, the previous attachments, if
present, are not changed. If this is <code>None</code>, then the
attachments is removed, if present. Otherwise, the new attachments
that were provided will be attached.</li>
<li><strong>component</strong> (<a href="../undefined.html#UndefinedNoneOr">hikari.undefined.UndefinedNoneOr</a>[<a href="../api/special_endpoints.html#ComponentBuilder">hikari.api.special_endpoints.ComponentBuilder</a>]):
If provided, builder object of the component to set for this message.
This component will replace any previously set components and passing
<code>None</code> will remove all components.</li>
<li><strong>components</strong> (<a href="../undefined.html#UndefinedNoneOr">hikari.undefined.UndefinedNoneOr</a>[typing.Sequence[<a href="../api/special_endpoints.html#ComponentBuilder">hikari.api.special_endpoints.ComponentBuilder</a>]]):
If provided, a sequence of the component builder objects set for
this message. These components will replace any previously set
components and passing <code>None</code> or an empty sequence will
remove all components.</li>
<li><strong>embed</strong> (<a href="../undefined.html#UndefinedNoneOr">hikari.undefined.UndefinedNoneOr</a>[<a href="../embeds.html#Embed">hikari.embeds.Embed</a>]):
If provided, the embed to set on the message. If
<code><a href="../undefined.html#UNDEFINED">hikari.undefined.UNDEFINED</a></code>, the previous embed(s) are not changed.
If this is <code>None</code> then any present embeds are removed.
Otherwise, the new embed that was provided will be used as the
replacement.</li>
<li><strong>embeds</strong> (<a href="../undefined.html#UndefinedNoneOr">hikari.undefined.UndefinedNoneOr</a>[typing.Sequence[<a href="../embeds.html#Embed">hikari.embeds.Embed</a>]]):
If provided, the embeds to set on the message. If
<code><a href="../undefined.html#UNDEFINED">hikari.undefined.UNDEFINED</a></code>, the previous embed(s) are not changed.
If this is <code>None</code> then any present embeds are removed.
Otherwise, the new embeds that were provided will be used as the
replacement.</li>
<li><p><strong>replace_attachments</strong> (bool):
Whether to replace the attachments with the provided ones. Defaults
to <code>False</code>.</p>

<p>Note this will also overwrite the embed attachments.</p></li>
<li><strong>mentions_everyone</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[bool]):
If provided, whether the message should parse @everyone/@here
mentions.</li>
<li><strong>user_mentions</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Union[<a href="../snowflakes.html#SnowflakeishSequence">hikari.snowflakes.SnowflakeishSequence</a>[<a href="../users.html#PartialUser">hikari.users.PartialUser</a>], bool]]):
If provided, and <code>True</code>, all user mentions will be detected.
If provided, and <code>False</code>, all user mentions will be ignored
if appearing in the message body.
Alternatively this may be a collection of
<code><a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a></code>, or
<code><a href="../users.html#PartialUser">hikari.users.PartialUser</a></code> derivatives to enforce mentioning
specific users.</li>
<li><strong>role_mentions</strong> (<a href="../undefined.html#UndefinedOr">hikari.undefined.UndefinedOr</a>[typing.Union[<a href="../snowflakes.html#SnowflakeishSequence">hikari.snowflakes.SnowflakeishSequence</a>[<a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a>], bool]]):
If provided, and <code>True</code>, all role mentions will be detected.
If provided, and <code>False</code>, all role mentions will be ignored
if appearing in the message body.
Alternatively this may be a collection of
<code><a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a></code>, or
<code><a href="../guilds.html#PartialRole">hikari.guilds.PartialRole</a></code> derivatives to enforce mentioning
specific roles.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../messages.html#Message">hikari.messages.Message</a></strong>: The edited message.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong>ValueError</strong>: If both <code>attachment</code> and <code>attachments</code>, <code>component</code> and <code>components</code>
or <code>embed</code> and <code>embeds</code> are specified.</li>
<li><strong>TypeError</strong>: If <code>attachments</code>, <code>components</code> or <code>embeds</code> is passed but is not a
sequence.</li>
<li><strong><a href="../errors.html#BadRequestError">hikari.errors.BadRequestError</a></strong>: This may be raised in several discrete situations, such as messages
being empty with no attachments or embeds; messages with more than
2000 characters in them, embeds that exceed one of the many embed
limits; too many attachments; attachments that are too large;
invalid image URLs in embeds; too many components.</li>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the interaction or the message are not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.delete_interaction_response" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.delete_interaction_response">#&nbsp;&nbsp</a>

        
            <span class="def">async def</span>
            <span class="name">delete_interaction_response</span><span class="signature">(
    self,
    application: Union[<a href="../guilds.html#PartialApplication">hikari.guilds.PartialApplication</a>, <a href="../snowflakes.html#Snowflake">hikari.snowflakes.Snowflake</a>, int],
    token: str
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_interaction_response</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">application</span><span class="p">:</span> <span class="n">snowflakes</span><span class="o">.</span><span class="n">SnowflakeishOr</span><span class="p">[</span><span class="n">guilds</span><span class="o">.</span><span class="n">PartialApplication</span><span class="p">],</span> <span class="n">token</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">DELETE_INTERACTION_RESPONSE</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">webhook</span><span class="o">=</span><span class="n">application</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">no_auth</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Delete the initial response of an interaction.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>application</strong> (<a href="../snowflakes.html#SnowflakeishOr">hikari.snowflakes.SnowflakeishOr</a>[<a href="../guilds.html#PartialApplication">hikari.guilds.PartialApplication</a>]):
Object or ID of the application to delete a command response for.</li>
<li><strong>token</strong> (str):
The interaction's token.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="../errors.html#UnauthorizedError">hikari.errors.UnauthorizedError</a></strong>: If you are unauthorized to make the request (invalid/missing token).</li>
<li><strong><a href="../errors.html#NotFoundError">hikari.errors.NotFoundError</a></strong>: If the interaction or response is not found.</li>
<li><strong><a href="../errors.html#RateLimitTooLongError">hikari.errors.RateLimitTooLongError</a></strong>: Raised in the event that a rate limit occurs that is
longer than <code>max_rate_limit</code> when making a request.</li>
<li><strong><a href="../errors.html#RateLimitedError">hikari.errors.RateLimitedError</a></strong>: Usually, Hikari will handle and retry on hitting
rate-limits automatically. This includes most bucket-specific
rate-limits and global rate-limits. In some rare edge cases,
however, Discord implements other undocumented rules for
rate-limiting, such as limits per attribute. These cannot be
detected or handled normally by Hikari due to their undocumented
nature, and will trigger this exception if they occur.</li>
<li><strong><a href="../errors.html#InternalServerError">hikari.errors.InternalServerError</a></strong>: If an internal error occurs on Discord while handling the request.</li>
</ul>
</div>


                        </div>
                        <div id="RESTClientImpl.build_action_row" class="classattr">
                                
        <div class="attr function"><a class="headerlink" href="#RESTClientImpl.build_action_row">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">build_action_row</span><span class="signature">(self) -&gt; <a href="../api/special_endpoints.html#ActionRowBuilder">hikari.api.special_endpoints.ActionRowBuilder</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">build_action_row</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">special_endpoints</span><span class="o">.</span><span class="n">ActionRowBuilder</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">special_endpoints_impl</span><span class="o">.</span><span class="n">ActionRowBuilder</span><span class="p">()</span>
</pre></div>

        </details>

            <div class="docstring"><p>Build an action row message component for use in message create and REST calls.</p>

<h6 id="returns">Returns</h6>

<ul>
<li><strong><a href="../api/special_endpoints.html#ActionRowBuilder">hikari.api.special_endpoints.ActionRowBuilder</a></strong>: The initialised action row builder.</li>
</ul>
</div>


                        </div>
            </section>
    </main>
    <script src="../../../version_switcher.js"></script>
    <script>
        "use strict";
        const html = document.querySelector("html");
        const sidebarToggle = document.getElementById("sidebar-toggle");

        // Button control
        sidebarToggle.addEventListener('click', function () {
            if (html.classList.contains("sidebar-hidden")) {
                html.classList.remove("sidebar-hidden");
            } else {
                html.classList.add("sidebar-hidden");
            }
        });

        // Swipe controls
        let firstContact = null;

        document.addEventListener('touchstart', function (e) {
            firstContact = {
                x: e.touches[0].clientX,
                time: Date.now()
            };
        }, { passive: true });

        document.addEventListener('touchmove', function (e) {
            if (!firstContact)
                return;
            let curX = e.touches[0].clientX;
            let xDiff = curX - firstContact.x;
            let tDiff = Date.now() - firstContact.time;
            if (tDiff < 300 && Math.abs(xDiff) >= 100) {
                if (xDiff >= 0 && firstContact.x < Math.min(document.body.clientWidth * 0.25, 300)) {
                    html.classList.remove("sidebar-hidden");
                    firstContact = null;
                }
                else if (xDiff < 0 && curX < 150) {
                    html.classList.add("sidebar-hidden");
                    firstContact = null;
                }
            }
        }, { passive: true });
    </script>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.type) {
                    case "function":
                        heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span><span class="signature">(${doc.parameters.join(", ")})</span>`;
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.type}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>